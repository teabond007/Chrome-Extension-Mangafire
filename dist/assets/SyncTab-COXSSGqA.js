import{u as b}from"./useSettings-C0bSp6nc.js";import{S as g}from"./storage-schema-DNpnt-ap.js";import{G as f}from"./GlassCard-zdn37Q_h.js";import{B as _}from"./BaseToggle-Bq5VHqeK.js";import{B as T}from"./BaseButton-DrEgG_qK.js";import{_ as L,o as B,r as y,c as l,g as i,b as c,A as p,a as s,u as d,t as u,d as N,f as A,F as C,i as x,n as M}from"./_plugin-vue_export-helper-DrK4Gf5m.js";import"./config-0i2jtrsc.js";/* empty css                                                                   */const R={class:"tab-content"},V={class:"settings-group"},D={class:"setting-row"},Y={class:"setting-row"},z={class:"sync-actions"},E={class:"last-sync-info"},F={class:"value"},G={class:"logs-container"},U={key:0,class:"empty-logs"},I={key:1,class:"log-list"},K={class:"log-time"},O={__name:"SyncTab",setup(P){const{features:v,updateSetting:S}=b(),r=y(null),n=y(!1),o=y([]),k=N(()=>r.value?new Date(r.value).toLocaleString():"Never");B(async()=>{const e=await chrome.storage.local.get(g.LAST_SYNC);r.value=e[g.LAST_SYNC]||null});const h=async()=>{if(!n.value){n.value=!0,m("Starting manual sync...","info");try{await new Promise(t=>setTimeout(t,2e3));const e=Date.now();await chrome.storage.local.set({[g.LAST_SYNC]:e}),r.value=e,m("Sync completed successfully","success")}catch(e){console.error(e),m("Sync failed: "+e.message,"error")}finally{n.value=!1}}},m=(e,t="info")=>{const a=new Date().toLocaleTimeString();o.value.unshift({time:a,message:e,type:t}),o.value.length>50&&o.value.pop()};return(e,t)=>(i(),l("div",R,[c(f,{title:"Bookmark Synchronization",subtitle:"Sync reading progress with platform accounts"},{default:p(()=>[s("div",V,[s("div",D,[t[2]||(t[2]=s("div",{class:"setting-info"},[s("span",{class:"setting-label"},"Automatic Sync"),s("span",{class:"setting-description"},"Sync bookmarks every 30 minutes in background")],-1)),c(_,{"model-value":d(v).autoSync,"onUpdate:modelValue":t[0]||(t[0]=a=>d(S)("features.autoSync",a))},null,8,["model-value"])]),s("div",Y,[t[3]||(t[3]=s("div",{class:"setting-info"},[s("span",{class:"setting-label"},"Sync Read Status"),s("span",{class:"setting-description"},"Mark chapters as read across devices")],-1)),c(_,{"model-value":d(v).syncAndMarkRead,"onUpdate:modelValue":t[1]||(t[1]=a=>d(S)("features.syncAndMarkRead",a))},null,8,["model-value"])])]),s("div",z,[s("div",E,[t[4]||(t[4]=s("span",{class:"label"},"Last Sync:",-1)),s("span",F,u(k.value),1)]),c(T,{variant:"primary",icon:"ðŸ”„",loading:n.value,onClick:h},{default:p(()=>[A(u(n.value?"Syncing...":"Sync Now"),1)]),_:1},8,["loading"])])]),_:1}),c(f,{title:"Sync Logs",subtitle:"Recent synchronization activity"},{default:p(()=>[s("div",G,[o.value.length===0?(i(),l("div",U," No sync activity recorded. ")):(i(),l("div",I,[(i(!0),l(C,null,x(o.value,(a,w)=>(i(),l("div",{key:w,class:"log-entry"},[s("span",K,u(a.time),1),s("span",{class:M(["log-message",a.type])},u(a.message),3)]))),128))]))])]),_:1})]))}},$=L(O,[["__scopeId","data-v-d6071274"]]);export{$ as default};
