import{c as W}from"./pinia-B4MhBOgL.js";import{w as z,o as L,a as N,c as R,r as d,b as _,d as B,e as t,m as Z,f as F,g as j,t as E,u as T,h as O,i as X}from"./runtime-dom.esm-bundler-DbRehm6p.js";import{u as J}from"./main-C5b2ZwJN.js";import{S as b,F as C,B as P,T as M,C as U}from"./config-C-HYl_Rw.js";import{S as o,_ as Y}from"./_plugin-vue_export-helper-B73cENFA.js";const K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsEAAA7BAbiRa+0AAAGHaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49J++7vycgaWQ9J1c1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCc/Pg0KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyI+PHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj48cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0idXVpZDpmYWY1YmRkNS1iYTNkLTExZGEtYWQzMS1kMzNkNzUxODJmMWIiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj48dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPjwvcmRmOkRlc2NyaXB0aW9uPjwvcmRmOlJERj48L3g6eG1wbWV0YT4NCjw/eHBhY2tldCBlbmQ9J3cnPz4slJgLAAAD2UlEQVR4Xu3cMW4UMRTG8RcKKEAooUNKRUfHVXIAqpRUHICKA3ACKg7AQWjo0qVCSrdLAQVVqEYaWfas7ff81vO+71e6ycy+f8beKJqLpy+vH6XCv4/P0yW5+PwiXTqLq1dv0yUYhw8/0iV59uVvulT0JF0gLAwAHAMAxwDAMQBwF5G/BRwPd+nSLpTuJ4ffAgr2OnxxvvawAVAdBgAubAAt++hsPK899CEQAQ+BpMIAwIXeAjy/Tlkq3U8Ot4CCvQ5fnK89bABUhwGACxtAyz46G89rD30IRMBDIKkwAHChtwDPr1OWSveTwy2gYK/DF+drDxsA1WEA4FQBPH76ky5No2UfnU3ttef2/1bVh0CZ+CBY+4FFkwug5QAo2ieATP4UiCw3/B7qAIQRuLMavrQGsPV4YQQ+toa/NZ+SpjPAIncWWPM+FyCcAbYGL53Dl94ApCICcQwhagCnhr7oHb5oApDKCGgszfCl9QyQ0v5w0rH4/FVPgDU+DfxYDH5hFsCCIYxjOfiFeQBrjEFvxNDXhgZA81MdAmn/GAA4BgCOAYBjAOAYADgGAG743wGuv71Ll6jCr/c/06UhhgTAodsbFYRZABy6D+sQTALg8P1ZhaAKgIM/P20I3QG0DP/+5iFdMhXxX8Kuvv5Ol4o0EXQFUDP80UNfixjAWk0MvRE0B3Bq+J6DX0QPYHEqhJ4IzP4QdH/zcJbhIzneXsrx9jJdVmkKoPTbz8H7KkVQms+WpgByOPzzKEXQqjqAnrrIX+ucqgPI4W//eVk8BVQB0P4xAHAMABwDAMcAwDEAcAwAHAMAxwDAMQBwDAAcAwDHAMAxAHAMABwDAMcAwDEAcAwAHAMAxwDAMQBwDAAcAwDHAMAxAHAMABwDAMcAwDEAcAwAHAMAV/2WsNybJ2Z5QUTpLWHHw126tAul+8nJvTms5W1hYZ8Aex2+OF972ACoDgMAFzaAln10Np7XHvoQiICHQFJhAOBCbwGeX6csle4nh1tAwV6HL87XHjYAqsMAwIUNoGUfnY3ntYc+BCLgIZBUGAC40FuA59cpS6X7yeEWULDX4YvztYcNgOowAHCqAN58f50uTaNlH51N7bXn9v9W1YdAmfggWPuBRZMLoOUAKNongEz+FIgsN/we6gCEEbizGr60BrD1eGEEPraGvzWfkqYzwCJ3FljzPhcgnAG2Bi+dw5feAKQiAnEMIWoAp4a+6B2+aAKQyghoLM3wpfUMkNL+cNKx+PxVT4A1Pg38WAx+YRbAgiGMYzn4hXkAa4xBb8TQ14YGQPNTHQJp/xgAOAYAjgGA+w8SrkpOTzPZVQAAAABJRU5ErkJggg==";function q(){const h=d(!1),A=d(!0),l=d("cloudy-dark"),i=d({...b}),g=d({...P}),c=d({...C}),n=d("medium"),p=d([]),v=d({}),w=R(()=>M[l.value]||M["cloudy-dark"]),u=R(()=>U[n.value]||U.medium),a=R(()=>Object.entries(M).map(([e,s])=>({id:e,name:s.name})));async function S(){A.value=!0;try{const e=await chrome.storage.local.get([o.THEME,o.STATUS_COLORS,o.BORDER_STYLE,o.BORDER_SIZE,o.CUSTOM_MARKERS,"features","cardSize"]);e[o.THEME]&&(l.value=e[o.THEME]),e[o.STATUS_COLORS]&&(i.value={...b,...e[o.STATUS_COLORS]}),e[o.BORDER_STYLE]&&(g.value.style=e[o.BORDER_STYLE]),e[o.BORDER_SIZE]&&(g.value.size=e[o.BORDER_SIZE]),e[o.CUSTOM_MARKERS]&&(p.value=e[o.CUSTOM_MARKERS]),e.features&&(c.value={...C,...e.features}),e.cardSize&&(n.value=e.cardSize),e.platformSettings&&(v.value=e.platformSettings),h.value=!0,console.log("[useSettings] ‚úì Settings loaded")}catch(e){console.error("[useSettings] Failed to load settings:",e)}finally{A.value=!1}}async function m(){try{await chrome.storage.local.set({[o.THEME]:l.value,[o.STATUS_COLORS]:i.value,[o.BORDER_STYLE]:g.value.style,[o.BORDER_SIZE]:g.value.size,[o.CUSTOM_MARKERS]:p.value,features:c.value,cardSize:n.value,platformSettings:v.value}),console.log("[useSettings] ‚úì Settings saved")}catch(e){console.error("[useSettings] Failed to save settings:",e)}}async function f(e,s){const r=e.split(".");r.length===1?e==="theme"?l.value=s:e==="cardSize"&&(n.value=s):r[0]==="border"?g.value[r[1]]=s:r[0]==="features"?c.value[r[1]]=s:r[0]==="statusColors"?i.value[r[1]]=s:r[0]==="platforms"&&r.length===3&&(v.value[r[1]]||(v.value[r[1]]={}),v.value[r[1]][r[2]]=s),await m()}function x(e){return i.value[e]||"transparent"}function I(e){return c.value[e]??!1}async function Q(e){c.value[e]=!c.value[e],await m()}async function V(e,s){p.value.push({name:e,color:s}),await m()}async function k(e){p.value=p.value.filter(s=>s.name!==e),await m()}function y(){const e=w.value,s=document.documentElement;s.style.setProperty("--color-bg-body",e.bgBody),s.style.setProperty("--color-bg-sidebar",e.bgSidebar),s.style.setProperty("--color-bg-surface",e.bgSurface),s.style.setProperty("--color-bg-elevated",e.bgElevated),s.style.setProperty("--color-primary",e.accentPrimary),s.style.setProperty("--color-accent",e.accentSecondary),s.style.setProperty("--color-text-primary",e.textPrimary),s.style.setProperty("--color-text-secondary",e.textSecondary),s.style.setProperty("--color-text-muted",e.textMuted),s.style.setProperty("--color-border",e.border)}async function G(){l.value="cloudy-dark",i.value={...b},g.value={...P},c.value={...C},n.value="medium",p.value=[],await m(),y()}function D(e,s){s==="local"&&(e[o.THEME]&&(l.value=e[o.THEME].newValue,y()),e[o.STATUS_COLORS]&&(i.value=e[o.STATUS_COLORS].newValue),e.features&&(c.value=e.features.newValue))}return z(l,()=>{y()}),L(async()=>{await S(),y(),chrome.storage.onChanged.addListener(D)}),N(()=>{chrome.storage.onChanged.removeListener(D)}),{isLoaded:h,isLoading:A,theme:l,statusColors:i,border:g,features:c,cardSize:n,customMarkers:p,platforms:v,themeConfig:w,cardDimensions:u,availableThemes:a,loadSettings:S,saveSettings:m,updateSetting:f,getStatusColor:x,isFeatureEnabled:I,toggleFeature:Q,addCustomMarker:V,removeCustomMarker:k,applyTheme:y,resetToDefaults:G}}const $={class:"toggle-wrapper"},ee=["checked"],te={__name:"BaseToggle",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(h){return(A,l)=>(B(),_("label",$,[t("input",Z({type:"checkbox",class:"toggle-input",checked:h.modelValue,onChange:l[0]||(l[0]=i=>A.$emit("update:modelValue",i.target.checked))},A.$attrs),null,16,ee),l[1]||(l[1]=t("span",{class:"toggle-track"},[t("span",{class:"toggle-thumb"})],-1))]))}},ae=Y(te,[["__scopeId","data-v-0e10df3e"]]),se={class:"popup-container"},oe={class:"popup-header"},le={class:"popup-content"},ne={class:"quick-stats"},re={class:"stat-card"},ce={class:"stat-value"},ie={class:"stat-card"},ue={class:"stat-value"},Ae={class:"stat-card"},de={class:"stat-value"},ge={key:0,class:"current-manga"},pe={class:"manga-info card"},me=["src","alt"],ve={class:"manga-details"},fe={class:"manga-title"},Se={class:"manga-progress"},he={__name:"App",setup(h){const{stats:A,entriesArray:l}=J(),{features:i,updateSetting:g}=q(),c=R({get:()=>i.value.highlighting,set:u=>g("features.highlighting",u)}),n=d(null);function p(){chrome.runtime.openOptionsPage()}function v(){chrome.tabs.create({url:chrome.runtime.getURL("newtab/index.html")})}async function w(){var S,m;const[u]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!(u!=null&&u.url))return;const a=l.value.find(f=>f.sourceUrl&&u.url.includes(f.sourceUrl)||f.mangafireUrl&&u.url.includes(f.mangafireUrl)||f.mangadexId&&u.url.includes(f.mangadexId));a&&(n.value={title:a.title,cover:((m=(S=a.anilistData)==null?void 0:S.coverImage)==null?void 0:m.medium)||a.coverImage||"https://via.placeholder.com/48x72",chapter:a.lastReadChapter||"?",status:a.status})}return L(()=>{w()}),(u,a)=>(B(),_("div",se,[t("header",oe,[a[1]||(a[1]=t("div",{class:"popup-logo"},[t("img",{src:K,alt:"Logo",width:"24",height:"24"}),t("h1",{class:"popup-title"},"Manga Manager")],-1)),F(ae,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=S=>c.value=S),"aria-label":"Toggle extension"},null,8,["modelValue"])]),t("main",le,[t("section",ne,[t("div",re,[t("span",ce,E(T(A).reading),1),a[2]||(a[2]=t("span",{class:"stat-label"},"Reading",-1))]),t("div",ie,[t("span",ue,E(T(A).completed),1),a[3]||(a[3]=t("span",{class:"stat-label"},"Completed",-1))]),t("div",Ae,[t("span",de,E(T(A).total),1),a[4]||(a[4]=t("span",{class:"stat-label"},"Total",-1))])]),n.value?(B(),_("section",ge,[a[5]||(a[5]=t("h2",{class:"section-title"},"Currently Viewing",-1)),t("div",pe,[t("img",{src:n.value.cover,alt:n.value.title,class:"manga-cover"},null,8,me),t("div",ve,[t("h3",fe,E(n.value.title),1),t("p",Se,"Chapter "+E(n.value.chapter),1)])])])):j("",!0)]),t("footer",{class:"popup-footer"},[t("button",{class:"btn btn-ghost",onClick:p},[...a[6]||(a[6]=[t("span",null,"‚öôÔ∏è",-1),O(" Settings ",-1)])]),t("button",{class:"btn btn-primary",onClick:v},[...a[7]||(a[7]=[t("span",null,"üìö",-1),O(" Dashboard ",-1)])])])]))}},ye=Y(he,[["__scopeId","data-v-94da2921"]]),H=X(ye),Ee=W();H.use(Ee);H.mount("#app");
