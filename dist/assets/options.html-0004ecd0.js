import"./modulepreload-polyfill-3cfb730f.js";import{k as Et,i as Ie,o as C,c as x,a,b as te,t as M,g as Q,d as J,n as le,l as Ye,e as z,m as D,p as K,j as ge,f as V,q as ie,v as Gt,F as ae,r as oe,s as Wt,u as Kt,w as Re,x as we,y as De,z as Ve,A as Qt,B as Yt,h as Zt}from"./runtime-dom.esm-bundler-7bf71c36.js";import{b as Jt,f as Xt,a as ea,w as ta}from"./mangadex-api-9a5edea1.js";import{_ as me}from"./_plugin-vue_export-helper-c27b6911.js";function aa(){const e=document.querySelectorAll(".nav-item"),t=document.querySelectorAll(".tab-pane"),s=document.querySelector(".nav-indicator"),n=document.querySelector(".nav-item.active");n&&s&&ft(n,s,!1),e.forEach(r=>{r.addEventListener("click",l=>{l.preventDefault();const i=r.getAttribute("data-tab");if(!i)return;e.forEach(m=>m.classList.remove("active")),r.classList.add("active"),s&&ft(r,s);const g=document.querySelector(".tab-pane.active"),o=document.getElementById(`tab-${i}`);g!==o&&(typeof window.anime<"u"?g?window.anime({targets:g,opacity:0,translateY:-10,duration:200,easing:"easeInQuad",complete:()=>{g.style.display="none",g.classList.remove("active"),vt(o)}}):vt(o):t.forEach(m=>{m.id===`tab-${i}`?(m.style.display="block",setTimeout(()=>m.classList.add("active"),10)):(m.style.display="none",m.classList.remove("active"))}))})})}function ft(e,t,s=!0){const n=document.querySelector(".nav-menu");if(!n)return;const r=e.getBoundingClientRect(),l=n.getBoundingClientRect(),i=r.top-l.top,g=r.height;if(!s){t.style.top=`${i+g/2-15}px`;return}typeof window.anime<"u"?window.anime({targets:t,top:i+g/2-15,height:[30,45,30],duration:500,easing:"easeOutElastic(1, .5)"}):t.style.top=`${i+g/2-15}px`}function vt(e){if(e)if(e.style.display="block",e.style.opacity="0",e.style.transform="translateY(10px)",e.classList.add("active"),typeof window.anime<"u"){window.anime({targets:e,opacity:[0,1],translateY:[10,0],duration:400,easing:"easeOutQuad",delay:50});const t=e.querySelectorAll(".card");t.length>0&&window.anime({targets:t,opacity:[0,1],translateY:[20,0],delay:window.anime.stagger(100,{start:100}),duration:500,easing:"easeOutCubic"})}else e.style.opacity="1",e.style.transform="translateY(0)"}function sa(){document.querySelectorAll(".info-redirect-btn").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const s=e.getAttribute("data-target"),n=document.querySelector('.nav-item[data-tab="about"]');if(n&&(n.click(),s)){const r=document.getElementById(s);r&&setTimeout(()=>{r.scrollIntoView({behavior:"smooth",block:"center"}),r.classList.add("highlight-pulse"),setTimeout(()=>r.classList.remove("highlight-pulse"),2e3)},300)}})})}function na(){const e=document.getElementById("scrollToTopBtn"),t=document.querySelector(".main-content");!e||!t||(t.addEventListener("scroll",()=>{t.scrollTop>300?e.classList.add("visible"):e.classList.remove("visible")}),e.addEventListener("click",()=>{t.scrollTo({top:0,behavior:"smooth"})}))}function ra(){var t;const e=window.location.hash;if(e){if(e.includes("library")||e.includes("saved-entries")){const s=document.querySelector('.nav-item[data-tab="saved-entries"]');s&&s.click()}if(e.includes("showDetails="))try{const s=e.split("showDetails=");if(s.length>1){const n=decodeURIComponent(s[1].split("&")[0]);(t=chrome.runtime)!=null&&t.id&&chrome.storage.local.get(["savedEntriesMerged"],r=>{const l=r.savedEntriesMerged||[],i=n.toLowerCase().trim();let g=l.find(o=>o.title.toLowerCase().trim()===i);if(!g){const o=i.replace(/[^a-z0-9]/g,"");g=l.find(m=>{const f=m.title.toLowerCase().replace(/[^a-z0-9]/g,"");return f===o||f.includes(o)||o.includes(f)})}if(g){const o=(m=0)=>{window.showMangaDetails?window.showMangaDetails(g):m<20&&setTimeout(()=>o(m+1),200)};o()}else console.warn(`[UI] Could not find entry for details param: ${n}`)})}}catch(s){console.error("[UI] Error parsing URL params:",s)}}}function oa(){chrome.runtime.onMessage.addListener(e=>{var t;if(e.type==="showMangaDetails"){const s=document.querySelector('.nav-item[data-tab="saved-entries"]');s&&s.click(),(t=chrome.runtime)!=null&&t.id&&chrome.storage.local.get(["savedEntriesMerged"],n=>{const r=n.savedEntriesMerged||[],l=(e.title||"").toLowerCase().trim();let i=r.find(g=>g.title.toLowerCase().trim()===l);if(!i){const g=l.replace(/[^a-z0-9]/g,"");i=r.find(o=>{const m=o.title.toLowerCase().replace(/[^a-z0-9]/g,"");return m===g||m.includes(g)||g.includes(m)})}if(i){const g=(o=0)=>{window.showMangaDetails?window.showMangaDetails(i):o<10&&setTimeout(()=>g(o+1),200)};g()}else console.warn(`[UI] Could not find entry for details: ${e.title}`)})}})}function ia(){const e=[{id:"MarkHomePage",storageKey:"MangaFireHighlightEnabled"},{id:"MangaFireQuickActions",storageKey:"MangaFireQuickActionsEnabled",defaultValue:!0},{id:"MangaFireShowProgress",storageKey:"MangaFireShowProgress",defaultValue:!0},{id:"SyncandMarkRead",storageKey:"SyncandMarkReadfeatureEnabled"},{id:"CustomBookmarks",storageKey:"CustomBookmarksfeatureEnabled"},{id:"AutoSync",storageKey:"AutoSyncfeatureEnabled"},{id:"CustomBorderSize",storageKey:"CustomBorderSizefeatureEnabled"},{id:"FamilyFriendly",storageKey:"FamilyFriendlyfeatureEnabled"},{id:"NewTabDashboard",storageKey:"NewTabDashboardfeatureEnabled"},{id:"DashboardLayoutStyle",storageKey:"DashboardLayoutStylePacked"},{id:"SmartAutoComplete",storageKey:"SmartAutoCompletefeatureEnabled"},{id:"SmartInactivityFade",storageKey:"SmartInactivityFadefeatureEnabled"},{id:"SmartResumeLink",storageKey:"SmartResumeLinkfeatureEnabled"},{id:"MangaDexHighlightEnabled",storageKey:"MangaDexHighlightEnabled",defaultValue:!0},{id:"MangaDexShowProgress",storageKey:"MangaDexShowProgress",defaultValue:!0},{id:"WebtoonsHighlightEnabled",storageKey:"WebtoonsHighlightfeatureEnabled",defaultValue:!0},{id:"WebtoonsShowProgress",storageKey:"WebtoonsShowProgress",defaultValue:!0},{id:"WebtoonsBorderSizeEnabled",storageKey:"WebtoonsBorderSizefeatureEnabled",defaultValue:!1},{id:"NotificationsEnabled",storageKey:"NotificationsfeatureEnabled",defaultValue:!1},{id:"AutoScrollEnabled",storageKey:"autoScrollEnabled",defaultValue:!0},{id:"KeybindsEnabled",storageKey:"keybindsEnabled",defaultValue:!0},{id:"ProgressTrackingEnabled",storageKey:"progressTrackingEnabled",defaultValue:!0}];e.forEach(t=>{const s=document.getElementById(t.id);s&&(chrome.storage.local.get(t.storageKey,n=>{const r=t.defaultValue!==void 0?t.defaultValue:!1;s.checked=n[t.storageKey]!==void 0?n[t.storageKey]:r}),s.addEventListener("change",()=>{const n={};n[t.storageKey]=s.checked,chrome.storage.local.set(n)}))}),chrome.storage.onChanged.addListener((t,s)=>{s==="local"&&e.forEach(n=>{if(t[n.storageKey]){const r=document.getElementById(n.id);r&&(r.checked=t[n.storageKey].newValue)}})})}function la(){ca()}function ca(){const e=document.getElementById("AutoSyncSetDaysButton"),t=document.getElementById("AutoSyncSetDaysButtonReset"),s=document.getElementById("AutoSyncSetDays"),n=document.getElementById("logContainerSetDays");chrome.storage.local.get("SyncEverySetDate",r=>{s&&(s.value=r.SyncEverySetDate||30)}),e&&e.addEventListener("click",()=>{const r=s.value;chrome.storage.local.set({SyncEverySetDate:r},()=>{n&&(n.textContent=`Saved: Sync every ${r} days.`,setTimeout(()=>n.textContent="",3e3))})}),t&&t.addEventListener("click",()=>{chrome.storage.local.set({SyncEverySetDate:30},()=>{s&&(s.value=30),n&&(n.textContent="Reset to default (30 days).",setTimeout(()=>n.textContent="",3e3))})})}function ne(e){const t=document.getElementById("logContainer");if(!t)return;const s=document.createElement("div");s.textContent=`> ${e}`,t.appendChild(s),t.scrollTop=t.scrollHeight}function da(e){if(!e)return"";const t=document.createElement("textarea");return t.innerHTML=e,t.value}function ua(){const e=document.getElementById("addBookmarkButton"),t=document.getElementById("resetBookmarkButton");e&&e.addEventListener("click",()=>{const s=document.getElementById("bookmarkName").value,n=document.getElementById("colorBookmarks").value,r=document.getElementById("customBorderStyleSelect").value;s&&n?chrome.storage.local.get("customBookmarks",l=>{const i=Array.isArray(l.customBookmarks)?l.customBookmarks:[],g={name:s,color:n,style:r};chrome.storage.local.set({customBookmarks:[...i,g]},()=>{ne(`Added custom marker: ${s}`),document.getElementById("bookmarkName").value="",Pe()})}):alert("Please enter a name for the marker.")}),t&&t.addEventListener("click",()=>{confirm("Are you sure you want to remove all custom markers?")&&chrome.storage.local.remove("customBookmarks",()=>{ne("All custom markers removed."),Pe()})}),Pe()}function Pe(){chrome.storage.local.get("customBookmarks",e=>{const t=e.customBookmarks||[],s=document.getElementById("CustomBookmarksContainer");if(s){if(s.innerHTML="",t.length===0){const n=document.createElement("span");n.className="description",n.style.margin="0",n.textContent="No active markers.",s.appendChild(n);return}t.forEach((n,r)=>{const l=document.createElement("div");l.className="marker-pill",l.style.backgroundColor=`${n.color}33`,l.style.border=`2px ${n.style} ${n.color}CC`,l.textContent=n.name,l.title="Click to remove",l.addEventListener("click",()=>{confirm(`Remove marker "${n.name}"?`)&&ga(r)}),s.appendChild(l)})}})}function ga(e){chrome.storage.local.get("customBookmarks",t=>{const s=t.customBookmarks||[];if(e>=0&&e<s.length){const n=s.splice(e,1);chrome.storage.local.set({customBookmarks:s},()=>{ne(`Marker removed: ${n[0].name}`),Pe()})}})}const Ce={library:{keys:["savedEntriesMerged","userBookmarks"],label:"Library Entries"},history:{keys:["savedReadChapters"],label:"Reading History"},settings:{keys:["CustomBorderSize","MarkHomePagefeatureEnabled","SyncandMarkReadfeatureEnabled","CustomBookmarksfeatureEnabled","AutoSyncfeatureEnabled","CustomBorderSizefeatureEnabled","FamilyFriendlyfeatureEnabled","SmartAutoCompletefeatureEnabled","MangaDexHighlightEnabled","MangaDexShowProgress","WebtoonsHighlightfeatureEnabled","WebtoonsShowProgress","WebtoonsBorderSizefeatureEnabled","WebtoonsBorderSize","MangaFireHighlightEnabled","MangaFireShowProgress","MangaFireQuickActionsEnabled","autoScrollEnabled","keybindsEnabled","progressTrackingEnabled","cardViewSize","theme","LibraryCardBordersEnabled","LibraryCardBorderThickness","LibraryGlowEffect","LibraryAnimatedBorders","LibraryStatusIcons","LibraryProgressBars","SyncLastDate","SyncEverySetDate","customBookmarks"],label:"Settings"},personalData:{keys:["libraryPersonalData","libraryUserTags","libraryFilterPresets"],label:"Tags, Notes & Ratings"},cache:{keys:["anilistCache","mangadexCache"],label:"API Cache"}};function pa(){const e=document.getElementById("exportDataBtn"),t=document.getElementById("startImportBtn"),s=document.getElementById("importDataInput"),n=document.getElementById("dropZone"),r=document.getElementById("mergeImportToggle"),l=document.getElementById("lastBackupDisplay"),i=document.getElementById("exportLibrary"),g=document.getElementById("exportHistory"),o=document.getElementById("exportSettings"),m=document.getElementById("exportPersonalData"),f=document.getElementById("exportCache"),u=document.getElementById("exportLibraryCount"),b=document.getElementById("exportHistoryCount"),P=document.getElementById("exportPersonalCount"),S=document.getElementById("exportCacheCount"),y=()=>{chrome.storage.local.get(null,d=>{const _=Array.isArray(d.savedEntriesMerged)?d.savedEntriesMerged.length:Array.isArray(d.userBookmarks)?d.userBookmarks.length:0;u&&(u.textContent=`(${_})`);const R=d.savedReadChapters?Object.keys(d.savedReadChapters).length:0;b&&(b.textContent=`(${R} titles)`);const I=d.libraryPersonalData?Object.keys(d.libraryPersonalData).length:0;P&&(P.textContent=`(${I})`);const $=h(d);S&&(S.textContent=`(${p($)})`)})},h=d=>{let _=0;return d.anilistCache&&(_+=JSON.stringify(d.anilistCache).length),d.mangadexCache&&(_+=JSON.stringify(d.mangadexCache).length),_},p=d=>d<1024?`${d} B`:d<1024*1024?`${(d/1024).toFixed(1)} KB`:`${(d/(1024*1024)).toFixed(1)} MB`,v=()=>{chrome.storage.local.get("LastBackupDate",d=>{if(l)if(d.LastBackupDate){const _=new Date(d.LastBackupDate);l.textContent=_.toLocaleString()}else l.textContent="Never"})};v(),y();const w=()=>{const d=["LastBackupDate"];if(i!=null&&i.checked&&d.push(...Ce.library.keys),g!=null&&g.checked&&d.push(...Ce.history.keys),o!=null&&o.checked&&d.push(...Ce.settings.keys),m!=null&&m.checked&&d.push(...Ce.personalData.keys),f!=null&&f.checked&&d.push(...Ce.cache.keys),d.length===1){alert("Please select at least one data category to export.");return}chrome.storage.local.get(d,_=>{_._exportMeta={version:"3.9.0",exportDate:new Date().toISOString(),categories:{library:(i==null?void 0:i.checked)||!1,history:(g==null?void 0:g.checked)||!1,settings:(o==null?void 0:o.checked)||!1,personalData:(m==null?void 0:m.checked)||!1,cache:(f==null?void 0:f.checked)||!1}};const R=new Blob([JSON.stringify(_,null,2)],{type:"application/json"}),I=URL.createObjectURL(R),$=document.createElement("a");$.href=I,$.download=`mangafire_backup_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(I);const G=Date.now();chrome.storage.local.set({LastBackupDate:G},()=>{v(),ne("Data exported successfully.")})})};e&&e.addEventListener("click",w);const T=d=>{if(!d)return;const _=d.type==="application/json"||d.name.endsWith(".json"),R=d.type==="text/xml"||d.type==="application/xml"||d.name.endsWith(".xml");if(!_&&!R){alert("Please select a valid JSON or XML file.");return}const I=new FileReader;I.onload=$=>{try{let G;if(_?G=JSON.parse($.target.result):R&&(G=O($.target.result)),!G)throw new Error("Failed to parse data");j(G,r==null?void 0:r.checked)}catch(G){console.error("Import error:",G),alert("Failed to parse file. Please ensure it is a valid backup or MyAnimeList XML export.")}},I.readAsText(d)},j=(d,_)=>{const R={libraryEntries:Array.isArray(d.savedEntriesMerged)?d.savedEntriesMerged.length:Array.isArray(d.userBookmarks)?d.userBookmarks.length:0,historyTitles:d.savedReadChapters?Object.keys(d.savedReadChapters).length:0,personalData:d.libraryPersonalData?Object.keys(d.libraryPersonalData).length:0,hasSettings:Object.keys(d).some($=>Ce.settings.keys.includes($)),hasCache:!!d.anilistCache||!!d.mangadexCache};let I=`ðŸ“ Import Preview

`;I+=`ðŸ“š Library: ${R.libraryEntries} entries
`,I+=`ðŸ“– History: ${R.historyTitles} titles
`,I+=`ðŸ·ï¸ Personal Data: ${R.personalData} entries
`,I+=`âš™ï¸ Settings: ${R.hasSettings?"Included":"Not included"}
`,I+=`ðŸ’¾ Cache: ${R.hasCache?"Included":"Not included"}

`,I+=`Mode: ${_?"MERGE (keeps existing data)":"OVERWRITE (replaces all data)"}`,_||(I+=`

âš ï¸ WARNING: This will delete all your current data!`),confirm(I+`

Proceed with import?`)&&(_?se(d):Z(d))},O=d=>{const I=new DOMParser().parseFromString(d,"text/xml").querySelectorAll("manga");if(I.length===0)throw new Error("No manga entries found in XML.");return{userBookmarks:Array.from(I).map(G=>{const E=G.querySelector("manga_title"),k=G.querySelector("my_status"),L=G.querySelector("my_read_chapters");let N=E?da(E.textContent.trim()):"Unknown Title",F=k?k.textContent.trim():"Reading",W=L&&parseInt(L.textContent.trim())||0;return F==="On-Hold"&&(F="On Hold"),{title:N,status:F,readChapters:W}})}},Z=d=>{delete d._exportMeta,chrome.storage.local.clear(()=>{chrome.storage.local.set(d,()=>{ne("Data imported (Overwrite) successfully."),alert("âœ… Import successful! The page will now reload."),location.reload()})})},se=d=>{delete d._exportMeta,chrome.storage.local.get(null,_=>{const R={..._,...d};if(d.userBookmarks&&_.userBookmarks){const I=new Map;_.userBookmarks.forEach($=>I.set($.title.toLowerCase(),$)),d.userBookmarks.forEach($=>I.set($.title.toLowerCase(),$)),R.userBookmarks=Array.from(I.values())}if(d.savedEntriesMerged&&_.savedEntriesMerged){const I=new Map;_.savedEntriesMerged.forEach($=>I.set($.title.toLowerCase(),$)),d.savedEntriesMerged.forEach($=>I.set($.title.toLowerCase(),$)),R.savedEntriesMerged=Array.from(I.values())}if(d.customBookmarks&&_.customBookmarks){const I=new Map;_.customBookmarks.forEach($=>I.set($.name.toLowerCase(),$)),d.customBookmarks.forEach($=>I.set($.name.toLowerCase(),$)),R.customBookmarks=Array.from(I.values())}if(d.savedReadChapters&&_.savedReadChapters){const I={..._.savedReadChapters};Object.entries(d.savedReadChapters).forEach(([$,G])=>{I[$]?I[$]=[...new Set([...I[$],...G])]:I[$]=G}),R.savedReadChapters=I}d.anilistCache&&_.anilistCache&&(R.anilistCache={..._.anilistCache,...d.anilistCache}),d.libraryPersonalData&&_.libraryPersonalData&&(R.libraryPersonalData={..._.libraryPersonalData,...d.libraryPersonalData}),chrome.storage.local.set(R,()=>{ne("Data imported (Merge) successfully."),alert("âœ… Import successful! New data has been merged."),location.reload()})})};n&&(n.addEventListener("click",()=>s==null?void 0:s.click()),n.addEventListener("dragover",d=>{d.preventDefault(),n.classList.add("drag-over")}),n.addEventListener("dragleave",()=>{n.classList.remove("drag-over")}),n.addEventListener("drop",d=>{d.preventDefault(),n.classList.remove("drag-over"),d.dataTransfer.files.length>0&&T(d.dataTransfer.files[0])})),t&&t.addEventListener("click",()=>s==null?void 0:s.click()),s&&s.addEventListener("change",d=>{d.target.files.length>0&&T(d.target.files[0])});const B=document.getElementById("mdlistImportBtn"),c=document.getElementById("mdlistInput");B&&c&&B.addEventListener("click",async()=>{const d=c.value.trim();if(!d){alert("Please enter a MangaDex list URL or ID.");return}B.disabled=!0,B.textContent="Importing...";try{const _=await Jt(d);if(!_.success){alert(`Import failed: ${_.error}`);return}if(_.manga.length===0){alert("No manga found in this list.");return}chrome.storage.local.get(["savedEntriesMerged"],R=>{let I=Array.isArray(R.savedEntriesMerged)?R.savedEntriesMerged:[];const $=new Set(I.map(L=>L.title.toLowerCase())),G=new Set(I.filter(L=>{var N;return(N=L.anilistData)==null?void 0:N.mangadexId}).map(L=>L.anilistData.mangadexId));let E=0,k=0;_.manga.forEach(L=>{var W,q;const N=((W=L.title)==null?void 0:W.english)||((q=L.title)==null?void 0:q.romaji)||"Unknown",F=L.mangadexId;if($.has(N.toLowerCase())||G.has(F)){k++;return}I.push({title:N,status:"Plan to Read",readChapters:0,anilistData:L,customMarker:null,lastUpdated:Date.now(),importedFrom:"MDList"}),E++}),chrome.storage.local.set({savedEntriesMerged:I},()=>{alert(`âœ… Imported ${E} manga from "${_.listName}". ${k} duplicates skipped.`),c.value="",location.reload()})})}catch(_){console.error("MDList import error:",_),alert(`Import error: ${_.message}`)}finally{B.disabled=!1,B.textContent="Import"}})}let Se=[],ke=!1;function ht(e){return{title:e.title||"Unknown",readChapters:e.readChapters||0,anilistData:e.anilistData,...e}}function ma(){chrome.storage.local.get(["savedEntriesMerged"],e=>{Se=(Array.isArray(e.savedEntriesMerged)?e.savedEntriesMerged:[]).map(ht),ke||Mt()}),chrome.storage.onChanged.addListener((e,t)=>{t==="local"&&e.savedEntriesMerged&&(Se=(e.savedEntriesMerged.newValue||[]).map(ht))}),window.cleanLibraryDuplicates=fa,window.forceSyncLibrary=ha}function fa(){const e=new Map;let t=0;if(Se.forEach(s=>{const n=s.title.toLowerCase().trim(),r=e.get(n);if(!r)e.set(n,s);else{const l=parseInt(String(r.readChapters||0));(parseInt(String(s.readChapters||0))>l||!r.anilistData&&s.anilistData)&&e.set(n,s),t++}}),t>0){const s=Array.from(e.values());chrome.storage.local.set({savedEntriesMerged:s},()=>{console.log(`Library cleaned: removed ${t} duplicates.`),window.refreshLibraryData&&window.refreshLibraryData()})}}async function Mt(){var t,s,n,r,l;const e=Se.filter(i=>(!i.anilistData||i.anilistData.id&&!i.anilistData.chapters)&&(!i.lastChecked||Date.now()-i.lastChecked>36e5));if(e.length!==0){ke=!0,console.log(`Starting background fetch for ${e.length} entries...`),window.dispatchEvent(new CustomEvent("library-sync-start",{detail:{total:e.length}}));try{for(let i=0;i<e.length;i++){const g=e[i],o=Se.find(u=>u.title===g.title);if(!o)continue;va(i+1,e.length,o.title);let m=await Xt(o.title);const f=m&&(!m.bannerImage||!m.description||!((t=m.coverImage)!=null&&t.large)||((s=m.genres)==null?void 0:s.length)===0);if(!m||f){const u=await ea(o.title);u&&(m?(!m.bannerImage&&u.bannerImage&&(m.bannerImage=u.bannerImage),!m.description&&u.description&&(m.description=u.description),(!((n=m.coverImage)!=null&&n.large)||m.coverImage.large.includes("default"))&&((r=u.coverImage)!=null&&r.large)&&(m.coverImage=u.coverImage),(!m.genres||m.genres.length===0)&&((l=u.genres)==null?void 0:l.length)>0&&(m.genres=u.genres)):m=u)}m&&(o.anilistData=m),o.lastChecked=Date.now(),await chrome.storage.local.set({savedEntriesMerged:Se}),await new Promise(u=>setTimeout(u,500))}}catch(i){console.error("Error in background metadata fetch:",i)}finally{ke=!1,console.log("Background fetch completed."),window.dispatchEvent(new CustomEvent("library-sync-complete"))}}}function va(e,t,s){window.dispatchEvent(new CustomEvent("library-sync-progress",{detail:{current:e,total:t,title:s}}))}async function ha(){if(ke){if(!confirm("A sync is already in progress. Do you want to restart it? This will effectively stop the current one and start over."))return;ke=!1}ke=!0,console.log("Starting forced library sync..."),Se.forEach(e=>{e.anilistData=void 0,e.lastChecked=void 0}),await ta(),console.log("Cleared MangaDex cache.");try{await Mt(),alert("Library sync completed!")}catch(e){console.error("Force sync failed:",e),alert("Sync failed. Check console constraints.")}finally{ke=!1}}const Ue=[{name:"YouTube",url:"https://www.youtube.com"},{name:"ChatGPT",url:"https://chat.openai.com"},{name:"Spotify",url:"https://open.spotify.com"},{name:"Gmail",url:"https://mail.google.com"},{name:"Discord",url:"https://discord.com"}];function ya(){const e=document.getElementById("QuickAccessContainer"),t=document.getElementById("SaveQuickAccessButton"),s=document.getElementById("ResetQuickAccessButton"),n=document.getElementById("logContainerQuickAccess");e&&(chrome.storage.local.get("QuickAccessShortcuts",r=>{const l=r.QuickAccessShortcuts||Ue;yt(e,l)}),t&&t.addEventListener("click",()=>{const r=[];e.querySelectorAll(".shortcut-input-row").forEach(i=>{const g=i.querySelector(".shortcut-name-input"),o=i.querySelector(".shortcut-url-input");g&&o&&o.value.trim()&&r.push({name:g.value.trim()||"Link",url:o.value.trim()})}),chrome.storage.local.set({QuickAccessShortcuts:r},()=>{n&&(n.textContent="Saved: Quick Access shortcuts updated.",setTimeout(()=>n.textContent="",3e3))})}),s&&s.addEventListener("click",()=>{chrome.storage.local.set({QuickAccessShortcuts:Ue},()=>{yt(e,Ue),n&&(n.textContent="Reset to default shortcuts.",setTimeout(()=>n.textContent="",3e3))})}))}function yt(e,t){e.innerHTML="";for(let s=0;s<5;s++){const n=t[s]||{name:"",url:""},r=document.createElement("div");r.className="input-group-row shortcut-input-row",r.style.marginBottom="10px",r.innerHTML=`
            <div class="input-wrapper flex-grow">
                <input type="text" placeholder="Name (e.g. YouTube)" class="input-field shortcut-name-input" value="${n.name}">
            </div>
            <div class="input-wrapper flex-grow-large">
                <input type="text" placeholder="URL (https://...)" class="input-field shortcut-url-input" value="${n.url}">
            </div>
        `,e.appendChild(r)}}let je={bg:"#0b1437",sidebar:"#111c44",accent:"#7551FF",text:"#ffffff"};function ba(){wa(),ka(),Ca(),xa()}function wa(){const e=document.querySelectorAll(".theme-preview-card");e.forEach(t=>{t.addEventListener("click",()=>{console.log("button clicked");const s=t.getAttribute("data-tab")||t.getAttribute("data-theme");Ze(s),e.forEach(n=>n.classList.remove("active")),t.classList.add("active")})})}function Ze(e){const t=document.documentElement;t.classList.remove("dark-mode","black-mode","neon-mode","light-mode","glassy-mode"),e==="light"?t.classList.add("light-mode"):e==="glassy"?t.classList.add("glassy-mode"):t.classList.add(`${e}-mode`),Sa(),localStorage.setItem("theme",e),chrome.storage.local.set({theme:e,isCustomTheme:!1}),ne(`Theme switched to ${e}`)}function ka(){const e=document.getElementById("ApplyCustomThemeBtn"),t=document.getElementById("ResetThemeBtn"),s=document.getElementById("themeColorBg"),n=document.getElementById("themeColorSidebar"),r=document.getElementById("themeColorAccent"),l=document.getElementById("themeColorText");e==null||e.addEventListener("click",()=>{je={bg:s.value,sidebar:n.value,accent:r.value,text:l.value},Bt(je),document.querySelectorAll(".theme-preview-card").forEach(i=>i.classList.remove("active")),localStorage.setItem("theme","custom"),chrome.storage.local.set({isCustomTheme:!0,customThemeData:je}),ne("Custom theme applied and saved.")}),t==null||t.addEventListener("click",()=>{confirm("Reset to default Cloudy Dark theme?")&&(Ze("dark"),s.value="#0b1437",n.value="#111c44",r.value="#7551FF",l.value="#ffffff",document.querySelectorAll(".theme-preview-card").forEach(i=>{i.getAttribute("data-theme")==="dark"&&i.classList.add("active")}))})}function Bt(e){if(!e)return;const t=document.documentElement;t.style.setProperty("--bg-body",e.bg),t.style.setProperty("--bg-card",e.bg),t.style.setProperty("--bg-sidebar",e.sidebar),t.style.setProperty("--accent-primary",e.accent),t.style.setProperty("--primary",e.accent),t.style.setProperty("--text-primary",e.text),t.style.setProperty("--text-white",e.text);const s=bt(e.bg),n=bt(e.text);t.style.setProperty("--glass-bg",`rgba(${s}, 0.4)`),t.style.setProperty("--glass-border",`rgba(${n}, 0.1)`),t.style.setProperty("--border-color",`rgba(${n}, 0.1)`),t.style.setProperty("--input-bg",`rgba(${s}, 0.2)`),t.style.setProperty("--input-border",`rgba(${n}, 0.1)`),document.body.style.backgroundColor=e.bg,ne(`Custom theme applied: BG=${e.bg}, Sidebar=${e.sidebar}`)}function Sa(){const e=document.documentElement;["--bg-body","--bg-card","--bg-sidebar","--accent-primary","--primary","--text-primary","--text-white","--glass-bg","--glass-border","--border-color","--input-bg","--input-border"].forEach(s=>e.style.removeProperty(s)),document.body.style.backgroundColor=""}function Ca(){const e=document.getElementById("GlobalBorderSize"),t=document.getElementById("globalRangeValue"),s=document.getElementById("GlobalBorderStyle");e==null||e.addEventListener("input",l=>{const i=l.target.value;t&&(t.textContent=`${i}px`),chrome.storage.local.set({CustomBorderSize:i})}),s==null||s.addEventListener("change",l=>{chrome.storage.local.set({GlobalBorderStyle:l.target.value})});const n=document.getElementById("WebtoonsBorderSizeSlider"),r=document.getElementById("WebtoonsBorderSizeValue");n==null||n.addEventListener("input",l=>{const i=l.target.value;r&&(r.textContent=`${i}px`),chrome.storage.local.set({WebtoonsBorderSize:parseInt(i,10)})})}function xa(){chrome.storage.local.get(["theme","isCustomTheme","customThemeData","CustomBorderSize","GlobalBorderStyle","WebtoonsBorderSize"],e=>{if(e.isCustomTheme&&e.customThemeData)Bt(e.customThemeData),document.getElementById("themeColorBg")&&(document.getElementById("themeColorBg").value=e.customThemeData.bg,document.getElementById("themeColorSidebar").value=e.customThemeData.sidebar,document.getElementById("themeColorAccent").value=e.customThemeData.accent,document.getElementById("themeColorText").value=e.customThemeData.text),document.querySelectorAll(".theme-preview-card").forEach(m=>m.classList.remove("active"));else{const m=e.theme||"dark";Ze(m),document.querySelectorAll(".theme-preview-card").forEach(f=>{f.getAttribute("data-theme")===m?f.classList.add("active"):f.classList.remove("active")})}const t=e.CustomBorderSize||4,s=e.GlobalBorderStyle||"solid",n=document.getElementById("GlobalBorderSize"),r=document.getElementById("globalRangeValue"),l=document.getElementById("GlobalBorderStyle");n&&(n.value=t),r&&(r.textContent=`${t}px`),l&&(l.value=s);const i=e.WebtoonsBorderSize||4,g=document.getElementById("WebtoonsBorderSizeSlider"),o=document.getElementById("WebtoonsBorderSizeValue");g&&(g.value=i),o&&(o.textContent=`${i}px`)})}function bt(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?`${parseInt(t[1],16)}, ${parseInt(t[2],16)}, ${parseInt(t[3],16)}`:"11, 20, 55"}class Je{constructor(t){!t||t.tagName!=="SELECT"||(this.select=t,this.container=null,this.trigger=null,this.dropdown=null,this.isOpen=!1,this.init())}init(){this.buildUI(),this.addEventListeners(),this.observeChanges()}buildUI(){this.container=document.createElement("div"),this.container.className="custom-select-container",this.select.id&&(this.container.id=`${this.select.id}-crystal`);const t=this.select.parentNode,s=this.select.nextSibling;this.select.style.position="absolute",this.select.style.opacity="0",this.select.style.pointerEvents="none",this.select.style.width="1px",this.select.style.height="1px",t.insertBefore(this.container,s),this.container.appendChild(this.select),this.trigger=document.createElement("div"),this.trigger.className="crystal-select-trigger";const n=document.createElement("span");n.className="trigger-text",this.trigger.appendChild(n);const r=document.createElement("div");r.className="select-arrow",r.innerHTML='<svg viewBox="0 0 10 6"><path d="M1 1L5 5L9 1" fill="none" stroke="currentColor"/></svg>',this.trigger.appendChild(r),this.container.appendChild(this.trigger),this.dropdown=document.createElement("div"),this.dropdown.className="crystal-dropdown";const l=document.createElement("div");l.className="crystal-options-list",this.dropdown.appendChild(l),this.container.appendChild(this.dropdown),this.syncOptions()}syncOptions(){const t=this.dropdown.querySelector(".crystal-options-list"),s=this.trigger.querySelector(".trigger-text");t.innerHTML="";const n=this.select.options[this.select.selectedIndex];s.textContent=n?n.textContent:"Select...",Array.from(this.select.options).forEach((r,l)=>{const i=document.createElement("div");if(i.className="crystal-option",r.selected&&i.classList.add("is-selected"),r.disabled&&i.classList.add("is-disabled"),r.style.color){const o=document.createElement("span");o.className="marker-indicator",o.style.backgroundColor=r.style.color,i.appendChild(o)}const g=document.createElement("span");g.textContent=r.textContent,i.appendChild(g),r.disabled||(i.onclick=o=>{o.stopPropagation(),this.setValue(r.value)}),t.appendChild(i)})}setValue(t){this.select.value=t,this.select.dispatchEvent(new Event("change",{bubbles:!0})),this.syncOptions(),this.close()}addEventListeners(){this.trigger.addEventListener("click",t=>{t.stopPropagation(),this.toggle()}),document.addEventListener("click",t=>{this.isOpen&&!this.container.contains(t.target)&&this.close()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.isOpen&&this.close()})}toggle(){this.isOpen?this.close():this.open()}open(){document.querySelectorAll(".custom-select-container.is-open").forEach(t=>{t!==this.container&&t.classList.remove("is-open")}),this.isOpen=!0,this.container.classList.add("is-open"),window.anime&&window.anime({targets:this.dropdown.querySelectorAll(".crystal-option"),opacity:[0,1],translateX:[-10,0],delay:window.anime.stagger(20),duration:400,easing:"easeOutQuart"})}close(){this.isOpen=!1,this.container.classList.remove("is-open")}observeChanges(){new MutationObserver(()=>this.syncOptions()).observe(this.select,{childList:!0,subtree:!0,attributes:!0})}static autoInit(){const t=n=>{n.querySelectorAll("select").forEach(r=>{!r.closest(".custom-select-container")&&!r.classList.contains("no-crystal")&&new Je(r)})};t(document),new MutationObserver(n=>{n.forEach(r=>{r.addedNodes.forEach(l=>{l.nodeType===1&&(l.tagName==="SELECT"?t(l.parentNode):t(l))})})}).observe(document.body,{childList:!0,subtree:!0})}}function Ea(){aa(),sa(),na(),ra(),oa(),ia(),la(),ua(),pa(),ma(),ya(),ba(),typeof anime<"u"&&anime({targets:".tab-pane.active .card",opacity:[0,1],translateY:[20,0],delay:anime.stagger(100),duration:800,easing:"easeOutExpo"});const e=document.getElementById("sendMessageBtnSyncBookmarks");e&&e.addEventListener("click",()=>{ne("Requesting bookmark sync..."),chrome.runtime.sendMessage({type:"scrapeBookmarks",value:1},s=>{chrome.runtime.lastError?ne("Error: "+chrome.runtime.lastError.message):ne("Sync process initiated...")})});const t=document.getElementById("ClearReadingHistoryBtn");t&&t.addEventListener("click",()=>{chrome.storage.local.remove("userbookmarkshistory",()=>{ne("Reading history cleared."),alert("Reading history cleared!")})});try{Je.autoInit(),ne("CrystalSelect auto-initialization enabled.")}catch(s){console.error("CrystalSelect Error:",s)}}chrome.runtime.onMessage.addListener(e=>{e.type==="log"&&ne(e.text)});var _t={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Xe={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Ma=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Fe={CSS:{},springs:{}};function fe(e,t,s){return Math.min(Math.max(e,t),s)}function Ae(e,t){return e.indexOf(t)>-1}function qe(e,t){return e.apply(null,t)}var A={arr:function(e){return Array.isArray(e)},obj:function(e){return Ae(Object.prototype.toString.call(e),"Object")},pth:function(e){return A.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||A.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return A.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return A.hex(e)||A.rgb(e)||A.hsl(e)},key:function(e){return!_t.hasOwnProperty(e)&&!Xe.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function Lt(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(s){return parseFloat(s)}):[]}function Dt(e,t){var s=Lt(e),n=fe(A.und(s[0])?1:s[0],.1,100),r=fe(A.und(s[1])?100:s[1],.1,100),l=fe(A.und(s[2])?10:s[2],.1,100),i=fe(A.und(s[3])?0:s[3],.1,100),g=Math.sqrt(r/n),o=l/(2*Math.sqrt(r*n)),m=o<1?g*Math.sqrt(1-o*o):0,f=1,u=o<1?(o*g+-i)/m:-i+g;function b(S){var y=t?t*S/1e3:S;return o<1?y=Math.exp(-y*o*g)*(f*Math.cos(m*y)+u*Math.sin(m*y)):y=(f+u*y)*Math.exp(-y*g),S===0||S===1?S:1-y}function P(){var S=Fe.springs[e];if(S)return S;for(var y=1/6,h=0,p=0;;)if(h+=y,b(h)===1){if(p++,p>=16)break}else p=0;var v=h*y*1e3;return Fe.springs[e]=v,v}return t?b:P}function Ba(e){return e===void 0&&(e=10),function(t){return Math.ceil(fe(t,1e-6,1)*e)*(1/e)}}var _a=function(){var e=11,t=1/(e-1);function s(f,u){return 1-3*u+3*f}function n(f,u){return 3*u-6*f}function r(f){return 3*f}function l(f,u,b){return((s(u,b)*f+n(u,b))*f+r(u))*f}function i(f,u,b){return 3*s(u,b)*f*f+2*n(u,b)*f+r(u)}function g(f,u,b,P,S){var y,h,p=0;do h=u+(b-u)/2,y=l(h,P,S)-f,y>0?b=h:u=h;while(Math.abs(y)>1e-7&&++p<10);return h}function o(f,u,b,P){for(var S=0;S<4;++S){var y=i(u,b,P);if(y===0)return u;var h=l(u,b,P)-f;u-=h/y}return u}function m(f,u,b,P){if(!(0<=f&&f<=1&&0<=b&&b<=1))return;var S=new Float32Array(e);if(f!==u||b!==P)for(var y=0;y<e;++y)S[y]=l(y*t,f,b);function h(p){for(var v=0,w=1,T=e-1;w!==T&&S[w]<=p;++w)v+=t;--w;var j=(p-S[w])/(S[w+1]-S[w]),O=v+j*t,Z=i(O,f,b);return Z>=.001?o(p,O,f,b):Z===0?O:g(p,v,v+t,f,b)}return function(p){return f===u&&b===P||p===0||p===1?p:l(h(p),u,P)}}return m}(),At=function(){var e={linear:function(){return function(n){return n}}},t={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var r,l=4;n<((r=Math.pow(2,--l))-1)/11;);return 1/Math.pow(4,3-l)-7.5625*Math.pow((r*3-2)/22-n,2)}},Elastic:function(n,r){n===void 0&&(n=1),r===void 0&&(r=.5);var l=fe(n,1,10),i=fe(r,.1,2);return function(g){return g===0||g===1?g:-l*Math.pow(2,10*(g-1))*Math.sin((g-1-i/(Math.PI*2)*Math.asin(1/l))*(Math.PI*2)/i)}}},s=["Quad","Cubic","Quart","Quint","Expo"];return s.forEach(function(n,r){t[n]=function(){return function(l){return Math.pow(l,r+2)}}}),Object.keys(t).forEach(function(n){var r=t[n];e["easeIn"+n]=r,e["easeOut"+n]=function(l,i){return function(g){return 1-r(l,i)(1-g)}},e["easeInOut"+n]=function(l,i){return function(g){return g<.5?r(l,i)(g*2)/2:1-r(l,i)(g*-2+2)/2}},e["easeOutIn"+n]=function(l,i){return function(g){return g<.5?(1-r(l,i)(1-g*2))/2:(r(l,i)(g*2-1)+1)/2}}}),e}();function et(e,t){if(A.fnc(e))return e;var s=e.split("(")[0],n=At[s],r=Lt(e);switch(s){case"spring":return Dt(e,t);case"cubicBezier":return qe(_a,r);case"steps":return qe(Ba,r);default:return qe(n,r)}}function It(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function Oe(e,t){for(var s=e.length,n=arguments.length>=2?arguments[1]:void 0,r=[],l=0;l<s;l++)if(l in e){var i=e[l];t.call(n,i,l,e)&&r.push(i)}return r}function Ne(e){return e.reduce(function(t,s){return t.concat(A.arr(s)?Ne(s):s)},[])}function wt(e){return A.arr(e)?e:(A.str(e)&&(e=It(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function tt(e,t){return e.some(function(s){return s===t})}function at(e){var t={};for(var s in e)t[s]=e[s];return t}function We(e,t){var s=at(e);for(var n in e)s[n]=t.hasOwnProperty(n)?t[n]:e[n];return s}function He(e,t){var s=at(e);for(var n in t)s[n]=A.und(e[n])?t[n]:e[n];return s}function La(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function Da(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,s=e.replace(t,function(g,o,m,f){return o+o+m+m+f+f}),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s),r=parseInt(n[1],16),l=parseInt(n[2],16),i=parseInt(n[3],16);return"rgba("+r+","+l+","+i+",1)"}function Aa(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),s=parseInt(t[1],10)/360,n=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100,l=t[4]||1;function i(b,P,S){return S<0&&(S+=1),S>1&&(S-=1),S<1/6?b+(P-b)*6*S:S<1/2?P:S<2/3?b+(P-b)*(2/3-S)*6:b}var g,o,m;if(n==0)g=o=m=r;else{var f=r<.5?r*(1+n):r+n-r*n,u=2*r-f;g=i(u,f,s+1/3),o=i(u,f,s),m=i(u,f,s-1/3)}return"rgba("+g*255+","+o*255+","+m*255+","+l+")"}function Ia(e){if(A.rgb(e))return La(e);if(A.hex(e))return Da(e);if(A.hsl(e))return Aa(e)}function ye(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function Ta(e){if(Ae(e,"translate")||e==="perspective")return"px";if(Ae(e,"rotate")||Ae(e,"skew"))return"deg"}function Ke(e,t){return A.fnc(e)?e(t.target,t.id,t.total):e}function ve(e,t){return e.getAttribute(t)}function st(e,t,s){var n=ye(t);if(tt([s,"deg","rad","turn"],n))return t;var r=Fe.CSS[t+s];if(!A.und(r))return r;var l=100,i=document.createElement(e.tagName),g=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;g.appendChild(i),i.style.position="absolute",i.style.width=l+s;var o=l/i.offsetWidth;g.removeChild(i);var m=o*parseFloat(t);return Fe.CSS[t+s]=m,m}function Tt(e,t,s){if(t in e.style){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=e.style[t]||getComputedStyle(e).getPropertyValue(n)||"0";return s?st(e,r,s):r}}function nt(e,t){if(A.dom(e)&&!A.inp(e)&&(!A.nil(ve(e,t))||A.svg(e)&&e[t]))return"attribute";if(A.dom(e)&&tt(Ma,t))return"transform";if(A.dom(e)&&t!=="transform"&&Tt(e,t))return"css";if(e[t]!=null)return"object"}function $t(e){if(A.dom(e)){for(var t=e.style.transform||"",s=/(\w+)\(([^)]*)\)/g,n=new Map,r;r=s.exec(t);)n.set(r[1],r[2]);return n}}function $a(e,t,s,n){var r=Ae(t,"scale")?1:0+Ta(t),l=$t(e).get(t)||r;return s&&(s.transforms.list.set(t,l),s.transforms.last=t),n?st(e,l,n):l}function rt(e,t,s,n){switch(nt(e,t)){case"transform":return $a(e,t,n,s);case"css":return Tt(e,t,s);case"attribute":return ve(e,t);default:return e[t]||0}}function ot(e,t){var s=/^(\*=|\+=|-=)/.exec(e);if(!s)return e;var n=ye(e)||0,r=parseFloat(t),l=parseFloat(e.replace(s[0],""));switch(s[0][0]){case"+":return r+l+n;case"-":return r-l+n;case"*":return r*l+n}}function Rt(e,t){if(A.col(e))return Ia(e);if(/\s/g.test(e))return e;var s=ye(e),n=s?e.substr(0,e.length-s.length):e;return t?n+t:n}function it(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ra(e){return Math.PI*2*ve(e,"r")}function Pa(e){return ve(e,"width")*2+ve(e,"height")*2}function Fa(e){return it({x:ve(e,"x1"),y:ve(e,"y1")},{x:ve(e,"x2"),y:ve(e,"y2")})}function Pt(e){for(var t=e.points,s=0,n,r=0;r<t.numberOfItems;r++){var l=t.getItem(r);r>0&&(s+=it(n,l)),n=l}return s}function Oa(e){var t=e.points;return Pt(e)+it(t.getItem(t.numberOfItems-1),t.getItem(0))}function Ft(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return Ra(e);case"rect":return Pa(e);case"line":return Fa(e);case"polyline":return Pt(e);case"polygon":return Oa(e)}}function Na(e){var t=Ft(e);return e.setAttribute("stroke-dasharray",t),t}function Ha(e){for(var t=e.parentNode;A.svg(t)&&A.svg(t.parentNode);)t=t.parentNode;return t}function Ot(e,t){var s=t||{},n=s.el||Ha(e),r=n.getBoundingClientRect(),l=ve(n,"viewBox"),i=r.width,g=r.height,o=s.viewBox||(l?l.split(" "):[0,0,i,g]);return{el:n,viewBox:o,x:o[0]/1,y:o[1]/1,w:i,h:g,vW:o[2],vH:o[3]}}function za(e,t){var s=A.str(e)?It(e)[0]:e,n=t||100;return function(r){return{property:r,el:s,svg:Ot(s),totalLength:Ft(s)*(n/100)}}}function Va(e,t,s){function n(f){f===void 0&&(f=0);var u=t+f>=1?t+f:0;return e.el.getPointAtLength(u)}var r=Ot(e.el,e.svg),l=n(),i=n(-1),g=n(1),o=s?1:r.w/r.vW,m=s?1:r.h/r.vH;switch(e.property){case"x":return(l.x-r.x)*o;case"y":return(l.y-r.y)*m;case"angle":return Math.atan2(g.y-i.y,g.x-i.x)*180/Math.PI}}function kt(e,t){var s=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=Rt(A.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(s)?n.match(s).map(Number):[0],strings:A.str(e)||t?n.split(s):[]}}function lt(e){var t=e?Ne(A.arr(e)?e.map(wt):wt(e)):[];return Oe(t,function(s,n,r){return r.indexOf(s)===n})}function Nt(e){var t=lt(e);return t.map(function(s,n){return{target:s,id:n,total:t.length,transforms:{list:$t(s)}}})}function Ua(e,t){var s=at(t);if(/^spring/.test(s.easing)&&(s.duration=Dt(s.easing)),A.arr(e)){var n=e.length,r=n===2&&!A.obj(e[0]);r?e={value:e}:A.fnc(t.duration)||(s.duration=t.duration/n)}var l=A.arr(e)?e:[e];return l.map(function(i,g){var o=A.obj(i)&&!A.pth(i)?i:{value:i};return A.und(o.delay)&&(o.delay=g?0:t.delay),A.und(o.endDelay)&&(o.endDelay=g===l.length-1?t.endDelay:0),o}).map(function(i){return He(i,s)})}function ja(e){for(var t=Oe(Ne(e.map(function(l){return Object.keys(l)})),function(l){return A.key(l)}).reduce(function(l,i){return l.indexOf(i)<0&&l.push(i),l},[]),s={},n=function(l){var i=t[l];s[i]=e.map(function(g){var o={};for(var m in g)A.key(m)?m==i&&(o.value=g[m]):o[m]=g[m];return o})},r=0;r<t.length;r++)n(r);return s}function qa(e,t){var s=[],n=t.keyframes;n&&(t=He(ja(n),t));for(var r in t)A.key(r)&&s.push({name:r,tweens:Ua(t[r],e)});return s}function Ga(e,t){var s={};for(var n in e){var r=Ke(e[n],t);A.arr(r)&&(r=r.map(function(l){return Ke(l,t)}),r.length===1&&(r=r[0])),s[n]=r}return s.duration=parseFloat(s.duration),s.delay=parseFloat(s.delay),s}function Wa(e,t){var s;return e.tweens.map(function(n){var r=Ga(n,t),l=r.value,i=A.arr(l)?l[1]:l,g=ye(i),o=rt(t.target,e.name,g,t),m=s?s.to.original:o,f=A.arr(l)?l[0]:m,u=ye(f)||ye(o),b=g||u;return A.und(i)&&(i=m),r.from=kt(f,b),r.to=kt(ot(i,f),b),r.start=s?s.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=et(r.easing,r.duration),r.isPath=A.pth(l),r.isPathTargetInsideSVG=r.isPath&&A.svg(t.target),r.isColor=A.col(r.from.original),r.isColor&&(r.round=1),s=r,r})}var Ht={css:function(e,t,s){return e.style[t]=s},attribute:function(e,t,s){return e.setAttribute(t,s)},object:function(e,t,s){return e[t]=s},transform:function(e,t,s,n,r){if(n.list.set(t,s),t===n.last||r){var l="";n.list.forEach(function(i,g){l+=g+"("+i+") "}),e.style.transform=l}}};function zt(e,t){var s=Nt(e);s.forEach(function(n){for(var r in t){var l=Ke(t[r],n),i=n.target,g=ye(l),o=rt(i,r,g,n),m=g||ye(o),f=ot(Rt(l,m),o),u=nt(i,r);Ht[u](i,r,f,n.transforms,!0)}})}function Ka(e,t){var s=nt(e.target,t.name);if(s){var n=Wa(t,e),r=n[n.length-1];return{type:s,property:t.name,animatable:e,tweens:n,duration:r.end,delay:n[0].delay,endDelay:r.endDelay}}}function Qa(e,t){return Oe(Ne(e.map(function(s){return t.map(function(n){return Ka(s,n)})})),function(s){return!A.und(s)})}function Vt(e,t){var s=e.length,n=function(l){return l.timelineOffset?l.timelineOffset:0},r={};return r.duration=s?Math.max.apply(Math,e.map(function(l){return n(l)+l.duration})):t.duration,r.delay=s?Math.min.apply(Math,e.map(function(l){return n(l)+l.delay})):t.delay,r.endDelay=s?r.duration-Math.max.apply(Math,e.map(function(l){return n(l)+l.duration-l.endDelay})):t.endDelay,r}var St=0;function Ya(e){var t=We(_t,e),s=We(Xe,e),n=qa(s,e),r=Nt(e.targets),l=Qa(r,n),i=Vt(l,s),g=St;return St++,He(t,{id:g,children:[],animatables:r,animations:l,duration:i.duration,delay:i.delay,endDelay:i.endDelay})}var pe=[],Ut=function(){var e;function t(){!e&&(!Ct()||!U.suspendWhenDocumentHidden)&&pe.length>0&&(e=requestAnimationFrame(s))}function s(r){for(var l=pe.length,i=0;i<l;){var g=pe[i];g.paused?(pe.splice(i,1),l--):(g.tick(r),i++)}e=i>0?requestAnimationFrame(s):void 0}function n(){U.suspendWhenDocumentHidden&&(Ct()?e=cancelAnimationFrame(e):(pe.forEach(function(r){return r._onDocumentVisibility()}),Ut()))}return typeof document<"u"&&document.addEventListener("visibilitychange",n),t}();function Ct(){return!!document&&document.hidden}function U(e){e===void 0&&(e={});var t=0,s=0,n=0,r,l=0,i=null;function g(v){var w=window.Promise&&new Promise(function(T){return i=T});return v.finished=w,w}var o=Ya(e);g(o);function m(){var v=o.direction;v!=="alternate"&&(o.direction=v!=="normal"?"normal":"reverse"),o.reversed=!o.reversed,r.forEach(function(w){return w.reversed=o.reversed})}function f(v){return o.reversed?o.duration-v:v}function u(){t=0,s=f(o.currentTime)*(1/U.speed)}function b(v,w){w&&w.seek(v-w.timelineOffset)}function P(v){if(o.reversePlayback)for(var T=l;T--;)b(v,r[T]);else for(var w=0;w<l;w++)b(v,r[w])}function S(v){for(var w=0,T=o.animations,j=T.length;w<j;){var O=T[w],Z=O.animatable,se=O.tweens,B=se.length-1,c=se[B];B&&(c=Oe(se,function(ce){return v<ce.end})[0]||c);for(var d=fe(v-c.start-c.delay,0,c.duration)/c.duration,_=isNaN(d)?1:c.easing(d),R=c.to.strings,I=c.round,$=[],G=c.to.numbers.length,E=void 0,k=0;k<G;k++){var L=void 0,N=c.to.numbers[k],F=c.from.numbers[k]||0;c.isPath?L=Va(c.value,_*N,c.isPathTargetInsideSVG):L=F+_*(N-F),I&&(c.isColor&&k>2||(L=Math.round(L*I)/I)),$.push(L)}var W=R.length;if(!W)E=$[0];else{E=R[0];for(var q=0;q<W;q++){R[q];var X=R[q+1],ee=$[q];isNaN(ee)||(X?E+=ee+X:E+=ee+" ")}}Ht[O.type](Z.target,O.property,E,Z.transforms),O.currentValue=E,w++}}function y(v){o[v]&&!o.passThrough&&o[v](o)}function h(){o.remaining&&o.remaining!==!0&&o.remaining--}function p(v){var w=o.duration,T=o.delay,j=w-o.endDelay,O=f(v);o.progress=fe(O/w*100,0,100),o.reversePlayback=O<o.currentTime,r&&P(O),!o.began&&o.currentTime>0&&(o.began=!0,y("begin")),!o.loopBegan&&o.currentTime>0&&(o.loopBegan=!0,y("loopBegin")),O<=T&&o.currentTime!==0&&S(0),(O>=j&&o.currentTime!==w||!w)&&S(w),O>T&&O<j?(o.changeBegan||(o.changeBegan=!0,o.changeCompleted=!1,y("changeBegin")),y("change"),S(O)):o.changeBegan&&(o.changeCompleted=!0,o.changeBegan=!1,y("changeComplete")),o.currentTime=fe(O,0,w),o.began&&y("update"),v>=w&&(s=0,h(),o.remaining?(t=n,y("loopComplete"),o.loopBegan=!1,o.direction==="alternate"&&m()):(o.paused=!0,o.completed||(o.completed=!0,y("loopComplete"),y("complete"),!o.passThrough&&"Promise"in window&&(i(),g(o)))))}return o.reset=function(){var v=o.direction;o.passThrough=!1,o.currentTime=0,o.progress=0,o.paused=!0,o.began=!1,o.loopBegan=!1,o.changeBegan=!1,o.completed=!1,o.changeCompleted=!1,o.reversePlayback=!1,o.reversed=v==="reverse",o.remaining=o.loop,r=o.children,l=r.length;for(var w=l;w--;)o.children[w].reset();(o.reversed&&o.loop!==!0||v==="alternate"&&o.loop===1)&&o.remaining++,S(o.reversed?o.duration:0)},o._onDocumentVisibility=u,o.set=function(v,w){return zt(v,w),o},o.tick=function(v){n=v,t||(t=n),p((n+(s-t))*U.speed)},o.seek=function(v){p(f(v))},o.pause=function(){o.paused=!0,u()},o.play=function(){o.paused&&(o.completed&&o.reset(),o.paused=!1,pe.push(o),u(),Ut())},o.reverse=function(){m(),o.completed=!o.reversed,u()},o.restart=function(){o.reset(),o.play()},o.remove=function(v){var w=lt(v);jt(w,o)},o.reset(),o.autoplay&&o.play(),o}function xt(e,t){for(var s=t.length;s--;)tt(e,t[s].animatable.target)&&t.splice(s,1)}function jt(e,t){var s=t.animations,n=t.children;xt(e,s);for(var r=n.length;r--;){var l=n[r],i=l.animations;xt(e,i),!i.length&&!l.children.length&&n.splice(r,1)}!s.length&&!n.length&&t.pause()}function Za(e){for(var t=lt(e),s=pe.length;s--;){var n=pe[s];jt(t,n)}}function Ja(e,t){t===void 0&&(t={});var s=t.direction||"normal",n=t.easing?et(t.easing):null,r=t.grid,l=t.axis,i=t.from||0,g=i==="first",o=i==="center",m=i==="last",f=A.arr(e),u=parseFloat(f?e[0]:e),b=f?parseFloat(e[1]):0,P=ye(f?e[1]:e)||0,S=t.start||0+(f?u:0),y=[],h=0;return function(p,v,w){if(g&&(i=0),o&&(i=(w-1)/2),m&&(i=w-1),!y.length){for(var T=0;T<w;T++){if(!r)y.push(Math.abs(i-T));else{var j=o?(r[0]-1)/2:i%r[0],O=o?(r[1]-1)/2:Math.floor(i/r[0]),Z=T%r[0],se=Math.floor(T/r[0]),B=j-Z,c=O-se,d=Math.sqrt(B*B+c*c);l==="x"&&(d=-B),l==="y"&&(d=-c),y.push(d)}h=Math.max.apply(Math,y)}n&&(y=y.map(function(R){return n(R/h)*h})),s==="reverse"&&(y=y.map(function(R){return l?R<0?R*-1:-R:Math.abs(h-R)}))}var _=f?(b-u)/h:u;return S+_*(Math.round(y[v]*100)/100)+P}}function Xa(e){e===void 0&&(e={});var t=U(e);return t.duration=0,t.add=function(s,n){var r=pe.indexOf(t),l=t.children;r>-1&&pe.splice(r,1);function i(b){b.passThrough=!0}for(var g=0;g<l.length;g++)i(l[g]);var o=He(s,We(Xe,e));o.targets=o.targets||e.targets;var m=t.duration;o.autoplay=!1,o.direction=t.direction,o.timelineOffset=A.und(n)?m:ot(n,m),i(t),t.seek(o.timelineOffset);var f=U(o);i(f),l.push(f);var u=Vt(l,e);return t.delay=u.delay,t.endDelay=u.endDelay,t.duration=u.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}U.version="3.2.1";U.speed=1;U.suspendWhenDocumentHidden=!0;U.running=pe;U.remove=Za;U.get=rt;U.set=zt;U.convertPx=st;U.path=za;U.setDashoffset=Na;U.stagger=Ja;U.timeline=Xa;U.easing=et;U.penner=At;U.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};const es={class:"brand"},ts={class:"arrow-icon"},as={__name:"Sidebar",setup(e){const t=Q(!0),s=Q("settings"),n=Q(null),r=Q(null),l=Q(null),i=Q(null),g=Q(null),o=()=>{t.value=!t.value},m=u=>{s.value=u},f=u=>{const b=n.value.querySelectorAll(".nav-text, .brand-name, .version-info, .sidebar-footer .label");U(u?{targets:b,opacity:[0,1],translateX:[-10,0],duration:600,easing:"easeOutExpo",delay:U.stagger(50,{start:100})}:{targets:b,opacity:0,duration:200,easing:"easeOutQuad"})};return Et(t,u=>{f(u)}),Ie(()=>{const u=r.value.querySelectorAll(".nav-item");U.set(u,{opacity:0,translateY:20}),U.set([l.value,i.value],{opacity:0}),U.timeline({easing:"easeOutExpo"}).add({targets:n.value,translateX:[-50,0],opacity:[0,1],duration:800}).add({targets:l.value,opacity:[0,1],translateY:[-10,0],duration:800},"-=600").add({targets:u,opacity:[0,1],translateY:[20,0],delay:U.stagger(100),duration:1e3},"-=700").add({targets:i.value,opacity:[0,1],translateY:[10,0],duration:800},"-=800")}),(u,b)=>(C(),x("aside",{class:te(["sidebar",{collapsed:!t.value}]),ref_key:"sidebarRef",ref:n},[a("div",es,[a("div",{class:"brand-icon",onClick:o,title:"Toggle Sidebar"},[...b[5]||(b[5]=[a("span",{class:"icon-svg icon-brand"},null,-1)])]),a("span",{class:"brand-name header-text-gradient",ref_key:"brandNameRef",ref:l},"Color Marker",512)]),a("nav",{class:"nav-menu",ref_key:"navMenuRef",ref:r},[a("a",{href:"#",class:te(["nav-item",{active:s.value==="settings"}]),onClick:b[0]||(b[0]=P=>m("settings")),"data-tab":"settings"},[...b[6]||(b[6]=[a("span",{class:"nav-icon"},"âš™ï¸",-1),a("span",{class:"nav-text"},"General Settings",-1)])],2),a("a",{href:"#",class:te(["nav-item",{active:s.value==="saved-entries"}]),onClick:b[1]||(b[1]=P=>m("saved-entries")),"data-tab":"saved-entries"},[...b[7]||(b[7]=[a("span",{class:"nav-icon"},"ðŸ“š",-1),a("span",{class:"nav-text"},"Saved Entries",-1)])],2),a("a",{href:"#",class:te(["nav-item",{active:s.value==="import-export"}]),onClick:b[2]||(b[2]=P=>m("import-export")),"data-tab":"import-export"},[...b[8]||(b[8]=[a("span",{class:"nav-icon"},"ðŸ“‚",-1),a("span",{class:"nav-text"},"Import & Export",-1)])],2),a("a",{href:"#",class:te(["nav-item",{active:s.value==="appearance"}]),onClick:b[3]||(b[3]=P=>m("appearance")),"data-tab":"appearance"},[...b[9]||(b[9]=[a("span",{class:"nav-icon"},"ðŸŽ¨",-1),a("span",{class:"nav-text"},"Appearance",-1)])],2),a("a",{href:"#",class:te(["nav-item",{active:s.value==="about"}]),onClick:b[4]||(b[4]=P=>m("about")),"data-tab":"about"},[...b[10]||(b[10]=[a("span",{class:"nav-icon"},"â„¹ï¸",-1),a("span",{class:"nav-text"},"About",-1)])],2),a("div",{class:"nav-indicator",ref_key:"indicatorRef",ref:g},null,512)],512),a("div",{class:"sidebar-footer",ref_key:"footerRef",ref:i},[b[11]||(b[11]=a("a",{href:"https://www.buymeacoffee.com",target:"_blank",class:"sidebar-btn support-sidebar-btn",title:"Support Developer"},[a("span",{class:"icon"},"â˜•"),a("span",{class:"label nav-text"},"Support Dev")],-1)),b[12]||(b[12]=a("div",{class:"version-info nav-text"},"Version 3.8.0",-1)),a("button",{class:"collapse-toggle",onClick:o},[a("span",ts,M(t.value?"â®":"â¯"),1)])],512)],2))}},ss=me(as,[["__scopeId","data-v-dd6a6815"]]);const ns={class:"toggle-label-group"},rs=["for"],os={key:0,class:"toggle-sub-label"},is=["id","checked"],ls={__name:"SwitchControl",props:{id:{type:String,required:!0},label:{type:String,required:!0},subLabel:{type:String,default:""},modelValue:{type:Boolean,default:!1},marginTop:{type:Boolean,default:!1},small:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e){return(t,s)=>(C(),x("div",{class:te(["feature-toggle-wrapper",{"mt-10":e.marginTop}])},[a("div",ns,[a("label",{for:e.id,class:"toggle-main-label"},M(e.label),9,rs),e.subLabel?(C(),x("span",os,M(e.subLabel),1)):J("",!0)]),a("label",{class:te(["switch",{"small-switch":e.small}])},[a("input",{type:"checkbox",id:e.id,checked:e.modelValue,onChange:s[0]||(s[0]=n=>t.$emit("update:modelValue",n.target.checked))},null,40,is),s[1]||(s[1]=a("span",{class:"slider round"},null,-1))],2)],2))}},Y=me(ls,[["__scopeId","data-v-7cca3c62"]]),cs={class:"card-header"},ds=["data-target","title"],us={class:"icon-svg icon-info",style:{width:"16px",height:"16px"}},gs={class:"card-body"},re={__name:"SettingsCard",props:{title:{type:String,required:!0},icon:{type:String,default:"âš™ï¸"},guideTarget:{type:String,default:""},guideTitle:{type:String,default:"More Info"},fullHeight:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1},iconBg:{type:String,default:""},iconColor:{type:String,default:""}},setup(e){const t=e,s=z(()=>{const n={};return t.iconBg&&(n.background=t.iconBg),t.iconColor&&(n.color=t.iconColor),n});return(n,r)=>(C(),x("div",{class:te(["card",{"full-height":e.fullHeight,"highlight-card":e.highlight}])},[a("div",cs,[a("div",{class:"card-icon",style:le(s.value)},M(e.icon),5),a("h3",null,M(e.title),1),e.guideTarget?(C(),x("button",{key:0,class:"info-redirect-btn","data-target":e.guideTarget,title:e.guideTitle},[(C(),x("svg",us))],8,ds)):J("",!0)]),a("div",gs,[Ye(n.$slots,"default")])],2))}};const ps={id:"tab-settings",class:"tab-pane active fade-in"},ms={class:"content-grid"},fs={class:"input-group-row"},vs={class:"cards-row"},hs={class:"cards-row"},ys={class:"cards-row"},bs={class:"cards-row"},ws={__name:"GeneralTab",setup(e){return(t,s)=>(C(),x("div",ps,[s[9]||(s[9]=a("header",{class:"header"},[a("div",{class:"header-text"},[a("h1",null,"Settings"),a("p",{class:"subtitle"},"Configure your custom bookmarks for MangaFire.to, manage sync, and display preferences.")])],-1)),a("div",ms,[D(re,{title:"General Preferences",icon:"âš™ï¸","guide-target":"guide-general"},{default:K(()=>[a("div",fs,[D(Y,{id:"MarkHomePage",label:"Mark Homepage","sub-label":"Highlight manga on the homepage"}),D(Y,{id:"MangaFireQuickActions",label:"Quick Actions Overlay","sub-label":"Show 'Continue', 'Status', 'Rating' on hover"}),D(Y,{id:"MangaFireShowProgress",label:"Show Reading Badges","sub-label":"Display 'Ch. X/Y' on manga cards"}),D(Y,{id:"SyncandMarkRead",label:"Sync & Mark Read","sub-label":"Sync history and mark as read"}),D(Y,{id:"FamilyFriendly",label:"Family Friendly","sub-label":"Hide Ecchi/Adult content"}),s[0]||(s[0]=a("div",{class:"feature-toggle-wrapper"},[a("div",{class:"toggle-label-group"},[a("label",{class:"toggle-main-label"},"Reading History"),a("span",{class:"toggle-sub-label"},"Stored dashboard URLs")]),a("button",{id:"ClearReadingHistoryBtn",class:"btn btn-ghost btn-sm",style:{"margin-top":"5px"}}," Clear History ")],-1))])]),_:1}),a("div",vs,[D(re,{title:"Smart Automation",icon:"âš¡","icon-bg":"rgba(79, 70, 229, 0.1)","icon-color":"var(--primary)","guide-target":"guide-general","full-height":""},{default:K(()=>[D(Y,{id:"SmartAutoComplete",label:"Smart Auto-Complete","sub-label":"Mark as 'Completed' when reaching last chapter"}),D(Y,{id:"SmartInactivityFade",label:"Inactivity Dimming","sub-label":"Dim 'Reading' manga untouched for 30+ days","margin-top":""}),D(Y,{id:"SmartResumeLink",label:"Smart Resume","sub-label":"Dashboard opens next chapter (Predictive)","margin-top":""}),D(Y,{id:"NotificationsEnabled",label:"New Chapter Alerts","sub-label":"Browser notifications for new releases","margin-top":""})]),_:1}),D(re,{title:"Reader Enhancements",icon:"ðŸ“š","icon-bg":"rgba(16, 185, 129, 0.1)","icon-color":"#10b981","guide-target":"guide-reader","full-height":""},{default:K(()=>[D(Y,{id:"AutoScrollEnabled",label:"Auto-Scroll Panel","sub-label":"Show floating auto-scroll controls on reader pages"}),D(Y,{id:"KeybindsEnabled",label:"Keyboard Shortcuts","sub-label":"Arrow keys, Space (auto-scroll), F (fullscreen)","margin-top":""}),D(Y,{id:"ProgressTrackingEnabled",label:"Auto-Save Progress","sub-label":"Automatically save chapter progress while reading","margin-top":""})]),_:1})]),a("div",hs,[D(re,{title:"MangaDex Highlighting",icon:"ðŸ“–","icon-bg":"rgba(255, 103, 64, 0.1)","icon-color":"#FF6740","guide-target":"guide-general","full-height":""},{default:K(()=>[D(Y,{id:"MangaDexHighlightEnabled",label:"Enable MangaDex Highlighting","sub-label":"Show colored borders on mangadex.org"}),D(Y,{id:"MangaDexShowProgress",label:"Show Reading Progress","sub-label":"Display 'Ch. X/Y' on saved manga cards","margin-top":""})]),_:1}),D(re,{title:"Webtoons Highlighting",icon:"ðŸ“º","icon-bg":"rgba(0, 220, 100, 0.1)","icon-color":"#00DC64","guide-target":"guide-general","full-height":""},{default:K(()=>[D(Y,{id:"WebtoonsHighlightEnabled",label:"Enable Webtoons Highlighting","sub-label":"Show colored borders on webtoons.com"}),D(Y,{id:"WebtoonsShowProgress",label:"Show Reading Progress","sub-label":"Display 'Ep. X/Y' on saved webtoon cards","margin-top":""}),s[1]||(s[1]=a("div",{class:"feature-toggle-wrapper",style:{"margin-top":"10px"}},[a("div",{class:"toggle-label-group"},[a("label",{for:"WebtoonsBorderSize",class:"toggle-main-label"},"Border Thickness"),a("span",{class:"toggle-sub-label"},"Customize highlight border size")]),a("label",{class:"switch small-switch",title:"Enable Custom Border Size"},[a("input",{type:"checkbox",id:"WebtoonsBorderSizeEnabled"}),a("span",{class:"slider round"})])],-1)),s[2]||(s[2]=a("div",{class:"input-wrapper",style:{"margin-top":"10px"}},[a("div",{class:"range-slider-container"},[a("input",{type:"range",id:"WebtoonsBorderSizeSlider",min:"1",max:"10",value:"4",class:"range-slider"}),a("span",{id:"WebtoonsBorderSizeValue",class:"range-value"},"4px")])],-1))]),_:1})]),D(re,{title:"Custom Markers",icon:"ðŸŽ¨","guide-target":"guide-markers"},{default:K(()=>[...s[3]||(s[3]=[a("div",{class:"feature-toggle-header"},[a("span",{class:"description",style:{margin:"0"}},"Add custom statuses beyond the defaults."),a("label",{class:"switch small-switch",title:"Enable Custom Markers"},[a("input",{type:"checkbox",id:"CustomBookmarks"}),a("span",{class:"slider round"})])],-1),a("div",{style:{"margin-top":"15px"}},null,-1),a("div",{class:"input-group-row"},[a("div",{class:"input-wrapper flex-grow"},[a("label",{for:"bookmarkName"},"Marker Name"),a("input",{type:"text",id:"bookmarkName",placeholder:"e.g. Re-reading",class:"input-field"})]),a("div",{class:"input-wrapper"},[a("label",{for:"colorBookmarks"},"Color"),a("div",{class:"color-picker-wrapper"},[a("input",{type:"color",id:"colorBookmarks",value:"#ff0000"})])]),a("div",{class:"input-wrapper"},[a("label",{for:"customBorderStyleSelect"},"Border Style"),a("select",{id:"customBorderStyleSelect",class:"select-field"},[a("option",{value:"solid"},"Solid"),a("option",{value:"dashed"},"Dashed"),a("option",{value:"dotted"},"Dotted"),a("option",{value:"double"},"Double"),a("option",{value:"groove"},"Groove"),a("option",{value:"ridge"},"Ridge"),a("option",{value:"inset"},"Inset"),a("option",{value:"outset"},"Outset")])]),a("div",{class:"input-wrapper input-button-wrapper"},[a("button",{id:"addBookmarkButton",class:"btn btn-primary btn-input-height"}," + Add ")])],-1),a("div",{class:"active-markers-header"},[a("label",{class:"section-label"},"ACTIVE MARKERS"),a("button",{id:"resetBookmarkButton",class:"btn btn-ghost btn-sm"}," Remove All ")],-1),a("div",{id:"CustomBookmarksContainer",class:"markers-container"},null,-1)])]),_:1}),a("div",ys,[D(re,{title:"Auto Sync",icon:"ðŸ”„","guide-target":"guide-sync","full-height":""},{default:K(()=>[...s[4]||(s[4]=[a("div",{class:"feature-toggle-header"},[a("span",{class:"description",style:{margin:"0"}},"Automatically update bookmarks on site visit."),a("label",{class:"switch small-switch",title:"Enable Auto Sync"},[a("input",{type:"checkbox",id:"AutoSync"}),a("span",{class:"slider round"})])],-1),a("div",{style:{"margin-top":"15px"}},null,-1),a("div",{class:"input-wrapper"},[a("label",{for:"AutoSyncSetDays"},"Sync Interval (Days)"),a("div",{class:"input-with-button"},[a("input",{type:"number",id:"AutoSyncSetDays",value:"30",class:"input-field"})])],-1),a("p",{id:"logContainerSetDays",class:"status-text"},null,-1),a("div",{class:"button-group bottom-align"},[a("button",{id:"AutoSyncSetDaysButton",class:"btn btn-primary"},"Save Interval"),a("button",{id:"AutoSyncSetDaysButtonReset",class:"btn btn-ghost"},"Reset Default")],-1)])]),_:1}),D(re,{title:"Dashboard Settings",icon:"ðŸ“Š","guide-target":"guide-personalization","full-height":""},{default:K(()=>[s[5]||(s[5]=a("p",{class:"description compact"},"Configure the appearance and behavior of your Manga Dashboard.",-1)),D(Y,{id:"NewTabDashboard",label:"Enable Dashboard","sub-label":"Replace new tab page"}),D(Y,{id:"DashboardLayoutStyle",label:"Packed Layout","sub-label":"Show stats and more info","margin-top":""})]),_:1})]),D(re,{title:"Quick Access Shortcuts",icon:"ðŸ”—","guide-target":"guide-personalization"},{default:K(()=>[...s[6]||(s[6]=[a("div",{class:"card-body"},[a("p",{class:"description"},"Customize the 5 shortcut circles on your Manga Dashboard."),a("div",{id:"QuickAccessContainer",style:{"margin-top":"15px"}}),a("p",{id:"logContainerQuickAccess",class:"status-text"}),a("div",{class:"button-group",style:{"margin-top":"20px"}},[a("button",{id:"SaveQuickAccessButton",class:"btn btn-primary"},"Save Shortcuts"),a("button",{id:"ResetQuickAccessButton",class:"btn btn-ghost"},"Reset to Defaults")])],-1)])]),_:1}),a("div",bs,[D(re,{title:"Manual Synchronization",icon:"âš ï¸","guide-target":"guide-sync","icon-bg":"rgba(255, 171, 0, 0.1)","icon-color":"var(--warning)",highlight:""},{default:K(()=>[...s[7]||(s[7]=[a("div",{class:"card-body flex-row-center",style:{"padding-top":"0"}},[a("div",{class:"info-section"},[a("ul",{class:"info-list"},[a("li",null,"Requires you to be logged into MangaFire.to"),a("li",null,"Saves your read history and highlights"),a("li",null,"Disabling sync prevents read status saving")])]),a("div",{class:"action-section"},[a("button",{id:"sendMessageBtnSyncBookmarks",class:"btn btn-warning-large"}," âš¡ Sync Bookmarks Now "),a("p",{class:"tiny-text"},"Last synced: Check logs below")])],-1)])]),_:1}),s[8]||(s[8]=ge('<div class="card bg-terminal" style="padding:0;" data-v-3c62252c><div class="card-header" style="padding:12px 20px;margin-bottom:0;border-bottom:1px solid rgba(0, 255, 0, 0.1);" data-v-3c62252c><div class="card-icon" style="background:rgba(0, 255, 0, 0.1);color:#00FF00;width:30px;height:30px;font-size:16px;" data-v-3c62252c> ðŸ”</div><h3 style="font-size:14px;color:#00FF00;margin:0;" data-v-3c62252c>Debug Logs</h3></div><div id="logContainer" class="terminal-log" data-v-3c62252c></div></div>',1))])])]))}},ks=me(ws,[["__scopeId","data-v-3c62252c"]]);const Ss={id:"tab-appearance",class:"tab-pane fade-in"},Cs={class:"content-grid"},xs={style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"20px","margin-top":"20px"}},Es={__name:"AppearanceTab",setup(e){return(t,s)=>(C(),x("div",Ss,[s[8]||(s[8]=a("header",{class:"header"},[a("div",{class:"header-text"},[a("h1",null,"Appearance"),a("p",{class:"subtitle"},"Customize the look and feel of your extension and dashboard.")])],-1)),a("div",Cs,[D(re,{title:"Preset Themes",icon:"ðŸŽ­","guide-target":"guide-personalization"},{default:K(()=>[...s[0]||(s[0]=[a("div",{class:"theme-grid"},[a("div",{class:"theme-preview-card active","data-theme":"dark"},[a("div",{class:"theme-swatch dark-swatch"}),a("span",{class:"theme-label"},"Cloudy Dark")]),a("div",{class:"theme-preview-card","data-theme":"black"},[a("div",{class:"theme-swatch black-swatch"}),a("span",{class:"theme-label"},"Absolute Black")]),a("div",{class:"theme-preview-card","data-theme":"light"},[a("div",{class:"theme-swatch light-swatch"}),a("span",{class:"theme-label"},"Clean Light")]),a("div",{class:"theme-preview-card","data-theme":"neon"},[a("div",{class:"theme-swatch neon-swatch"}),a("span",{class:"theme-label"},"Cyber Neon")]),a("div",{class:"theme-preview-card","data-theme":"glassy"},[a("div",{class:"theme-swatch glassy-swatch"}),a("span",{class:"theme-label"},"Glassy Blue")])],-1)])]),_:1}),D(re,{title:"Theme Creator",icon:"âœ¨","guide-target":"guide-personalization"},{default:K(()=>[...s[1]||(s[1]=[a("div",{class:"card-body"},[a("p",{class:"description"},"Create your own personalized appearance by adjusting the colors below."),a("div",{class:"color-creator-grid"},[a("div",{class:"input-wrapper"},[a("label",null,"Background"),a("input",{type:"color",id:"themeColorBg",value:"#0b1437"})]),a("div",{class:"input-wrapper"},[a("label",null,"Sidebar"),a("input",{type:"color",id:"themeColorSidebar",value:"#111c44"})]),a("div",{class:"input-wrapper"},[a("label",null,"Accent"),a("input",{type:"color",id:"themeColorAccent",value:"#7551FF"})]),a("div",{class:"input-wrapper"},[a("label",null,"Text"),a("input",{type:"color",id:"themeColorText",value:"#ffffff"})])]),a("div",{class:"button-group",style:{"margin-top":"20px"}},[a("button",{id:"ApplyCustomThemeBtn",class:"btn btn-primary"},"Apply Custom Theme"),a("button",{id:"ResetThemeBtn",class:"btn btn-ghost"},"Reset to Default")])],-1)])]),_:1}),a("div",xs,[D(re,{title:"Highlight Styles",icon:"ðŸ–¼ï¸","guide-target":"guide-personalization","full-height":""},{default:K(()=>[...s[2]||(s[2]=[a("div",{class:"feature-toggle-wrapper"},[a("div",{class:"toggle-label-group"},[a("label",{for:"CustomBorderSize",class:"toggle-main-label"},"Custom Borders"),a("span",{class:"toggle-sub-label"},"Enable highlighting on sites")]),a("label",{class:"switch small-switch"},[a("input",{type:"checkbox",id:"CustomBorderSize"}),a("span",{class:"slider round"})])],-1),a("div",{class:"divider"},null,-1),a("div",{class:"feature-toggle-wrapper"},[a("label",{class:"feature-label"},[V(" Border Style "),a("span",{class:"feature-subtitle"},"Choose line style")]),a("select",{id:"GlobalBorderStyle",class:"select-field"},[a("option",{value:"solid"},"Solid"),a("option",{value:"dashed"},"Dashed"),a("option",{value:"dotted"},"Dotted")])],-1),a("div",{class:"divider"},null,-1),a("div",{class:"range-header"},[a("label",null,"Highlight Thickness"),a("span",{id:"globalRangeValue",style:{color:"var(--primary)","font-weight":"bold"}},"4px")],-1),a("input",{type:"range",id:"GlobalBorderSize",min:"1",max:"10",value:"4",class:"range-slider"},null,-1)])]),_:1}),D(re,{title:"Library Styles",icon:"ðŸ“š","guide-target":"guide-personalization","full-height":""},{default:K(()=>[D(Y,{id:"LibraryCardBordersEnabled",label:"Show Status Borders","sub-label":"Color borders in library"}),D(Y,{id:"LibraryHideNoHistory",label:"Only Show with History","sub-label":"Hide entries with no progress"}),s[3]||(s[3]=a("div",{class:"divider"},null,-1)),s[4]||(s[4]=a("div",{class:"range-header"},[a("label",null,"Border Thickness"),a("span",{id:"libraryBorderValue",style:{color:"var(--primary)","font-weight":"bold"}},"2px")],-1)),s[5]||(s[5]=a("input",{type:"range",id:"LibraryCardBorderThickness",min:"1",max:"10",value:"2",class:"range-slider"},null,-1)),s[6]||(s[6]=a("div",{class:"divider"},null,-1)),s[7]||(s[7]=a("p",{class:"section-label"},"âœ¨ Visual Effects",-1)),D(Y,{id:"LibraryGlowEffect",label:"Glow Effect","sub-label":"Use glow instead of solid borders"}),D(Y,{id:"LibraryAnimatedBorders",label:"Animated Borders","sub-label":"Pulse animation for 'Reading' status"}),D(Y,{id:"LibraryStatusIcons",label:"Status Icons","sub-label":"Show emoji overlay on cards"}),D(Y,{id:"LibraryProgressBars",label:"Progress Bars","sub-label":"Reading progress on card covers"})]),_:1})])])]))}},Ms=me(Es,[["__scopeId","data-v-68f54b9a"]]);const Bs={key:0,class:"filter-label"},_s={__name:"FilterGroup",props:{label:{type:String,default:""},customClass:{type:String,default:""}},setup(e){return(t,s)=>(C(),x("div",{class:te(["advanced-filter-group",e.customClass])},[e.label?(C(),x("label",Bs,M(e.label),1)):J("",!0),Ye(t.$slots,"default",{},void 0,!0)],2))}},Ge=me(_s,[["__scopeId","data-v-0a553249"]]);const Ls={class:"stats-grid-compact"},Ds={class:"stats-row stats-row-main"},As={class:"stat-item-compact",style:{"--stat-color":"var(--primary)"}},Is={class:"stat-value-large"},Ts={class:"stat-item-compact",style:{"--stat-color":"#00BCD4"}},$s={class:"stat-value-large"},Rs={class:"stat-item-compact",style:{"--stat-color":"#4CAF50"}},Ps={class:"stat-value-large"},Fs={class:"stat-item-compact",style:{"--stat-color":"#2196F3"}},Os={class:"stat-value-large"},Ns={class:"stat-item-compact",style:{"--stat-color":"#9C27B0"}},Hs={class:"stat-value-large"},zs={class:"stat-item-compact",style:{"--stat-color":"#FFC107"}},Vs={class:"stat-value-large"},Us={class:"stat-item-compact",style:{"--stat-color":"#F44336"}},js={class:"stat-value-large"},qs={class:"stats-row stats-row-charts"},Gs={class:"chart-container"},Ws={class:"pie-chart-svg",viewBox:"0 0 180 180"},Ks=["data-status","stroke","stroke-dasharray"],Qs={class:"pie-center-text",x:"90",y:"85","text-anchor":"middle","dominant-baseline":"middle"},Ys={class:"pie-legend"},Zs={class:"bar-chart-container"},Js={key:0,class:"bar-chart"},Xs={class:"bar-label"},en={class:"bar-track"},tn=["data-target-width"],an={class:"bar-value"},sn={key:1,style:{color:"var(--text-secondary)","font-size":"0.8rem"}},nn={class:"stats-row stats-row-secondary"},rn={class:"stat-group"},on={class:"stat-mini-grid"},ln={class:"stat-mini"},cn={class:"stat-mini-value"},dn={class:"stat-mini"},un={class:"stat-mini-value"},gn={class:"stat-mini"},pn={class:"stat-mini-value"},mn={class:"stat-mini"},fn={class:"stat-mini-value"},vn={class:"stat-group"},hn={class:"stat-mini-grid"},yn={class:"stat-mini"},bn={class:"stat-mini-value",style:{color:"#02A9FF"}},wn={class:"stat-mini"},kn={class:"stat-mini-value",style:{color:"#FF6740"}},Sn={class:"stat-mini"},Cn={class:"stat-mini-value",style:{color:"#888"}},xn={class:"stat-group"},En={class:"stat-mini-grid"},Mn={class:"stat-mini"},Bn={class:"stat-mini-value"},_n={class:"stat-mini"},Ln={class:"stat-mini-value"},Dn={class:"stat-mini"},An={class:"stat-mini-value"},In={class:"progress-ring-container"},Tn={class:"progress-ring-info"},$n={class:"progress-ring-value"},Rn={class:"stats-row stats-row-bar"},Pn={class:"stat-bar-item"},Fn={class:"stat-bar-item"},On={class:"stat-bar-item"},Nn={__name:"LibraryStatistics",props:{entries:{type:Array,required:!0},isVisible:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const s=e,n=Q(!1),r=Q(null),l=2*Math.PI*70,i=2*Math.PI*24,g=["#7551FF","#6B46C1","#805AD5","#9F7AEA","#B794F4","#D6BCFA"],o=z(()=>{const h=s.entries.length;if(h===0)return{total:0,totalChapters:0,reading:0,completed:0,planning:0,onhold:0,dropped:0,avgScore:0,completionRate:0};const p=s.entries.filter(c=>c.status==="Reading").length,v=s.entries.filter(c=>c.status==="Completed").length,w=s.entries.filter(c=>c.status==="Plan to Read").length,T=s.entries.filter(c=>c.status==="On Hold").length,j=s.entries.filter(c=>c.status==="Dropped").length,O=s.entries.reduce((c,d)=>c+(parseInt(d.readChapters)||0),0),Z=s.entries.filter(c=>{var d;return(d=c.anilistData)==null?void 0:d.averageScore}),se=Z.length>0?Math.round(Z.reduce((c,d)=>c+d.anilistData.averageScore,0)/Z.length):0,B=Math.round(v/h*100);return{total:h,totalChapters:O,reading:p,completed:v,planning:w,onhold:T,dropped:j,avgScore:se,completionRate:B}}),m=z(()=>{if(o.value.total===0)return[];const h=[{label:"Reading",value:o.value.reading,color:"#4CAF50"},{label:"Completed",value:o.value.completed,color:"#2196F3"},{label:"Planning",value:o.value.planning,color:"#9C27B0"},{label:"On Hold",value:o.value.onhold,color:"#FFC107"},{label:"Dropped",value:o.value.dropped,color:"#F44336"}].filter(v=>v.value>0);let p=0;return h.map(v=>{const w=v.value/o.value.total,T=l*w,j=p;return p+=T,{...v,dashLen:T,offset:j}})}),f=z(()=>{const h={};s.entries.forEach(w=>{var T;(((T=w.anilistData)==null?void 0:T.genres)||[]).forEach(j=>{h[j]=(h[j]||0)+1})});const p=Object.entries(h).sort((w,T)=>T[1]-w[1]).slice(0,6),v=p.length>0?p[0][1]:1;return p.map(([w,T])=>({name:w,count:T,percent:Math.round(T/v*100)}))}),u=z(()=>{const h=Date.now(),p=7*24*60*60*1e3,v=30*24*60*60*1e3;return{readThisWeek:s.entries.filter(w=>w.lastRead&&h-w.lastRead<p).length,readThisMonth:s.entries.filter(w=>w.lastRead&&h-w.lastRead<v).length,addedThisWeek:s.entries.filter(w=>w.lastUpdated&&h-w.lastUpdated<p).length,withHistory:s.entries.filter(w=>w.readChapters&&w.readChapters>0).length}}),b=z(()=>({anilist:s.entries.filter(h=>h.anilistData&&!h.anilistData.source).length,mangadex:s.entries.filter(h=>{var p;return((p=h.anilistData)==null?void 0:p.source)==="MANGADEX"}).length,noData:s.entries.filter(h=>!h.anilistData||h.anilistData.status==="NOT_FOUND").length})),P=z(()=>({manga:s.entries.filter(h=>{var p,v;return((p=h.anilistData)==null?void 0:p.format)==="MANGA"||!((v=h.anilistData)!=null&&v.format)}).length,manhwa:s.entries.filter(h=>{var p,v;return((p=h.anilistData)==null?void 0:p.format)==="Manhwa"||((v=h.anilistData)==null?void 0:v.countryOfOrigin)==="KR"}).length,manhua:s.entries.filter(h=>{var p,v;return((p=h.anilistData)==null?void 0:p.format)==="Manhua"||((v=h.anilistData)==null?void 0:v.countryOfOrigin)==="CN"}).length})),S=async()=>{const h=typeof anime<"u"?anime:window.anime;if(console.log("[Stats] Animation trigger - anime available:",!!h),!h){console.warn("[Stats] anime.js not found, skipping animations");return}if(await Wt(),console.log("[Stats] After nextTick - root.value:",!!r.value),!r.value){console.warn("[Stats] root ref is null after nextTick");return}const p=r.value.querySelectorAll(".pie-slice"),v=r.value.querySelectorAll(".bar-fill"),w=r.value.querySelector(".progress-ring-fill");console.log("[Stats] Found elements - pieSlices:",p.length,"barFills:",v.length,"ring:",!!w),p.forEach(T=>{T.setAttribute("stroke-dasharray",`0 ${l}`)}),v.forEach(T=>{T.style.width="0%"}),w&&w.setAttribute("stroke-dashoffset",i),h({targets:r.value.querySelectorAll(".stat-item-compact, .stat-group, .stat-bar-item, .chart-container, .bar-chart-container, .progress-ring-container"),opacity:[0,1],translateY:[15,0],delay:h.stagger(40),duration:600,easing:"easeOutQuart"}),setTimeout(()=>{const T=typeof anime<"u"?anime:window.anime;T&&m.value.forEach((j,O)=>{const Z=p[O];Z&&T({targets:Z,strokeDasharray:[`0 ${l}`,`${j.dashLen} ${l-j.dashLen}`],duration:1e3,delay:O*100,easing:"easeOutQuart"})})},300),setTimeout(()=>{const T=typeof anime<"u"?anime:window.anime;T&&f.value.forEach((j,O)=>{const Z=v[O];Z&&T({targets:Z,width:["0%",j.percent+"%"],duration:800,delay:O*80,easing:"easeOutQuart"})})},500),setTimeout(()=>{if(w){const T=typeof anime<"u"?anime:window.anime;if(!T)return;const j=i-i*o.value.completionRate/100;T({targets:w,strokeDashoffset:[i,j],duration:1200,easing:"easeOutQuart"})}},400)},y=()=>{const h=typeof anime<"u"?anime:window.anime;if(!h||!r.value){n.value=!1;return}const p=r.value.querySelectorAll(".pie-slice"),v=r.value.querySelectorAll(".bar-fill"),w=r.value.querySelector(".progress-ring-fill");h({targets:v,width:"0%",duration:300,easing:"easeInQuart"}),h({targets:p,strokeDasharray:`0 ${l}`,duration:400,easing:"easeInQuart"}),w&&h({targets:w,strokeDashoffset:i,duration:400,easing:"easeInQuart"}),h({targets:r.value.querySelectorAll(".stat-item-compact, .stat-group, .stat-bar-item, .chart-container, .bar-chart-container, .progress-ring-container"),opacity:[1,0],translateY:[0,-10],delay:h.stagger(20,{direction:"reverse"}),duration:300,easing:"easeInQuart",complete:()=>{n.value=!1}})};return Et(()=>s.isVisible,(h,p)=>{console.log("[Stats] Watch triggered - isVisible changed:",p,"->",h),h?(n.value=!1,requestAnimationFrame(()=>{setTimeout(()=>{console.log("[Stats] Starting entrance animations after delay"),S()},50)})):(n.value=!0,y())}),Ie(()=>{console.log("[Stats] Component MOUNTED - isVisible:",s.isVisible),s.isVisible&&S()}),(h,p)=>ie((C(),x("div",{ref_key:"root",ref:r,class:te(["stats-dashboard-card glass-card",{visible:e.isVisible,closing:n.value}])},[p[27]||(p[27]=a("div",{class:"stats-header"},[a("h3",null,"Library Statistics")],-1)),a("div",Ls,[a("div",Ds,[a("div",As,[a("span",Is,M(o.value.total),1),p[0]||(p[0]=a("span",{class:"stat-label-small"},"Total",-1))]),a("div",Ts,[a("span",$s,M(o.value.totalChapters.toLocaleString()),1),p[1]||(p[1]=a("span",{class:"stat-label-small"},"Chapters Read",-1))]),a("div",Rs,[a("span",Ps,M(o.value.reading),1),p[2]||(p[2]=a("span",{class:"stat-label-small"},"Reading",-1))]),a("div",Fs,[a("span",Os,M(o.value.completed),1),p[3]||(p[3]=a("span",{class:"stat-label-small"},"Completed",-1))]),a("div",Ns,[a("span",Hs,M(o.value.planning),1),p[4]||(p[4]=a("span",{class:"stat-label-small"},"Plan to Read",-1))]),a("div",zs,[a("span",Vs,M(o.value.onhold),1),p[5]||(p[5]=a("span",{class:"stat-label-small"},"On Hold",-1))]),a("div",Us,[a("span",js,M(o.value.dropped),1),p[6]||(p[6]=a("span",{class:"stat-label-small"},"Dropped",-1))])]),a("div",qs,[a("div",Gs,[p[9]||(p[9]=a("span",{class:"chart-title"},"ðŸ“Š Status Distribution",-1)),(C(),x("svg",Ws,[(C(!0),x(ae,null,oe(m.value,(v,w)=>(C(),x("circle",{key:v.label,class:"pie-slice","data-status":v.label,cx:"90",cy:"90",r:"70",stroke:v.color,"stroke-dasharray":`0 ${l}`,style:le({strokeDashoffset:`-${v.offset}`})},null,12,Ks))),128)),p[7]||(p[7]=a("circle",{class:"pie-center",cx:"90",cy:"90",r:"45"},null,-1)),a("text",Qs,M(o.value.total),1),p[8]||(p[8]=a("text",{class:"pie-center-label",x:"90",y:"105","text-anchor":"middle"},"TOTAL",-1))])),a("div",Ys,[(C(!0),x(ae,null,oe(m.value,v=>(C(),x("div",{key:v.label,class:"legend-item"},[a("span",{class:"legend-dot",style:le({background:v.color})},null,4),a("span",null,M(v.label)+" ("+M(v.value)+")",1)]))),128))])]),a("div",Zs,[p[10]||(p[10]=a("span",{class:"chart-title"},"ðŸ·ï¸ Top Genres",-1)),f.value.length>0?(C(),x("div",Js,[(C(!0),x(ae,null,oe(f.value,(v,w)=>(C(),x("div",{key:v.name,class:"bar-item"},[a("span",Xs,M(v.name),1),a("div",en,[a("div",{class:"bar-fill",style:le({width:"0%",background:g[w%g.length]}),"data-target-width":v.percent+"%"},[a("span",an,M(v.count),1)],12,tn)])]))),128))])):(C(),x("p",sn,"No genre data available"))])]),a("div",nn,[a("div",rn,[p[15]||(p[15]=a("h4",{class:"stat-group-title"},"ðŸ“… Activity",-1)),a("div",on,[a("div",ln,[a("span",cn,M(u.value.readThisWeek),1),p[11]||(p[11]=a("span",{class:"stat-mini-label"},"Read This Week",-1))]),a("div",dn,[a("span",un,M(u.value.readThisMonth),1),p[12]||(p[12]=a("span",{class:"stat-mini-label"},"Read This Month",-1))]),a("div",gn,[a("span",pn,M(u.value.addedThisWeek),1),p[13]||(p[13]=a("span",{class:"stat-mini-label"},"Added This Week",-1))]),a("div",mn,[a("span",fn,M(u.value.withHistory),1),p[14]||(p[14]=a("span",{class:"stat-mini-label"},"With History",-1))])])]),a("div",vn,[p[19]||(p[19]=a("h4",{class:"stat-group-title"},"ðŸŒ Data Sources",-1)),a("div",hn,[a("div",yn,[a("span",bn,M(b.value.anilist),1),p[16]||(p[16]=a("span",{class:"stat-mini-label"},"AniList",-1))]),a("div",wn,[a("span",kn,M(b.value.mangadex),1),p[17]||(p[17]=a("span",{class:"stat-mini-label"},"MangaDex",-1))]),a("div",Sn,[a("span",Cn,M(b.value.noData),1),p[18]||(p[18]=a("span",{class:"stat-mini-label"},"No Data",-1))])])]),a("div",xn,[p[23]||(p[23]=a("h4",{class:"stat-group-title"},"ðŸ“š Format",-1)),a("div",En,[a("div",Mn,[a("span",Bn,M(P.value.manga),1),p[20]||(p[20]=a("span",{class:"stat-mini-label"},"Manga",-1))]),a("div",_n,[a("span",Ln,M(P.value.manhwa),1),p[21]||(p[21]=a("span",{class:"stat-mini-label"},"Manhwa",-1))]),a("div",Dn,[a("span",An,M(P.value.manhua),1),p[22]||(p[22]=a("span",{class:"stat-mini-label"},"Manhua",-1))])])]),a("div",In,[a("svg",{class:"progress-ring-svg",viewBox:"0 0 60 60"},[p[24]||(p[24]=a("circle",{class:"progress-ring-bg",cx:"30",cy:"30",r:"24"},null,-1)),a("circle",{class:"progress-ring-fill",cx:"30",cy:"30",r:"24","stroke-dasharray":i,"stroke-dashoffset":i})]),a("div",Tn,[a("span",$n,M(o.value.completionRate)+"%",1),p[25]||(p[25]=a("span",{class:"progress-ring-label"},"Completion Rate",-1))])])]),a("div",Rn,[a("div",Pn,[p[26]||(p[26]=V("â­ Avg Score: ",-1)),a("strong",null,M(o.value.avgScore>0?o.value.avgScore+"%":"N/A"),1)]),a("div",Fn,"ðŸ“– "+M(Math.round(o.value.totalChapters/Math.max(o.value.completed,1)))+" ch/completed manga",1),a("div",On,"ðŸ“ˆ "+M(o.value.completionRate)+"% completion rate",1)])])],2)),[[Gt,e.isVisible||n.value]])}},Hn=me(Nn,[["__scopeId","data-v-13735889"]]);function qt(e,t,s){const n=e.toLowerCase();let r=s.find(o=>o.name.toLowerCase()===n);if(!r&&t&&(r=s.find(o=>o.name===t)),r)return{borderColor:r.color,borderStyle:r.style||"solid",badgeBg:`${r.color}26`,badgeText:r.color};const l={reading:{color:"#4CAF50",bg:"rgba(76, 175, 80, 0.15)"},read:{color:"#9f9f9f",bg:"rgba(159, 159, 159, 0.15)"},completed:{color:"#2196F3",bg:"rgba(33, 150, 243, 0.15)"},dropped:{color:"#F44336",bg:"rgba(244, 67, 54, 0.15)"},onhold:{color:"#FFC107",bg:"rgba(255, 193, 7, 0.15)"},planning:{color:"#9C27B0",bg:"rgba(156, 39, 176, 0.15)"},default:{color:"#8B95A5",bg:"rgba(139, 149, 165, 0.15)"}};let i="default";n.includes("reading")?i="reading":n==="read"?i="read":n.includes("completed")?i="completed":n.includes("dropped")?i="dropped":n.includes("hold")?i="onhold":n.includes("plan")&&(i="planning");const g=l[i];return{borderColor:g.color,borderStyle:"solid",badgeBg:g.bg,badgeText:g.color}}function ct(e,t){return t==="KR"&&e==="MANGA"?"Manhwa":t==="CN"&&e==="MANGA"?"Manhua":{MANGA:"Manga",ONE_SHOT:"One Shot",NOVEL:"Light Novel"}[e]||"Manga"}const zn=["title"],Vn={key:1,class:"manga-card-progress-bar"},Un={class:"manga-card-actions"},jn=["href","title"],qn=["href"],Gn={class:"manga-card-body"},Wn=["title"],Kn={class:"manga-card-meta"},Qn={key:0,class:"manga-card-info"},Yn={key:0,class:"info-item format-badge"},Zn={class:"info-item"},Jn={key:1,class:"info-item",style:{opacity:"0.6"}},Xn="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzY2NiI+PHBhdGggZD0iTTIxIDR2MTJIMy4wMVYySDFWMTZoMjBWNGgtMlptLTEuOTEgMTMuNUw0IDE4djJoMTIuMTdsLjg0LS44NCAxLjA4IDEuNi42Ni0uMjItLjk3LTEuNDNjLjEyLS4xNi4yMi0uMzUuMzEtLjU1eiIvPjwvc3ZnPg==",er={__name:"MangaCard",props:{entry:{type:Object,required:!0},customMarkers:{type:Array,default:()=>[]},librarySettings:{type:Object,default:()=>({bordersEnabled:!0,borderThickness:2,useGlowEffect:!1,animatedBorders:!1,showStatusIcon:!1,showProgressBar:!1,smartInactivity:!1})}},emits:["click","marker-click"],setup(e){Kt(S=>({v16656126:s.value.borderColor}));const t=e,s=z(()=>qt(t.entry.status,t.entry.customMarker,t.customMarkers)),n=z(()=>t.librarySettings.bordersEnabled&&t.librarySettings.useGlowEffect),r=z(()=>{if(!t.librarySettings.bordersEnabled)return{border:"none"};if(n.value)return{"--glow-color":`${s.value.borderColor}80`,border:"none"};const y=`${t.librarySettings.borderThickness||2}px`;return{border:`${y} ${s.value.borderStyle||"solid"} ${s.value.borderColor}`,"--border-thickness":y}}),l=z(()=>t.librarySettings.animatedBorders&&t.entry.status==="Reading"),i=z(()=>t.librarySettings.smartInactivity&&t.entry.status==="Reading"&&t.entry.lastRead?(Date.now()-t.entry.lastRead)/(1e3*60*60*24)>30:!1),g=z(()=>{var S,y,h,p;return(y=(S=t.entry.anilistData)==null?void 0:S.coverImage)!=null&&y.large||(p=(h=t.entry.anilistData)==null?void 0:h.coverImage)!=null&&p.medium?t.entry.anilistData.coverImage.large||t.entry.anilistData.coverImage.medium:Xn}),o=z(()=>{const S=(t.entry.status||"").toLowerCase();return S.includes("reading")?"ðŸ“–":S==="read"||S.includes("completed")?"âœ…":S.includes("dropped")?"âŒ":S.includes("hold")?"â¸ï¸":S.includes("plan")?"ðŸ“‹":"ðŸ“š"}),m=z(()=>{var S;return t.librarySettings.showProgressBar&&((S=t.entry.anilistData)==null?void 0:S.chapters)&&t.entry.readChapters}),f=z(()=>{if(!m.value)return 0;const S=t.entry.anilistData.chapters,y=parseInt(t.entry.readChapters)||0;return Math.min(100,Math.round(y/S*100))}),u=z(()=>{var S,y,h,p;return((y=(S=t.entry.anilistData)==null?void 0:S.title)==null?void 0:y.english)||((p=(h=t.entry.anilistData)==null?void 0:h.title)==null?void 0:p.romaji)||t.entry.title}),b=z(()=>t.entry.anilistData?ct(t.entry.anilistData.format,t.entry.anilistData.countryOfOrigin):null),P=z(()=>{var h;const S=(h=t.entry.anilistData)==null?void 0:h.tags;if(!S||!Array.isArray(S))return null;const y=S.map(p=>p.name.toLowerCase());return y.includes("seinen")?"Seinen":y.includes("josei")?"Josei":y.includes("shounen")?"Shonen":y.includes("shoujo")?"Shoujo":null});return(S,y)=>{var h;return C(),x("div",{class:te(["manga-card",{"glow-effect":n.value,"reading-pulse":l.value,"has-custom-marker":!!e.entry.customMarker,"stale-entry":i.value}]),style:le(r.value),onClick:y[3]||(y[3]=p=>S.$emit("click",e.entry))},[a("div",{class:"manga-card-cover",style:le({backgroundImage:`url('${g.value}')`})},[a("div",{class:"card-status-dot",style:le({backgroundColor:s.value.borderColor})},null,4),e.librarySettings.showStatusIcon?(C(),x("div",{key:0,class:"manga-card-status-icon",title:e.entry.status},M(o.value),9,zn)):J("",!0),m.value?(C(),x("div",Vn,[a("div",{class:"manga-card-progress-fill",style:le({width:f.value+"%"})},null,4)])):J("",!0),a("div",Un,[e.entry.lastMangafireUrl?(C(),x("a",{key:0,href:e.entry.lastMangafireUrl,target:"_blank",class:"card-action-btn card-action-continue",onClick:y[0]||(y[0]=Re(()=>{},["stop"])),title:"Continue reading Ch."+(e.entry.lastChapterRead||"?")}," â–¶ Ch."+M(e.entry.lastChapterRead||"?"),9,jn)):J("",!0),(h=e.entry.anilistData)!=null&&h.siteUrl?(C(),x("a",{key:1,href:e.entry.anilistData.siteUrl,target:"_blank",class:"card-action-btn",onClick:y[1]||(y[1]=Re(()=>{},["stop"]))}," View ",8,qn)):J("",!0),a("button",{class:"card-action-btn",onClick:y[2]||(y[2]=Re(p=>S.$emit("marker-click",e.entry),["stop"]))},M(e.entry.customMarker?"âœ“ "+e.entry.customMarker:"+ Marker"),1)])],4),a("div",Gn,[a("h3",{class:"manga-card-title",title:u.value},M(u.value),9,Wn),a("div",Kn,[a("span",{class:"manga-card-status",style:le({backgroundColor:s.value.badgeBg,color:s.value.badgeText})},M(e.entry.status),5),e.entry.anilistData?(C(),x("div",Qn,[b.value?(C(),x("div",Yn,M(b.value),1)):J("",!0),P.value?(C(),x("div",{key:1,class:te(["info-item","format-badge",`demo-${P.value.toLowerCase()}`]),style:{"margin-left":"4px"}},M(P.value),3)):J("",!0),a("div",Zn,[e.entry.anilistData.chapters?(C(),x(ae,{key:0},[y[4]||(y[4]=a("span",{class:"info-label"},"Read:",-1)),V(M(e.entry.readChapters||0)+" / ",1),y[5]||(y[5]=a("span",{class:"info-label"},"Total:",-1)),V(M(e.entry.anilistData.chapters),1)],64)):(C(),x(ae,{key:1},[y[6]||(y[6]=a("span",{class:"info-label"},"Read:",-1)),V(M(e.entry.readChapters||0)+" ",1),y[7]||(y[7]=a("span",{class:"info-label ongoing-tag"},"Ongoing",-1))],64))])])):(C(),x("div",Jn," Loading info... "))])])],6)}}},tr=me(er,[["__scopeId","data-v-835abfbe"]]),Ee={PERSONAL_DATA:"libraryPersonalData",USER_TAGS:"libraryUserTags",FILTER_PRESETS:"libraryFilterPresets"};function xe(e){var t;return(t=e.anilistData)!=null&&t.id?`anilist:${e.anilistData.id}`:e.mangadexId?`mangadex:${e.mangadexId}`:`title:${ar(e.title)}`}function ar(e){return e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}let _e=null,Le=null;async function dt(){return _e||new Promise(e=>{chrome.storage.local.get([Ee.PERSONAL_DATA],t=>{_e=t[Ee.PERSONAL_DATA]||{},e(_e)})})}async function ut(e){const t=await dt(),s=xe(e);return t[s]||{tags:[],notes:"",rating:0}}async function ze(e,t){const s=await dt(),n=xe(e);return s[n]={...s[n]||{tags:[],notes:"",rating:0},...t,lastModified:Date.now()},_e=s,new Promise(r=>{chrome.storage.local.set({[Ee.PERSONAL_DATA]:s},r)})}async function Qe(){return Le||new Promise(e=>{chrome.storage.local.get([Ee.USER_TAGS],t=>{Le=t[Ee.USER_TAGS]||[],e(Le)})})}async function sr(e){const t=await Qe(),s=e.trim();return!s||t.includes(s)?t:(t.push(s),Le=t,new Promise(n=>{chrome.storage.local.set({[Ee.USER_TAGS]:t},()=>n(t))}))}async function nr(e,t){const s=await ut(e);return s.tags.includes(t)||(s.tags.push(t),await ze(e,{tags:s.tags})),await sr(t),s.tags}async function rr(e,t){const s=await ut(e);return s.tags=s.tags.filter(n=>n!==t),await ze(e,{tags:s.tags}),s.tags}async function or(e,t){await ze(e,{notes:t.trim()})}async function ir(e,t){const s=Math.max(0,Math.min(10,parseInt(t)||0));return await ze(e,{rating:s}),s}function $e(e,t){if(!e||!t)return!1;const s=e.toLowerCase(),n=t.toLowerCase();if(n.includes(s))return!0;let r=0;for(let l=0;l<n.length&&r<s.length;l++)n[l]===s[r]&&r++;return r===s.length}const lr={id:"tab-saved-entries",class:"tab-pane fade-in",style:{display:"none"}},cr={class:"content-grid",style:{"max-width":"100%"}},dr={key:0,class:"bulk-ops-bar glass-card",style:{display:"flex"}},ur={class:"bulk-info"},gr={class:"bulk-actions"},pr={class:"library-header"},mr={class:"library-title-section"},fr={class:"library-title-text"},vr={style:{display:"flex","align-items":"center",gap:"8px"}},hr={class:"info-redirect-btn","data-target":"guide-entries",title:"How to use"},yr={class:"icon-svg icon-info",style:{width:"16px",height:"16px"}},br={class:"library-subtitle"},wr={class:"library-controls"},kr=["value"],Sr=["value"],Cr={class:"search-wrapper"},xr={class:"view-toggle-group"},Er={class:"library-controls-advanced"},Mr={class:"chapter-range-wrapper"},Br={key:1,class:"sync-progress-container fade-in"},_r={class:"sync-info"},Lr={class:"sync-count"},Dr={class:"progress-bar-bg"},Ar={class:"sync-details"},Ir={key:0,class:"empty-library"},Tr={__name:"SavedEntriesTab",setup(e){const t=Q(!1),s=Q(!1),n=Q("Reading"),r=Q([]),l=Q([]),i=Q({}),g=Q("large"),o=Q(!1),m=Ve({isSyncing:!1,current:0,total:0,percentage:0,currentTitle:""}),f=Ve({bordersEnabled:!0,borderThickness:2,hideNoHistory:!1,useGlowEffect:!1,animatedBorders:!1,showStatusIcon:!1,showProgressBar:!1,smartInactivity:!1}),u=Ve({sort:"title-asc",demographic:"All",status:"All",genre:"All",format:"All",search:"",chapterMin:null,chapterMax:null,lastUpdated:"all",newChaptersOnly:!1}),b=z(()=>{const B=new Set;return r.value.forEach(c=>{var d;(d=c.anilistData)!=null&&d.genres&&c.anilistData.genres.forEach(_=>B.add(_))}),Array.from(B).sort()}),P=z(()=>r.value.filter(B=>{var R,I,$,G,E,k;const c=B.anilistData;if(o.value&&(c!=null&&c.genres)&&c.genres.some(L=>["Ecchi","Hentai"].includes(L)))return!1;if(u.status!=="All"){if(u.status.startsWith("marker:")){const L=u.status.substring(7);if(B.customMarker!==L&&B.status!==L)return!1}else if(u.status==="HasHistory"){if(!(B.lastRead||B.lastChapterRead||B.readChapters>0))return!1}else if(B.status!==u.status)return!1}if(f.hideNoHistory&&!(B.lastRead||B.lastChapterRead||B.readChapters>0)||u.format!=="All"&&(!c||ct(c.format,c.countryOfOrigin)!==u.format)||u.genre!=="All"&&!((R=c==null?void 0:c.genres)!=null&&R.includes(u.genre)))return!1;if(u.search!==""){const L=$e(u.search,B.title)||$e(u.search,((I=c==null?void 0:c.title)==null?void 0:I.english)||"")||$e(u.search,(($=c==null?void 0:c.title)==null?void 0:$.romaji)||""),N=((E=(G=c==null?void 0:c.staff)==null?void 0:G.edges)==null?void 0:E.some(F=>{var W,q;return $e(u.search,((q=(W=F.node)==null?void 0:W.name)==null?void 0:q.full)||"")}))||!1;if(!L&&!N)return!1}if(u.demographic!=="All"){const L=u.demographic.toLowerCase();if(!((k=c==null?void 0:c.tags)!=null&&k.some(N=>N.name.toLowerCase()===L)))return!1}const d=u.chapterMin||0,_=u.chapterMax||1/0;if(d>0||_<1/0){const L=(c==null?void 0:c.chapters)||B.readChapters||0;if(L<d||L>_)return!1}if(u.lastUpdated!=="all"){const L=Date.now(),N=B.lastRead||B.lastUpdated||0;let F=0;switch(u.lastUpdated){case"7d":F=L-7*24*60*60*1e3;break;case"30d":F=L-30*24*60*60*1e3;break;case"90d":F=L-90*24*60*60*1e3;break;case"year":F=L-365*24*60*60*1e3;break}if(N<F)return!1}if(u.newChaptersOnly){const L=(c==null?void 0:c.chapters)||0,N=B.readChapters||0;if(!(L>0&&N<L))return!1}return!0})),S=z(()=>{const B=[...P.value];return B.sort((c,d)=>{var I,$,G,E,k,L,N,F,W,q,X,ee,ce,de;const _=((($=(I=c.anilistData)==null?void 0:I.title)==null?void 0:$.english)||c.title).toLowerCase(),R=(((E=(G=d.anilistData)==null?void 0:G.title)==null?void 0:E.english)||d.title).toLowerCase();switch(u.sort){case"title-asc":return _.localeCompare(R);case"title-desc":return R.localeCompare(_);case"pop-desc":return(((k=d.anilistData)==null?void 0:k.popularity)||0)-(((L=c.anilistData)==null?void 0:L.popularity)||0);case"pop-asc":return(((N=c.anilistData)==null?void 0:N.popularity)||0)-(((F=d.anilistData)==null?void 0:F.popularity)||0);case"score-desc":return(((W=d.anilistData)==null?void 0:W.averageScore)||0)-(((q=c.anilistData)==null?void 0:q.averageScore)||0);case"added-desc":return(d.lastUpdated||0)-(c.lastUpdated||0);case"last-read-desc":return(d.lastRead||0)-(c.lastRead||0);case"rating-desc":{const ue=((X=i.value[xe(c)])==null?void 0:X.rating)||0;return(((ee=i.value[xe(d)])==null?void 0:ee.rating)||0)-ue}case"rating-asc":{const ue=((ce=i.value[xe(c)])==null?void 0:ce.rating)||0,be=((de=i.value[xe(d)])==null?void 0:de.rating)||0;return ue-be}default:return 0}}),B}),y=()=>{t.value=!t.value},h=B=>{window.showMangaDetails&&window.showMangaDetails(B)},p=B=>{g.value=B,chrome.storage.local.set({cardViewSize:B})},v=()=>{u.chapterMin=null,u.chapterMax=null,u.lastUpdated="all",u.newChaptersOnly=!1,u.status="All",u.genre="All",u.format="All",u.demographic="All"},w=()=>{u.chapterMin=u.chapterMin>=100?null:100},T=B=>{window.showMarkerPicker&&window.showMarkerPicker(B)},j=()=>{confirm("Remove duplicate entries?")&&(window.cleanLibraryDuplicates?window.cleanLibraryDuplicates():console.error("Library cleaning function not found"))},O=()=>{confirm("Reset library cache and force fresh sync of all entries?")&&(window.forceSyncLibrary?window.forceSyncLibrary():console.error("Library sync function not found"))},Z=async()=>{const B=S.value.length;if(B!==0&&confirm(`Update all ${B} filtered items to "${n.value}"?`)){const c=r.value.map(d=>S.value.some(R=>R.title===d.title)?{...d,status:n.value,customMarker:null}:d);chrome.storage.local.set({savedEntriesMerged:c},()=>{alert(`Updated ${B} items.`),s.value=!1})}},se=()=>{var B;if(!((B=chrome.runtime)!=null&&B.id)){console.error("Extension context invalidated. Please refresh the page.");return}chrome.storage.local.get(["savedEntriesMerged","customBookmarks","cardViewSize","FamilyFriendlyfeatureEnabled","LibraryCardBordersEnabled","LibraryCardBorderThickness","LibraryHideNoHistory","LibraryGlowEffect","LibraryAnimatedBorders","LibraryStatusIcons","LibraryProgressBars"],async c=>{r.value=c.savedEntriesMerged||[],l.value=c.customBookmarks||[],g.value=c.cardViewSize||"large",o.value=c.FamilyFriendlyfeatureEnabled||!1,f.bordersEnabled=c.LibraryCardBordersEnabled!==!1,f.borderThickness=c.LibraryCardBorderThickness||2,f.hideNoHistory=c.LibraryHideNoHistory===!0,f.useGlowEffect=c.LibraryGlowEffect===!0,f.animatedBorders=c.LibraryAnimatedBorders===!0,f.showStatusIcon=c.LibraryStatusIcons===!0,f.showProgressBar=c.LibraryProgressBars===!0,i.value=await dt()})};return Ie(()=>{console.log("[SavedEntriesTab] Component MOUNTED"),se(),chrome.storage.onChanged.addListener((B,c)=>{c==="local"&&(B.savedEntriesMerged&&(r.value=B.savedEntriesMerged.newValue||[]),B.customBookmarks&&(l.value=B.customBookmarks.newValue||[]),B.LibraryCardBordersEnabled&&(f.bordersEnabled=B.LibraryCardBordersEnabled.newValue))}),window.refreshLibraryData=se,window.addEventListener("library-sync-start",B=>{var c;m.isSyncing=!0,m.total=((c=B.detail)==null?void 0:c.total)||0,m.current=0,m.percentage=0,m.currentTitle="Starting..."}),window.addEventListener("library-sync-progress",B=>{const{current:c,total:d,title:_}=B.detail;m.isSyncing=!0,m.current=c,m.total=d,m.currentTitle=_||"Processing...",d>0&&(m.percentage=Math.round(c/d*100))}),window.addEventListener("library-sync-complete",()=>{m.isSyncing=!1,se()})}),(B,c)=>(C(),x("div",lr,[a("header",{class:"header"},[c[16]||(c[16]=a("div",{class:"header-text"},[a("h1",null,"Saved Entries"),a("p",{class:"subtitle"},"Browse and manage your manga library")],-1)),a("div",{class:"header-actions"},[a("button",{id:"BtnShowStats",class:"btn btn-ghost btn-sm",onClick:y},"ðŸ“Š Stats"),a("button",{onClick:j,class:"btn btn-ghost btn-sm",title:"Remove Duplicates"},"ðŸ§¹ Clean"),a("button",{onClick:O,class:"btn btn-warning-large"},"âš¡Fresh Sync Entries")])]),a("div",cr,[D(Hn,{entries:r.value,"is-visible":t.value},null,8,["entries","is-visible"]),s.value?(C(),x("div",dr,[a("div",ur,[a("span",null,M(S.value.length)+" items filtered",1)]),a("div",gr,[c[18]||(c[18]=a("span",null,"Update All Filtered to:",-1)),ie(a("select",{"onUpdate:modelValue":c[0]||(c[0]=d=>n.value=d),class:"select-field sm"},[...c[17]||(c[17]=[ge('<option value="Reading" data-v-2f0f6999>Reading</option><option value="Completed" data-v-2f0f6999>Completed</option><option value="On Hold" data-v-2f0f6999>On Hold</option><option value="Plan to Read" data-v-2f0f6999>Plan to Read</option><option value="Dropped" data-v-2f0f6999>Dropped</option>',5)])],512),[[we,n.value]]),a("button",{onClick:Z,class:"btn btn-primary btn-sm"},"Apply Update"),a("button",{onClick:c[1]||(c[1]=d=>s.value=!1),class:"btn btn-ghost btn-sm"},"Ã—")])])):J("",!0),a("div",pr,[a("div",mr,[c[20]||(c[20]=a("div",{class:"library-icon"},"ðŸ“š",-1)),a("div",fr,[a("div",vr,[c[19]||(c[19]=a("h2",null,"Your Library",-1)),a("button",{onClick:c[2]||(c[2]=d=>s.value=!s.value),class:te(["btn btn-ghost btn-sm",{active:s.value}])},"Bulk",2),a("button",hr,[(C(),x("svg",yr))])]),a("p",br,M(S.value.length)+" item"+M(S.value.length!==1?"s":""),1)])]),a("div",wr,[ie(a("select",{"onUpdate:modelValue":c[3]||(c[3]=d=>u.sort=d),class:"select-field",style:{width:"140px"}},[...c[21]||(c[21]=[ge('<option value="title-asc" data-v-2f0f6999>A-Z</option><option value="title-desc" data-v-2f0f6999>Z-A</option><option value="pop-desc" data-v-2f0f6999>Most Popular</option><option value="pop-asc" data-v-2f0f6999>Least Popular</option><option value="score-desc" data-v-2f0f6999>Highest Score</option><option value="rating-desc" data-v-2f0f6999>My Rating â†“</option><option value="rating-asc" data-v-2f0f6999>My Rating â†‘</option><option value="added-desc" data-v-2f0f6999>Recently Added</option><option value="last-read-desc" data-v-2f0f6999>Recently Read</option>',9)])],512),[[we,u.sort]]),ie(a("select",{"onUpdate:modelValue":c[4]||(c[4]=d=>u.demographic=d),class:"select-field"},[...c[22]||(c[22]=[ge('<option value="All" data-v-2f0f6999>All Demographics</option><option value="Shonen" data-v-2f0f6999>Shonen</option><option value="Seinen" data-v-2f0f6999>Seinen</option><option value="Shoujo" data-v-2f0f6999>Shoujo</option><option value="Josei" data-v-2f0f6999>Josei</option>',5)])],512),[[we,u.demographic]]),ie(a("select",{"onUpdate:modelValue":c[5]||(c[5]=d=>u.status=d),class:"select-field"},[c[24]||(c[24]=ge('<option value="All" data-v-2f0f6999>All Statuses</option><option value="Reading" data-v-2f0f6999>Reading</option><option value="Completed" data-v-2f0f6999>Completed</option><option value="On Hold" data-v-2f0f6999>On Hold</option><option value="Plan to Read" data-v-2f0f6999>Plan to Read</option><option value="Dropped" data-v-2f0f6999>Dropped</option><option value="HasHistory" data-v-2f0f6999>Has History</option>',7)),l.value.length>0?(C(),x(ae,{key:0},[c[23]||(c[23]=a("option",{disabled:""},"â”€â”€ Custom Markers â”€â”€",-1)),(C(!0),x(ae,null,oe(l.value,d=>(C(),x("option",{key:d.name,value:"marker:"+d.name}," ðŸ“Œ "+M(d.name),9,kr))),128))],64)):J("",!0)],512),[[we,u.status]]),ie(a("select",{"onUpdate:modelValue":c[6]||(c[6]=d=>u.genre=d),class:"select-field"},[c[25]||(c[25]=a("option",{value:"All"},"All Genres",-1)),(C(!0),x(ae,null,oe(b.value,d=>(C(),x("option",{key:d,value:d},M(d),9,Sr))),128))],512),[[we,u.genre]]),ie(a("select",{"onUpdate:modelValue":c[7]||(c[7]=d=>u.format=d),class:"select-field"},[...c[26]||(c[26]=[ge('<option value="All" data-v-2f0f6999>All Formats</option><option value="Manga" data-v-2f0f6999>Manga</option><option value="Manhwa" data-v-2f0f6999>Manhwa</option><option value="Manhua" data-v-2f0f6999>Manhua</option><option value="One Shot" data-v-2f0f6999>One Shot</option><option value="Light Novel" data-v-2f0f6999>Light Novel</option>',6)])],512),[[we,u.format]]),a("div",Cr,[ie(a("input",{type:"text","onUpdate:modelValue":c[8]||(c[8]=d=>u.search=d),placeholder:"Search titles...",class:"input-field"},null,512),[[De,u.search]]),u.search?(C(),x("button",{key:0,onClick:c[9]||(c[9]=d=>u.search=""),class:"search-clear-btn",title:"Clear search"},"Ã—")):J("",!0)]),a("div",xr,[a("button",{onClick:c[10]||(c[10]=d=>p("compact")),class:te(["view-toggle-btn",{active:g.value==="compact"}])},[...c[27]||(c[27]=[a("svg",{class:"icon-svg icon-view-compact"},null,-1)])],2),a("button",{onClick:c[11]||(c[11]=d=>p("large")),class:te(["view-toggle-btn",{active:g.value==="large"}])},[...c[28]||(c[28]=[a("svg",{class:"icon-svg icon-view-large"},null,-1)])],2)])]),a("div",Er,[D(Ge,{label:"Chapters:"},{default:K(()=>[a("div",Mr,[ie(a("input",{type:"number","onUpdate:modelValue":c[12]||(c[12]=d=>u.chapterMin=d),class:"input-field input-sm",placeholder:"Min",style:{width:"70px"}},null,512),[[De,u.chapterMin,void 0,{number:!0}]]),c[29]||(c[29]=a("span",{class:"range-separator"},"â€“",-1)),ie(a("input",{type:"number","onUpdate:modelValue":c[13]||(c[13]=d=>u.chapterMax=d),class:"input-field input-sm",placeholder:"Max",style:{width:"70px"}},null,512),[[De,u.chapterMax,void 0,{number:!0}]])])]),_:1}),D(Ge,{label:"Updated:"},{default:K(()=>[ie(a("select",{"onUpdate:modelValue":c[14]||(c[14]=d=>u.lastUpdated=d),class:"select-field select-sm"},[...c[30]||(c[30]=[a("option",{value:"all"},"Any Time",-1),a("option",{value:"7d"},"Last 7 Days",-1),a("option",{value:"30d"},"Last 30 Days",-1),a("option",{value:"90d"},"Last 90 Days",-1),a("option",{value:"year"},"Last Year",-1)])],512),[[we,u.lastUpdated]])]),_:1}),D(Ge,{"custom-class":"quick-filters"},{default:K(()=>[a("button",{onClick:w,class:te(["btn btn-ghost btn-sm filter-preset-btn",{active:u.chapterMin>=100}])},"ðŸ”¥ Binge-worthy",2),a("button",{onClick:c[15]||(c[15]=d=>u.newChaptersOnly=!u.newChaptersOnly),class:te(["btn btn-ghost btn-sm filter-preset-btn",{active:u.newChaptersOnly}])},"âœ¨ New Chapters",2),a("button",{onClick:v,class:"btn btn-ghost btn-sm filter-preset-btn"},"âœ• Clear")]),_:1})])]),m.isSyncing?(C(),x("div",Br,[a("div",_r,[c[31]||(c[31]=a("span",{class:"sync-label"},[a("span",{class:"sync-spinner"}),V(" Updating Library... ")],-1)),a("span",Lr,M(m.current)+" / "+M(m.total),1)]),a("div",Dr,[a("div",{class:"progress-bar-fill",style:le({width:m.percentage+"%"})},null,4)]),a("div",Ar,M(m.currentTitle),1)])):J("",!0),a("div",{class:te(["manga-grid",{compact:g.value==="compact"}])},[(C(!0),x(ae,null,oe(S.value,d=>{var _;return C(),Qt(tr,{key:d.title+(((_=d.anilistData)==null?void 0:_.id)||""),entry:d,"custom-markers":l.value,"library-settings":f,onClick:h,onMarkerClick:T},null,8,["entry","custom-markers","library-settings"])}),128)),S.value.length===0?(C(),x("div",Ir," No matches found. ")):J("",!0)],2)])]))}},$r=me(Tr,[["__scopeId","data-v-2f0f6999"]]);const Rr={},Pr={id:"tab-import-export",class:"tab-pane fade-in",style:{display:"none"}},Fr={class:"content-grid export-import-grid"},Or={class:"card secondary-bg-card"},Nr={class:"card-header"},Hr={class:"card-icon blue-icon"},zr={class:"icon-svg icon-export",style:{width:"20px",height:"20px"}},Vr={class:"inner-info-card"},Ur={id:"exportDataBtn",class:"btn btn-primary btn-with-icon"},jr={class:"icon-svg icon-export",style:{width:"16px",height:"16px"}},qr={class:"card secondary-bg-card"},Gr={class:"card-header"},Wr={class:"card-icon purple-icon"},Kr={class:"icon-svg icon-import",style:{width:"20px",height:"20px"}},Qr={class:"card-title-group"},Yr={style:{display:"flex","align-items":"center",gap:"8px"}},Zr={class:"info-redirect-btn","data-target":"guide-backup",title:"About Backup & Restore"},Jr={class:"icon-svg icon-info",style:{width:"16px",height:"16px"}},Xr={class:"drop-zone-container",id:"dropZone"},eo={class:"drop-zone-content"},to={class:"drop-zone-icon"},ao={class:"icon-svg icon-file",style:{width:"24px",height:"24px"}},so={class:"import-actions-row"},no={id:"startImportBtn",class:"btn btn-primary btn-with-icon"},ro={class:"icon-svg icon-plus",style:{width:"16px",height:"16px"}},oo={class:"card secondary-bg-card",style:{"grid-column":"1 / -1"}},io={class:"card-header"},lo={class:"card-icon",style:{background:"rgba(255, 103, 64, 0.1)"}},co={style:{width:"20px",height:"20px"},viewBox:"0 0 24 24",fill:"none",stroke:"#FF6740","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},uo={class:"inner-info-card",style:{"flex-direction":"column",gap:"12px"}},go={style:{display:"flex",gap:"10px",width:"100%","align-items":"center"}},po={id:"mdlistImportBtn",class:"btn btn-primary btn-with-icon"},mo={style:{width:"16px",height:"16px"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"};function fo(e,t){return C(),x("div",Pr,[t[20]||(t[20]=a("header",{class:"header"},[a("div",{class:"header-text"},[a("h1",null,"Import & Export"),a("p",{class:"subtitle"},"Manage your manga bookmarks and reading history. Keep your data safe or transfer it to another machine.")])],-1)),a("div",Fr,[a("div",Or,[a("div",Nr,[a("div",Hr,[(C(),x("svg",zr))]),t[0]||(t[0]=ge('<div class="card-title-group" data-v-66a8e448><div style="display:flex;align-items:center;gap:8px;" data-v-66a8e448><h3 data-v-66a8e448>Export Data</h3><button class="info-redirect-btn" data-target="guide-backup" title="About Backup &amp; Restore" data-v-66a8e448><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-66a8e448><circle cx="12" cy="12" r="10" data-v-66a8e448></circle><line x1="12" y1="16" x2="12" y2="12" data-v-66a8e448></line><line x1="12" y1="8" x2="12.01" y2="8" data-v-66a8e448></line></svg></button></div><p class="description compact" data-v-66a8e448>Generate a backup of your library and settings.</p></div>',1))]),t[3]||(t[3]=ge('<div class="export-options" data-v-66a8e448><p class="section-label" data-v-66a8e448>Include in export:</p><div class="export-checkboxes" data-v-66a8e448><label class="export-option" data-v-66a8e448><input type="checkbox" id="exportLibrary" checked data-v-66a8e448><span data-v-66a8e448>ðŸ“š Library Entries</span><span class="export-count" id="exportLibraryCount" data-v-66a8e448>(0)</span></label><label class="export-option" data-v-66a8e448><input type="checkbox" id="exportHistory" checked data-v-66a8e448><span data-v-66a8e448>ðŸ“– Reading History</span><span class="export-count" id="exportHistoryCount" data-v-66a8e448>(0)</span></label><label class="export-option" data-v-66a8e448><input type="checkbox" id="exportSettings" checked data-v-66a8e448><span data-v-66a8e448>âš™ï¸ Settings</span></label><label class="export-option" data-v-66a8e448><input type="checkbox" id="exportPersonalData" checked data-v-66a8e448><span data-v-66a8e448>ðŸ·ï¸ Tags, Notes &amp; Ratings</span><span class="export-count" id="exportPersonalCount" data-v-66a8e448>(0)</span></label><label class="export-option" data-v-66a8e448><input type="checkbox" id="exportCache" data-v-66a8e448><span data-v-66a8e448>ðŸ’¾ AniList Cache</span><span class="export-count" id="exportCacheCount" data-v-66a8e448>(0 KB)</span></label></div></div>',1)),a("div",Vr,[t[2]||(t[2]=a("div",{class:"format-info"},[a("span",{class:"label-info"},[V("Format: "),a("span",{class:"highlight-text"},"JSON")])],-1)),a("button",Ur,[(C(),x("svg",jr)),t[1]||(t[1]=V(" Export Selected ",-1))])]),t[4]||(t[4]=a("div",{class:"card-footer-info"},[a("span",{class:"status-icon"},"â„¹ï¸"),a("span",{class:"status-text-muted"},[V("Last backup: "),a("span",{id:"lastBackupDisplay"},"Never")])],-1))]),a("div",qr,[a("div",Gr,[a("div",Wr,[(C(),x("svg",Kr))]),a("div",Qr,[a("div",Yr,[t[5]||(t[5]=a("h3",null,"Import Data",-1)),a("button",Zr,[(C(),x("svg",Jr))])]),t[6]||(t[6]=a("p",{class:"description compact"},"Restore your data from a previously exported file. ",-1))])]),a("div",Xr,[t[9]||(t[9]=a("input",{type:"file",id:"importDataInput",accept:".json,.xml",style:{display:"none"}},null,-1)),a("div",eo,[a("div",to,[(C(),x("svg",ao))]),t[7]||(t[7]=a("span",{class:"drop-zone-text"},"Click to upload or drag and drop",-1)),t[8]||(t[8]=a("span",{class:"drop-zone-subtext"},"Supports .json or .xml files (max 10MB)",-1))])]),a("div",so,[t[11]||(t[11]=ge('<div class="feature-toggle-wrapper" data-v-66a8e448><div class="toggle-label-group" data-v-66a8e448><span class="toggle-main-label" data-v-66a8e448>Merge with current data</span></div><label class="switch" data-v-66a8e448><input type="checkbox" id="mergeImportToggle" checked data-v-66a8e448><span class="slider round" data-v-66a8e448></span></label></div>',1)),a("button",no,[(C(),x("svg",ro)),t[10]||(t[10]=V(" Start Import ",-1))])]),t[12]||(t[12]=a("div",{class:"caution-banner"},[a("div",{class:"caution-icon"},"âš ï¸"),a("div",{class:"caution-text"},[a("strong",null,"Caution:"),V(' If "Merge with current data" is disabled, all existing bookmarks will be overwritten by the imported file. This action cannot be undone. ')])],-1))]),a("div",oo,[a("div",io,[a("div",lo,[(C(),x("svg",co,[...t[13]||(t[13]=[a("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},null,-1),a("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},null,-1)])]))]),t[14]||(t[14]=a("div",{class:"card-title-group"},[a("div",{style:{display:"flex","align-items":"center",gap:"8px"}},[a("h3",null,"Import from MangaDex List")]),a("p",{class:"description compact"},"Import manga from a public MangaDex reading list (MDList).")],-1))]),a("div",uo,[t[18]||(t[18]=a("div",{class:"format-info",style:{width:"100%"}},[a("span",{class:"label-info"},"Paste MDList URL or ID:"),a("p",{class:"sub-description"},"Example: https://mangadex.org/list/abc123... or just the UUID ")],-1)),a("div",go,[t[17]||(t[17]=a("input",{type:"text",id:"mdlistInput",placeholder:"https://mangadex.org/list/...",class:"input-field",style:{flex:"1"}},null,-1)),a("button",po,[(C(),x("svg",mo,[...t[15]||(t[15]=[a("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},null,-1),a("polyline",{points:"7 10 12 15 17 10"},null,-1),a("line",{x1:"12",y1:"15",x2:"12",y2:"3"},null,-1)])])),t[16]||(t[16]=V(" Import ",-1))])])]),t[19]||(t[19]=a("div",{class:"card-footer-info"},[a("span",{class:"status-icon"},"ðŸ“‹"),a("span",{class:"status-text-muted"},'Imported manga will be added with "Plan to Read" status')],-1))])])])}const vo=me(Rr,[["render",fo],["__scopeId","data-v-66a8e448"]]),ho=["id"],yo={class:"card-header"},bo={key:0,class:"card-icon"},wo={class:"card-body"},ko={class:"guide-text"},he={__name:"GuideCard",props:{id:{type:String,default:""},icon:{type:String,default:""},title:{type:String,required:!0}},setup(e){return(t,s)=>(C(),x("div",{id:e.id,class:"card guide-card"},[a("div",yo,[e.icon?(C(),x("div",bo,M(e.icon),1)):J("",!0),a("h3",null,M(e.title),1)]),a("div",wo,[a("p",ko,[Ye(t.$slots,"default")])])],8,ho))}};const So={id:"tab-about",class:"tab-pane fade-in"},Co={class:"content-grid"},xo={class:"guide-grid"},Eo={__name:"AboutTab",setup(e){return(t,s)=>(C(),x("div",So,[s[11]||(s[11]=a("header",{class:"header"},[a("div",{class:"header-text"},[a("h1",null,"About"),a("p",{class:"subtitle"},"Information, usage guide, and credits.")])],-1)),a("div",Co,[s[9]||(s[9]=ge('<div class="card" data-v-f4c87268><div class="card-body prose" data-v-f4c87268><h2 data-v-f4c87268>MangaFire Bookmark Color Marker</h2><p data-v-f4c87268>A powerful Chrome Extension for <a href="https://mangafire.to/home" target="_blank" data-v-f4c87268>MangaFire.to</a> that enhances your browsing experience by automatically highlighting manga based on your bookmarks and reading history.</p><h3 data-v-f4c87268>ðŸš€ Why Use This?</h3><p data-v-f4c87268>Finding new manga to read can be frustrating when you can&#39;t instantly see what you&#39;ve already read or saved. MangaFire&#39;s default interface doesn&#39;t always make this clear at a glance.</p><p data-v-f4c87268><strong data-v-f4c87268>Bookmark Color Marker</strong> solves this by visually tagging manga covers with colored borders corresponding to their status (e.g., Reading, Completed, Plan to Read) directly on the browsing pages.</p><hr class="divider" data-v-f4c87268><h3 data-v-f4c87268>âœ¨ Features</h3><ul class="feature-list" data-v-f4c87268><li data-v-f4c87268><strong data-v-f4c87268>Automatic Highlighting</strong>: Instantly spot your saved manga with custom colored borders.</li><li data-v-f4c87268><strong data-v-f4c87268>Custom Statuses</strong>: Create your own bookmark categories with unique names, colors, and border styles.</li><li data-v-f4c87268><strong data-v-f4c87268>History Sync</strong>: Optionally highlight manga that are in your reading history but not bookmarked.</li><li data-v-f4c87268><strong data-v-f4c87268>Visual Customization</strong>: Adjust border thickness and style (Solid, Dashed, Dotted, etc.).</li></ul><hr class="divider" data-v-f4c87268><h3 data-v-f4c87268>ðŸ“– How to Use</h3><ol class="usage-list" data-v-f4c87268><li data-v-f4c87268><strong data-v-f4c87268>Sync Data</strong>: Click &#39;Sync Bookmarks Now&#39; in the Settings tab (requires login to MangaFire).</li><li data-v-f4c87268><strong data-v-f4c87268>Browse</strong>: Visit MangaFire.to. Your lists will be highlighted! </li><li data-v-f4c87268><strong data-v-f4c87268>Customize</strong>: Use the Settings tab to add new markers (e.g. &quot;Favorites&quot; in Gold).</li></ol><hr class="divider" data-v-f4c87268><div class="alert-box" data-v-f4c87268><p data-v-f4c87268><strong data-v-f4c87268>Disclaimer:</strong> This is an unofficial extension and is not affiliated with MangaFire.to.</p></div><hr class="divider" data-v-f4c87268><h3 data-v-f4c87268>ðŸ”’ Privacy &amp; Security</h3><p data-v-f4c87268>Your privacy is our priority. This extension is designed with a **privacy-first** approach:</p><ul class="feature-list" data-v-f4c87268><li data-v-f4c87268><strong data-v-f4c87268>Local Storage</strong>: All bookmarked manga, reading history, and settings are stored locally on your device using `chrome.storage.local`.</li><li data-v-f4c87268><strong data-v-f4c87268>No External Servers</strong>: We do not maintain any external servers. Your data never leaves your browser, except when you manually export it or sync with AniList (which goes directly to AniList APIs).</li><li data-v-f4c87268><strong data-v-f4c87268>No Tracking</strong>: There are no trackers, analytics, or behavioral monitoring scripts in this extension.</li><li data-v-f4c87268><strong data-v-f4c87268>Open Permissions</strong>: We only request permissions necessary for the extension to function (e.g., access to `mangafire.to` for highlighting).</li></ul></div></div><div class="section-title-full" data-v-f4c87268><h2 class="section-label" data-v-f4c87268>User Guide &amp; Feature Help</h2></div>',2)),a("div",xo,[D(he,{id:"guide-sync",title:"Auto Sync",icon:"ðŸ”„"},{default:K(()=>[...s[0]||(s[0]=[V(" Automatically retrieves your latest bookmarks from MangaFire. You can set the interval (in days) for how often the background sync should trigger. Requires you to be logged into the site. ",-1)])]),_:1}),D(he,{id:"guide-markers",title:"Custom Markers",icon:"ðŸŽ¨"},{default:K(()=>[...s[1]||(s[1]=[V(' Go beyond default statuses! Create markers like "Favorite", "Top Tier", or "To-Read". You can customize the color and border style (dashed, double, etc.) for each marker. ',-1)])]),_:1}),D(he,{id:"guide-general",title:"General Preferences",icon:"âš™ï¸"},{default:K(()=>[...s[2]||(s[2]=[V(" Toggle ",-1),a("b",null,"Mark Homepage",-1),V(" to see highlights on the front page. Use ",-1),a("b",null,"Sync & Mark Read",-1),V(" to track history. ",-1),a("b",null,"Family Friendly",-1),V(" mode hides entries with adult-only tags. ",-1)])]),_:1}),D(he,{id:"guide-entries",title:"Saved Entries",icon:"ðŸ“š"},{default:K(()=>[...s[3]||(s[3]=[V(" Your local manga library. Synchronize with AniList to get cover images and metadata. Use filters to browse your collection by status, format, or name. ",-1)])]),_:1}),D(he,{id:"guide-backup",title:"Backup & Restore",icon:"ðŸ’¾"},{default:K(()=>[...s[4]||(s[4]=[V(" Always keep a backup! ",-1),a("b",null,"Export",-1),V(" saves your bookmarks, settings, and cache. ",-1),a("b",null,"Import",-1),V(" allows you to restore data or merge backups from different devices. ",-1)])]),_:1}),D(he,{id:"guide-personalization",title:"Personalization",icon:"ðŸŒ™"},{default:K(()=>[...s[5]||(s[5]=[V(" Switch between light and dark modes in the sidebar. You can also adjust the thickness of the manga highlight borders to suit your visual preference. ",-1)])]),_:1}),D(he,{id:"guide-dashboard",title:"Dashboard Settings",icon:"ðŸ“Š"},{default:K(()=>[...s[6]||(s[6]=[V(" Enable or disable the ",-1),a("b",null,"Manga Dashboard",-1),V(" new tab page. Use ",-1),a("b",null,"Packed Layout",-1),V(" to show more detailed statistics if you have many entries. ",-1)])]),_:1}),D(he,{id:"guide-styles",title:"Highlight Styles",icon:"ðŸ–¼ï¸"},{default:K(()=>[...s[7]||(s[7]=[V(" Customize the default appearance of highlights. Choose between ",-1),a("b",null,"Solid, Dashed, Dotted",-1),V(" styles and adjust the ",-1),a("b",null,"Border Thickness",-1),V(" for better visibility. ",-1)])]),_:1}),D(he,{id:"guide-fresh-sync",title:"Fresh Sync",icon:"âš¡"},{default:K(()=>[...s[8]||(s[8]=[V(" Use the ",-1),a("b",null,"Fresh Sync Entries",-1),V(" button in the Saved Entries tab to completely rebuild your library metadata and covers from AniList. ",-1),a("i",null,"Note: This clears the local library cache first.",-1)])]),_:1})]),s[10]||(s[10]=ge('<div class="support-dev-card glass-card" data-v-f4c87268><div class="card-body" data-v-f4c87268><div class="support-header" data-v-f4c87268><div class="support-icon" data-v-f4c87268>â˜•</div><h2 data-v-f4c87268>Support the Development</h2></div><p class="description" data-v-f4c87268>If you enjoy using this extension and want to support its further development, consider buying me a coffee! Your support helps keep the project alive, ad-free, and always evolving with new requested features.</p><div class="support-links-group" data-v-f4c87268><a href="https://www.buymeacoffee.com" target="_blank" class="btn btn-primary support-btn" data-v-f4c87268><span class="btn-icon" data-v-f4c87268>â˜•</span> Buy me a Coffee </a><a href="https://github.com/sponsors/yourprofile" target="_blank" class="btn btn-ghost support-btn" data-v-f4c87268><span class="btn-icon" data-v-f4c87268>ðŸ’–</span> GitHub Sponsor </a></div></div></div>',1))])]))}},Mo=me(Eo,[["__scopeId","data-v-f4c87268"]]);function gt(){return typeof anime<"u"}function Bo(e,t={}){if(!gt())return null;const s={targets:e,strokeDashoffset:[anime.setDashoffset,0],easing:"easeInOutSine",duration:1500,direction:"alternate",loop:!1};return anime({...s,...t})}function _o(e){if(!gt())return Promise.resolve();const t=e.querySelector(".anime-success-checkmark");t&&t.remove(),e.style.position="relative";const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("anime-success-checkmark"),s.setAttribute("width","40"),s.setAttribute("height","40"),s.setAttribute("viewBox","0 0 52 52"),s.style.position="absolute",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)",s.style.zIndex="100",s.style.pointerEvents="none";const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M14.1 27.2l7.1 7.2 16.7-16.8"),n.setAttribute("fill","none"),n.setAttribute("stroke","#4CAF50"),n.setAttribute("stroke-width","4"),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-linejoin","round"),s.appendChild(n),e.appendChild(s),Bo(n,{duration:800,easing:"easeInOutQuad",complete:()=>{anime({targets:s,opacity:0,delay:1e3,duration:500,easing:"linear",complete:()=>s.remove()})}}).finished}function Lo(e){gt()&&(anime.set(e,{scale:.8,opacity:0,rotateX:10}),anime({targets:e,scale:1,opacity:1,rotateX:0,duration:800,easing:"easeOutElastic(1, .6)"}))}const Do={class:"modal-content fade-in"},Ao={class:"modal-layout"},Io={class:"modal-sidebar"},To=["src"],$o={class:"modal-sidebar-info"},Ro={class:"modal-meta-row"},Po={class:"modal-meta-row"},Fo={id:"modalFormatBadge",class:"format-badge"},Oo={class:"modal-meta-row"},No={class:"modal-meta-value",id:"modalPopularity"},Ho={class:"modal-meta-row"},zo={class:"modal-score"},Vo={class:"score-value",id:"modalScoreValue"},Uo={class:"modal-meta-row"},jo={class:"modal-meta-value",id:"modalReleased"},qo={class:"modal-meta-row",id:"modalHistoryRow"},Go={class:"modal-history-actions"},Wo={key:0,id:"modalReadChaptersList",class:"modal-chapters-list"},Ko={key:0,style:{color:"var(--text-secondary)","font-style":"italic"}},Qo={class:"modal-main"},Yo={id:"modalTitle"},Zo={id:"modalSynonyms",class:"modal-synonyms"},Jo={id:"modalGenres",class:"modal-genres"},Xo={id:"modalTags",class:"modal-tags"},ei={class:"modal-personal-section",id:"modalPersonalSection"},ti={class:"modal-personal-row"},ai={class:"modal-personal-content"},si={class:"star-rating-container"},ni=["onClick","onMouseenter"],ri={class:"star-rating-value"},oi={class:"modal-personal-row"},ii={class:"modal-personal-content"},li={class:"tag-input-container"},ci={class:"tag-list"},di={class:"tag-pill-text"},ui=["onClick"],gi={class:"tag-input-wrapper"},pi={key:0,class:"tag-suggestions"},mi=["onClick"],fi={class:"modal-personal-row"},vi={class:"modal-personal-content"},hi={class:"notes-editor-container"},yi={class:"notes-char-count"},bi={class:"modal-description"},wi=["innerHTML"],ki={id:"modalExternalLinks",class:"modal-external-links"},Si=["href"],Ci=["href"],xi={__name:"MangaDetailsModal",setup(e){const t=Q(!1),s=Q({}),n=z(()=>s.value.anilistData),r=Q(!1),l=Q([]),i=Q({tags:[],notes:"",rating:0}),g=Q([]),o=Q(""),m=Q(0),f=Q(null),u=z(()=>n.value?ct(n.value.format,n.value.countryOfOrigin):"Manga"),b=z(()=>{if(!s.value.status)return{};const E=qt(s.value.status,s.value.customMarker,[]);return{backgroundColor:E.badgeBg,color:E.badgeText}}),P=z(()=>{var E,k;return n.value?n.value.bannerImage||((E=n.value.coverImage)==null?void 0:E.extraLarge)||((k=n.value.coverImage)==null?void 0:k.large):null}),S=z(()=>{var E;return P.value?{backgroundImage:`url('${P.value}')`,display:"block",filter:(E=n.value)!=null&&E.bannerImage?"none":"blur(4px) brightness(0.7)"}:{}}),y=z(()=>P.value?{backgroundImage:`url('${P.value}')`,backgroundSize:"cover",backgroundPosition:"center",filter:"blur(100px) saturate(2.5) brightness(0.7) opacity(0.35)",position:"absolute",top:"-10%",left:"-10%",width:"120%",height:"120%",zIndex:"-1",pointerEvents:"none",transform:"translate3d(0, 0, 0)"}:{}),h=z(()=>{var E,k;return n.value&&(((E=n.value.coverImage)==null?void 0:E.large)||((k=n.value.coverImage)==null?void 0:k.medium))||"https://mangadex.org/img/avatar.png"}),p=z(()=>{var k,L;if(!((L=(k=n.value)==null?void 0:k.startDate)!=null&&L.year))return"Unknown";const E=n.value.startDate;return`${E.year}${E.month?"-"+E.month:""}${E.day?"-"+E.day:""}`}),v=z(()=>{var N;if(!((N=n.value)!=null&&N.externalLinks))return[];const E=n.value.externalLinks,k=new Map;E.forEach(F=>{k.has(F.site)||k.set(F.site,[]),k.get(F.site).push(F)});const L=[];return k.forEach(F=>{if(F.length>1){const W=F.find(q=>{const X=(q.language||"").toLowerCase(),ee=(q.url||"").toLowerCase();return X==="english"||ee.includes("/en/")||ee.includes("/english")||ee.includes("language=en")});L.push(W||F[0])}else L.push(F[0])}),L}),w=z(()=>[...l.value].sort((E,k)=>{const L=parseFloat(E.replace(/[^\d.]/g,""))||0;return(parseFloat(k.replace(/[^\d.]/g,""))||0)-L})),T=z(()=>{const E=o.value.toLowerCase().trim();return E?g.value.filter(k=>k.toLowerCase().includes(E)&&!i.value.tags.includes(k)).slice(0,5):[]}),j=async E=>{s.value=E,r.value=!1,t.value=!0,se(),i.value=await ut(E),g.value=await Qe(),setTimeout(()=>{f.value&&(f.value.scrollTop=0);const k=document.querySelector("#mangaDetailsModal .modal-content");k&&Lo(k)},0)},O=()=>{t.value=!1},Z=()=>{r.value=!r.value},se=()=>{var E;(E=chrome.runtime)!=null&&E.id&&chrome.storage.local.get(["savedReadChapters"],k=>{const L=k.savedReadChapters||{},N=s.value.title.toLowerCase(),F=s.value.title.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),W=s.value.mangaSlug?s.value.mangaSlug.split(".")[0]:null,q=Object.keys(L).find(X=>{const ee=X.toLowerCase(),ce=ee.replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");if(X.startsWith("webtoon:")){const de=X.replace("webtoon:","").replace(/-/g," ").toLowerCase(),ue=X.replace("webtoon:","").toLowerCase();if(N.includes(de)||F===ue||de.includes(N))return!0}return ee===N||ce===F||W&&ce===W||W&&ee===W});l.value=q?L[q]:[]})},B=async()=>{var F,W;const E=(F=n.value)==null?void 0:F.chapters;if(!E||E<=0){alert("Unable to mark all as read: Total chapter count is unknown.");return}if(!confirm(`Mark all ${E} chapters as read?`))return;const k=Array.from({length:E},(q,X)=>String(X+1)),L=q=>q.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),N=((W=s.value.mangaSlug)==null?void 0:W.split(".")[0])||L(s.value.title);chrome.storage.local.get(["savedReadChapters"],q=>{const X=q.savedReadChapters||{};X[N]=k,chrome.storage.local.set({savedReadChapters:X},()=>{l.value=k,s.value.readChapters=E,s.value.lastChapterRead=String(E),s.value.lastRead=Date.now(),chrome.storage.local.get(["savedEntriesMerged"],ce=>{const de=ce.savedEntriesMerged||[],ue=de.findIndex(be=>{var Me,Be;return((Me=be.anilistData)==null?void 0:Me.id)===((Be=n.value)==null?void 0:Be.id)||be.mangaSlug===s.value.mangaSlug});ue!==-1&&(de[ue]={...s.value},chrome.storage.local.set({savedEntriesMerged:de},()=>{window.refreshLibraryData&&window.refreshLibraryData()}))});const ee=document.querySelector(".btn-primary.btn-sm");ee&&_o(ee)})})},c=async E=>{i.value.rating=E,await ir(s.value,E)},d=async()=>{await or(s.value,i.value.notes)},_=async()=>{const E=o.value.trim();E&&!i.value.tags.includes(E)&&(i.value.tags.push(E),await nr(s.value,E),g.value=await Qe()),o.value=""},R=E=>{o.value=E,_()},I=async E=>{i.value.tags=i.value.tags.filter(k=>k!==E),await rr(s.value,E)},$=E=>{const k=E*2,L=m.value||i.value.rating;return L>=k?"full":L>=k-1?"half":""},G=E=>{const k=E*2;return(m.value||i.value.rating)>=k-1?"â˜…":"â˜†"};return Ie(()=>{window.showMangaDetails=j}),(E,k)=>{var L,N,F,W,q,X,ee,ce,de,ue,be,Me,Be,pt,mt;return t.value?(C(),x("div",{key:0,id:"mangaDetailsModal",class:"modal-overlay",onClick:Re(O,["self"])},[a("div",Do,[P.value?(C(),x("div",{key:0,class:"modal-ambient-glow",style:le(y.value)},null,4)):J("",!0),a("button",{class:"modal-close",id:"closeMangaDetails",onClick:O},"Ã—"),P.value?(C(),x("div",{key:1,id:"modalBanner",class:"modal-banner",style:le(S.value)},null,4)):J("",!0),a("div",{class:"modal-body",ref_key:"modalBodyRef",ref:f},[a("div",Ao,[a("div",Io,[a("img",{id:"modalCover",src:h.value,alt:"Cover",class:"modal-cover"},null,8,To),a("div",$o,[a("div",Ro,[k[3]||(k[3]=a("span",{class:"modal-meta-label"},"Status",-1)),a("div",{id:"modalStatusBadge",class:"manga-card-status",style:le(b.value)},M(s.value.status),5)]),a("div",Po,[k[4]||(k[4]=a("span",{class:"modal-meta-label"},"Format",-1)),a("div",Fo,M(u.value),1)]),a("div",Oo,[k[5]||(k[5]=a("span",{class:"modal-meta-label"},"Popularity",-1)),a("div",No,M(((N=(L=n.value)==null?void 0:L.popularity)==null?void 0:N.toLocaleString())||"-"),1)]),a("div",Ho,[k[6]||(k[6]=a("span",{class:"modal-meta-label"},"Average Score",-1)),a("div",zo,[a("span",Vo,M((F=n.value)!=null&&F.averageScore?n.value.averageScore+"%":"-"),1)])]),a("div",Uo,[k[7]||(k[7]=a("span",{class:"modal-meta-label"},"Released",-1)),a("div",jo,M(p.value),1)]),a("div",qo,[k[8]||(k[8]=a("span",{class:"modal-meta-label"},"History",-1)),a("div",Go,[a("button",{class:"btn btn-ghost btn-sm",onClick:Z,style:{padding:"2px 8px","font-size":"11px"}},M(r.value?"Hide Chapters":"Show Chapters"),1),a("button",{class:"btn btn-primary btn-sm",onClick:B,style:{padding:"2px 8px","font-size":"11px"},title:"Mark all chapters as read up to total"},"âœ“ Mark All Read")]),r.value?(C(),x("div",Wo,[(C(!0),x(ae,null,oe(w.value,H=>(C(),x("span",{key:H,class:"chapter-pill"},M(H),1))),128)),w.value.length===0?(C(),x("span",Ko," No history found ")):J("",!0)])):J("",!0)])])]),a("div",Qo,[a("h2",Yo,M(((q=(W=n.value)==null?void 0:W.title)==null?void 0:q.english)||((ee=(X=n.value)==null?void 0:X.title)==null?void 0:ee.romaji)||s.value.title),1),a("div",Zo,[(C(!0),x(ae,null,oe((de=(ce=n.value)==null?void 0:ce.synonyms)==null?void 0:de.slice(0,5),H=>(C(),x("span",{key:H,class:"modal-synonym-item"},M(H),1))),128))]),a("div",Jo,[(C(!0),x(ae,null,oe((ue=n.value)==null?void 0:ue.genres,H=>(C(),x("span",{key:H,class:"modal-genre-tag"},M(H),1))),128))]),a("div",Xo,[(C(!0),x(ae,null,oe((Me=(be=n.value)==null?void 0:be.tags)==null?void 0:Me.slice(0,10),H=>(C(),x("span",{key:H.name,class:"modal-tag"},M(H.name),1))),128))]),a("div",ei,[k[12]||(k[12]=a("h4",null,"ðŸ“ Your Data",-1)),a("div",ti,[k[9]||(k[9]=a("span",{class:"modal-personal-label"},"Rating",-1)),a("div",ai,[a("div",si,[(C(),x(ae,null,oe(5,H=>a("span",{key:H,class:te(["star-rating-star",$(H)]),onClick:Te=>c(H*2),onMouseenter:Te=>m.value=H*2,onMouseleave:k[0]||(k[0]=Te=>m.value=0)},M(G(H)),43,ni)),64)),a("span",ri,M(i.value.rating>0?i.value.rating+"/10":""),1)])])]),a("div",oi,[k[10]||(k[10]=a("span",{class:"modal-personal-label"},"Tags",-1)),a("div",ii,[a("div",li,[a("div",ci,[(C(!0),x(ae,null,oe(i.value.tags,H=>(C(),x("span",{key:H,class:"tag-pill"},[a("span",di,M(H),1),a("button",{class:"tag-pill-remove",onClick:Te=>I(H)},"Ã—",8,ui)]))),128))]),a("div",gi,[ie(a("input",{type:"text","onUpdate:modelValue":k[1]||(k[1]=H=>o.value=H),class:"tag-input",placeholder:"Add tag...",onKeydown:Yt(_,["enter"])},null,544),[[De,o.value]]),T.value.length>0?(C(),x("div",pi,[(C(!0),x(ae,null,oe(T.value,H=>(C(),x("div",{key:H,class:"tag-suggestion-item",onClick:Te=>R(H)},M(H),9,mi))),128))])):J("",!0)])])])]),a("div",fi,[k[11]||(k[11]=a("span",{class:"modal-personal-label"},"Notes",-1)),a("div",vi,[a("div",hi,[ie(a("textarea",{"onUpdate:modelValue":k[2]||(k[2]=H=>i.value.notes=H),class:"notes-textarea",placeholder:"Add personal notes...",rows:"3",onBlur:d},null,544),[[De,i.value.notes]]),a("span",yi,M(((Be=i.value.notes)==null?void 0:Be.length)||0)+"/500",1)])])])]),a("div",bi,[k[13]||(k[13]=a("h3",null,"Synopsis",-1)),a("p",{id:"modalDescriptionText",innerHTML:((pt=n.value)==null?void 0:pt.description)||"No description available."},null,8,wi)]),a("div",ki,[(mt=n.value)!=null&&mt.siteUrl?(C(),x("a",{key:0,class:"external-link-btn primary",href:n.value.siteUrl,target:"_blank"},[...k[14]||(k[14]=[a("span",null,"AniList",-1)])],8,Si)):J("",!0),(C(!0),x(ae,null,oe(v.value,H=>(C(),x("a",{key:H.url,class:"external-link-btn",href:H.url,target:"_blank"},M(H.site),9,Ci))),128))])])])],512)])])):J("",!0)}}},Ei=me(xi,[["__scopeId","data-v-d0fdcc08"]]);const Mi={class:"app-container"},Bi={class:"main-content"},_i={__name:"App",setup(e){return Ie(()=>{Ea()}),(t,s)=>(C(),x(ae,null,[a("div",Mi,[D(ss),a("main",Bi,[D(ks),D(Ms),D($r),D(vo),D(Mo)])]),s[0]||(s[0]=a("button",{id:"scrollToTopBtn",class:"scroll-to-top",title:"Go to top"},[a("svg",{class:"icon-svg icon-arrow-up"})],-1)),D(Ei)],64))}};(function(){try{const e=localStorage.getItem("theme"),t=document.documentElement;t.classList.remove("dark-mode","black-mode","neon-mode","light-mode"),e==="light"?t.classList.add("light-mode"):e==="black"?t.classList.add("black-mode"):e==="neon"?t.classList.add("neon-mode"):t.classList.add("dark-mode")}catch(e){console.error("Preloader error:",e)}})();window.anime=U;console.log("[Options] anime loaded:",typeof window.anime);Zt(_i).mount("#app");
