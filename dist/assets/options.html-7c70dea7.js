import{b as S,d as C,e as a,t as B,f as ee,n as ie,g as ue,r as Ke,h as V,i as _,w as K,c as de,j as U,k as Vt,o as Re,l as le,v as Ut,F as te,m as oe,p as X,q as jt,u as qt,s as Ie,x as Gt,y as be,z as _e,A as pt,B as Wt,a as Kt}from"./runtime-dom.esm-bundler-e54c8c43.js";import{b as Qt,f as Yt,a as Zt}from"./mangadex-api-14f9fcdf.js";function Jt(){const e=document.querySelectorAll(".nav-item"),t=document.querySelectorAll(".tab-pane"),s=document.querySelector(".nav-indicator"),n=document.querySelector(".nav-item.active");n&&s&&mt(n,s,!1),e.forEach(r=>{r.addEventListener("click",i=>{i.preventDefault();const l=r.getAttribute("data-tab");if(!l)return;e.forEach(w=>w.classList.remove("active")),r.classList.add("active"),s&&mt(r,s);const g=document.querySelector(".tab-pane.active"),o=document.getElementById(`tab-${l}`);g!==o&&(typeof window.anime<"u"?g?window.anime({targets:g,opacity:0,translateY:-10,duration:200,easing:"easeInQuad",complete:()=>{g.style.display="none",g.classList.remove("active"),vt(o)}}):vt(o):t.forEach(w=>{w.id===`tab-${l}`?(w.style.display="block",setTimeout(()=>w.classList.add("active"),10)):(w.style.display="none",w.classList.remove("active"))}))})})}function mt(e,t,s=!0){const n=document.querySelector(".nav-menu");if(!n)return;const r=e.getBoundingClientRect(),i=n.getBoundingClientRect(),l=r.top-i.top,g=r.height;if(!s){t.style.top=`${l+g/2-15}px`;return}typeof window.anime<"u"?window.anime({targets:t,top:l+g/2-15,height:[30,45,30],duration:500,easing:"easeOutElastic(1, .5)"}):t.style.top=`${l+g/2-15}px`}function vt(e){if(e)if(e.style.display="block",e.style.opacity="0",e.style.transform="translateY(10px)",e.classList.add("active"),typeof window.anime<"u"){window.anime({targets:e,opacity:[0,1],translateY:[10,0],duration:400,easing:"easeOutQuad",delay:50});const t=e.querySelectorAll(".card");t.length>0&&window.anime({targets:t,opacity:[0,1],translateY:[20,0],delay:window.anime.stagger(100,{start:100}),duration:500,easing:"easeOutCubic"})}else e.style.opacity="1",e.style.transform="translateY(0)"}function Xt(){document.querySelectorAll(".info-redirect-btn").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const s=e.getAttribute("data-target"),n=document.querySelector('.nav-item[data-tab="about"]');if(n&&(n.click(),s)){const r=document.getElementById(s);r&&setTimeout(()=>{r.scrollIntoView({behavior:"smooth",block:"center"}),r.classList.add("highlight-pulse"),setTimeout(()=>r.classList.remove("highlight-pulse"),2e3)},300)}})})}function ea(){const e=document.getElementById("scrollToTopBtn"),t=document.querySelector(".main-content");!e||!t||(t.addEventListener("scroll",()=>{t.scrollTop>300?e.classList.add("visible"):e.classList.remove("visible")}),e.addEventListener("click",()=>{t.scrollTo({top:0,behavior:"smooth"})}))}function ta(){const e=[{id:"MarkHomePage",storageKey:"MangaFireHighlightEnabled"},{id:"MangaFireQuickActions",storageKey:"MangaFireQuickActionsEnabled",defaultValue:!0},{id:"MangaFireShowProgress",storageKey:"MangaFireShowProgress",defaultValue:!0},{id:"SyncandMarkRead",storageKey:"SyncandMarkReadfeatureEnabled"},{id:"CustomBookmarks",storageKey:"CustomBookmarksfeatureEnabled"},{id:"AutoSync",storageKey:"AutoSyncfeatureEnabled"},{id:"CustomBorderSize",storageKey:"CustomBorderSizefeatureEnabled"},{id:"FamilyFriendly",storageKey:"FamilyFriendlyfeatureEnabled"},{id:"NewTabDashboard",storageKey:"NewTabDashboardfeatureEnabled"},{id:"DashboardLayoutStyle",storageKey:"DashboardLayoutStylePacked"},{id:"SmartAutoComplete",storageKey:"SmartAutoCompletefeatureEnabled"},{id:"SmartInactivityFade",storageKey:"SmartInactivityFadefeatureEnabled"},{id:"SmartResumeLink",storageKey:"SmartResumeLinkfeatureEnabled"},{id:"MangaDexHighlightEnabled",storageKey:"MangaDexHighlightEnabled",defaultValue:!0},{id:"MangaDexShowProgress",storageKey:"MangaDexShowProgress",defaultValue:!0},{id:"WebtoonsHighlightEnabled",storageKey:"WebtoonsHighlightfeatureEnabled",defaultValue:!0},{id:"WebtoonsShowProgress",storageKey:"WebtoonsShowProgress",defaultValue:!0},{id:"WebtoonsBorderSizeEnabled",storageKey:"WebtoonsBorderSizefeatureEnabled",defaultValue:!1},{id:"NotificationsEnabled",storageKey:"NotificationsfeatureEnabled",defaultValue:!1},{id:"AutoScrollEnabled",storageKey:"autoScrollEnabled",defaultValue:!0},{id:"KeybindsEnabled",storageKey:"keybindsEnabled",defaultValue:!0},{id:"ProgressTrackingEnabled",storageKey:"progressTrackingEnabled",defaultValue:!0}];e.forEach(t=>{const s=document.getElementById(t.id);s&&(chrome.storage.local.get(t.storageKey,n=>{const r=t.defaultValue!==void 0?t.defaultValue:!1;s.checked=n[t.storageKey]!==void 0?n[t.storageKey]:r}),s.addEventListener("change",()=>{const n={};n[t.storageKey]=s.checked,chrome.storage.local.set(n)}))}),chrome.storage.onChanged.addListener((t,s)=>{s==="local"&&e.forEach(n=>{if(t[n.storageKey]){const r=document.getElementById(n.id);r&&(r.checked=t[n.storageKey].newValue)}})})}function aa(){sa()}function sa(){const e=document.getElementById("AutoSyncSetDaysButton"),t=document.getElementById("AutoSyncSetDaysButtonReset"),s=document.getElementById("AutoSyncSetDays"),n=document.getElementById("logContainerSetDays");chrome.storage.local.get("SyncEverySetDate",r=>{s&&(s.value=r.SyncEverySetDate||30)}),e&&e.addEventListener("click",()=>{const r=s.value;chrome.storage.local.set({SyncEverySetDate:r},()=>{n&&(n.textContent=`Saved: Sync every ${r} days.`,setTimeout(()=>n.textContent="",3e3))})}),t&&t.addEventListener("click",()=>{chrome.storage.local.set({SyncEverySetDate:30},()=>{s&&(s.value=30),n&&(n.textContent="Reset to default (30 days).",setTimeout(()=>n.textContent="",3e3))})})}function ae(e){const t=document.getElementById("logContainer");if(!t)return;const s=document.createElement("div");s.textContent=`> ${e}`,t.appendChild(s),t.scrollTop=t.scrollHeight}function na(e){if(!e)return"";const t=document.createElement("textarea");return t.innerHTML=e,t.value}function ra(){const e=document.getElementById("addBookmarkButton"),t=document.getElementById("resetBookmarkButton");e&&e.addEventListener("click",()=>{const s=document.getElementById("bookmarkName").value,n=document.getElementById("colorBookmarks").value,r=document.getElementById("customBorderStyleSelect").value;s&&n?chrome.storage.local.get("customBookmarks",i=>{const l=Array.isArray(i.customBookmarks)?i.customBookmarks:[],g={name:s,color:n,style:r};chrome.storage.local.set({customBookmarks:[...l,g]},()=>{ae(`Added custom marker: ${s}`),document.getElementById("bookmarkName").value="",Te()})}):alert("Please enter a name for the marker.")}),t&&t.addEventListener("click",()=>{confirm("Are you sure you want to remove all custom markers?")&&chrome.storage.local.remove("customBookmarks",()=>{ae("All custom markers removed."),Te()})}),Te()}function Te(){chrome.storage.local.get("customBookmarks",e=>{const t=e.customBookmarks||[],s=document.getElementById("CustomBookmarksContainer");if(s){if(s.innerHTML="",t.length===0){const n=document.createElement("span");n.className="description",n.style.margin="0",n.textContent="No active markers.",s.appendChild(n);return}t.forEach((n,r)=>{const i=document.createElement("div");i.className="marker-pill",i.style.backgroundColor=`${n.color}33`,i.style.border=`2px ${n.style} ${n.color}CC`,i.textContent=n.name,i.title="Click to remove",i.addEventListener("click",()=>{confirm(`Remove marker "${n.name}"?`)&&oa(r)}),s.appendChild(i)})}})}function oa(e){chrome.storage.local.get("customBookmarks",t=>{const s=t.customBookmarks||[];if(e>=0&&e<s.length){const n=s.splice(e,1);chrome.storage.local.set({customBookmarks:s},()=>{ae(`Marker removed: ${n[0].name}`),Te()})}})}const ke={library:{keys:["savedEntriesMerged","userBookmarks"],label:"Library Entries"},history:{keys:["savedReadChapters"],label:"Reading History"},settings:{keys:["CustomBorderSize","MarkHomePagefeatureEnabled","SyncandMarkReadfeatureEnabled","CustomBookmarksfeatureEnabled","AutoSyncfeatureEnabled","CustomBorderSizefeatureEnabled","FamilyFriendlyfeatureEnabled","SmartAutoCompletefeatureEnabled","MangaDexHighlightEnabled","MangaDexShowProgress","WebtoonsHighlightfeatureEnabled","WebtoonsShowProgress","WebtoonsBorderSizefeatureEnabled","WebtoonsBorderSize","MangaFireHighlightEnabled","MangaFireShowProgress","MangaFireQuickActionsEnabled","autoScrollEnabled","keybindsEnabled","progressTrackingEnabled","cardViewSize","theme","LibraryCardBordersEnabled","LibraryCardBorderThickness","LibraryGlowEffect","LibraryAnimatedBorders","LibraryStatusIcons","LibraryProgressBars","SyncLastDate","SyncEverySetDate","customBookmarks"],label:"Settings"},personalData:{keys:["libraryPersonalData","libraryUserTags","libraryFilterPresets"],label:"Tags, Notes & Ratings"},cache:{keys:["anilistCache","mangadexCache"],label:"API Cache"}};function ia(){const e=document.getElementById("exportDataBtn"),t=document.getElementById("startImportBtn"),s=document.getElementById("importDataInput"),n=document.getElementById("dropZone"),r=document.getElementById("mergeImportToggle"),i=document.getElementById("lastBackupDisplay"),l=document.getElementById("exportLibrary"),g=document.getElementById("exportHistory"),o=document.getElementById("exportSettings"),w=document.getElementById("exportPersonalData"),d=document.getElementById("exportCache"),E=document.getElementById("exportLibraryCount"),T=document.getElementById("exportHistoryCount"),O=document.getElementById("exportPersonalCount"),x=document.getElementById("exportCacheCount"),b=()=>{chrome.storage.local.get(null,p=>{const D=Array.isArray(p.savedEntriesMerged)?p.savedEntriesMerged.length:Array.isArray(p.userBookmarks)?p.userBookmarks.length:0;E&&(E.textContent=`(${D})`);const P=p.savedReadChapters?Object.keys(p.savedReadChapters).length:0;T&&(T.textContent=`(${P} titles)`);const I=p.libraryPersonalData?Object.keys(p.libraryPersonalData).length:0;O&&(O.textContent=`(${I})`);const R=f(p);x&&(x.textContent=`(${u(R)})`)})},f=p=>{let D=0;return p.anilistCache&&(D+=JSON.stringify(p.anilistCache).length),p.mangadexCache&&(D+=JSON.stringify(p.mangadexCache).length),D},u=p=>p<1024?`${p} B`:p<1024*1024?`${(p/1024).toFixed(1)} KB`:`${(p/(1024*1024)).toFixed(1)} MB`,v=()=>{chrome.storage.local.get("LastBackupDate",p=>{if(i)if(p.LastBackupDate){const D=new Date(p.LastBackupDate);i.textContent=D.toLocaleString()}else i.textContent="Never"})};v(),b();const h=()=>{const p=["LastBackupDate"];if(l!=null&&l.checked&&p.push(...ke.library.keys),g!=null&&g.checked&&p.push(...ke.history.keys),o!=null&&o.checked&&p.push(...ke.settings.keys),w!=null&&w.checked&&p.push(...ke.personalData.keys),d!=null&&d.checked&&p.push(...ke.cache.keys),p.length===1){alert("Please select at least one data category to export.");return}chrome.storage.local.get(p,D=>{D._exportMeta={version:"3.9.0",exportDate:new Date().toISOString(),categories:{library:(l==null?void 0:l.checked)||!1,history:(g==null?void 0:g.checked)||!1,settings:(o==null?void 0:o.checked)||!1,personalData:(w==null?void 0:w.checked)||!1,cache:(d==null?void 0:d.checked)||!1}};const P=new Blob([JSON.stringify(D,null,2)],{type:"application/json"}),I=URL.createObjectURL(P),R=document.createElement("a");R.href=I,R.download=`mangafire_backup_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(I);const k=Date.now();chrome.storage.local.set({LastBackupDate:k},()=>{v(),ae("Data exported successfully.")})})};e&&e.addEventListener("click",h);const $=p=>{if(!p)return;const D=p.type==="application/json"||p.name.endsWith(".json"),P=p.type==="text/xml"||p.type==="application/xml"||p.name.endsWith(".xml");if(!D&&!P){alert("Please select a valid JSON or XML file.");return}const I=new FileReader;I.onload=R=>{try{let k;if(D?k=JSON.parse(R.target.result):P&&(k=H(R.target.result)),!k)throw new Error("Failed to parse data");j(k,r==null?void 0:r.checked)}catch(k){console.error("Import error:",k),alert("Failed to parse file. Please ensure it is a valid backup or MyAnimeList XML export.")}},I.readAsText(p)},j=(p,D)=>{const P={libraryEntries:Array.isArray(p.savedEntriesMerged)?p.savedEntriesMerged.length:Array.isArray(p.userBookmarks)?p.userBookmarks.length:0,historyTitles:p.savedReadChapters?Object.keys(p.savedReadChapters).length:0,personalData:p.libraryPersonalData?Object.keys(p.libraryPersonalData).length:0,hasSettings:Object.keys(p).some(R=>ke.settings.keys.includes(R)),hasCache:!!p.anilistCache||!!p.mangadexCache};let I=`üìÅ Import Preview

`;I+=`üìö Library: ${P.libraryEntries} entries
`,I+=`üìñ History: ${P.historyTitles} titles
`,I+=`üè∑Ô∏è Personal Data: ${P.personalData} entries
`,I+=`‚öôÔ∏è Settings: ${P.hasSettings?"Included":"Not included"}
`,I+=`üíæ Cache: ${P.hasCache?"Included":"Not included"}

`,I+=`Mode: ${D?"MERGE (keeps existing data)":"OVERWRITE (replaces all data)"}`,D||(I+=`

‚ö†Ô∏è WARNING: This will delete all your current data!`),confirm(I+`

Proceed with import?`)&&(D?M(p):Q(p))},H=p=>{const I=new DOMParser().parseFromString(p,"text/xml").querySelectorAll("manga");if(I.length===0)throw new Error("No manga entries found in XML.");return{userBookmarks:Array.from(I).map(k=>{const y=k.querySelector("manga_title"),L=k.querySelector("my_status"),F=k.querySelector("my_read_chapters");let N=y?na(y.textContent.trim()):"Unknown Title",q=L?L.textContent.trim():"Reading",G=F&&parseInt(F.textContent.trim())||0;return q==="On-Hold"&&(q="On Hold"),{title:N,status:q,readChapters:G}})}},Q=p=>{delete p._exportMeta,chrome.storage.local.clear(()=>{chrome.storage.local.set(p,()=>{ae("Data imported (Overwrite) successfully."),alert("‚úÖ Import successful! The page will now reload."),location.reload()})})},M=p=>{delete p._exportMeta,chrome.storage.local.get(null,D=>{const P={...D,...p};if(p.userBookmarks&&D.userBookmarks){const I=new Map;D.userBookmarks.forEach(R=>I.set(R.title.toLowerCase(),R)),p.userBookmarks.forEach(R=>I.set(R.title.toLowerCase(),R)),P.userBookmarks=Array.from(I.values())}if(p.savedEntriesMerged&&D.savedEntriesMerged){const I=new Map;D.savedEntriesMerged.forEach(R=>I.set(R.title.toLowerCase(),R)),p.savedEntriesMerged.forEach(R=>I.set(R.title.toLowerCase(),R)),P.savedEntriesMerged=Array.from(I.values())}if(p.customBookmarks&&D.customBookmarks){const I=new Map;D.customBookmarks.forEach(R=>I.set(R.name.toLowerCase(),R)),p.customBookmarks.forEach(R=>I.set(R.name.toLowerCase(),R)),P.customBookmarks=Array.from(I.values())}if(p.savedReadChapters&&D.savedReadChapters){const I={...D.savedReadChapters};Object.entries(p.savedReadChapters).forEach(([R,k])=>{I[R]?I[R]=[...new Set([...I[R],...k])]:I[R]=k}),P.savedReadChapters=I}p.anilistCache&&D.anilistCache&&(P.anilistCache={...D.anilistCache,...p.anilistCache}),p.libraryPersonalData&&D.libraryPersonalData&&(P.libraryPersonalData={...D.libraryPersonalData,...p.libraryPersonalData}),chrome.storage.local.set(P,()=>{ae("Data imported (Merge) successfully."),alert("‚úÖ Import successful! New data has been merged."),location.reload()})})};n&&(n.addEventListener("click",()=>s==null?void 0:s.click()),n.addEventListener("dragover",p=>{p.preventDefault(),n.classList.add("drag-over")}),n.addEventListener("dragleave",()=>{n.classList.remove("drag-over")}),n.addEventListener("drop",p=>{p.preventDefault(),n.classList.remove("drag-over"),p.dataTransfer.files.length>0&&$(p.dataTransfer.files[0])})),t&&t.addEventListener("click",()=>s==null?void 0:s.click()),s&&s.addEventListener("change",p=>{p.target.files.length>0&&$(p.target.files[0])});const c=document.getElementById("mdlistImportBtn"),m=document.getElementById("mdlistInput");c&&m&&c.addEventListener("click",async()=>{const p=m.value.trim();if(!p){alert("Please enter a MangaDex list URL or ID.");return}c.disabled=!0,c.textContent="Importing...";try{const D=await Qt(p);if(!D.success){alert(`Import failed: ${D.error}`);return}if(D.manga.length===0){alert("No manga found in this list.");return}chrome.storage.local.get(["savedEntriesMerged"],P=>{let I=Array.isArray(P.savedEntriesMerged)?P.savedEntriesMerged:[];const R=new Set(I.map(F=>F.title.toLowerCase())),k=new Set(I.filter(F=>{var N;return(N=F.anilistData)==null?void 0:N.mangadexId}).map(F=>F.anilistData.mangadexId));let y=0,L=0;D.manga.forEach(F=>{var G,W;const N=((G=F.title)==null?void 0:G.english)||((W=F.title)==null?void 0:W.romaji)||"Unknown",q=F.mangadexId;if(R.has(N.toLowerCase())||k.has(q)){L++;return}I.push({title:N,status:"Plan to Read",readChapters:0,anilistData:F,customMarker:null,lastUpdated:Date.now(),importedFrom:"MDList"}),y++}),chrome.storage.local.set({savedEntriesMerged:I},()=>{alert(`‚úÖ Imported ${y} manga from "${D.listName}". ${L} duplicates skipped.`),m.value="",location.reload()})})}catch(D){console.error("MDList import error:",D),alert(`Import error: ${D.message}`)}finally{c.disabled=!1,c.textContent="Import"}})}let Se=[],je=!1;function la(){chrome.storage.local.get(["savedEntriesMerged"],e=>{Se=Array.isArray(e.savedEntriesMerged)?e.savedEntriesMerged:[],je||ca()}),chrome.storage.onChanged.addListener((e,t)=>{t==="local"&&e.savedEntriesMerged&&(Se=e.savedEntriesMerged.newValue||[])}),window.cleanLibraryDuplicates=da}function da(){const e=new Map;let t=0;if(Se.forEach(s=>{const n=s.title.toLowerCase().trim(),r=e.get(n);if(!r)e.set(n,s);else{const i=parseInt(r.readChapters)||0;((parseInt(s.readChapters)||0)>i||!r.anilistData&&s.anilistData)&&e.set(n,s),t++}}),t>0){const s=Array.from(e.values());chrome.storage.local.set({savedEntriesMerged:s},()=>{console.log(`Library cleaned: removed ${t} duplicates.`),window.refreshLibraryData&&window.refreshLibraryData()})}}async function ca(){const e=Se.filter(t=>!t.anilistData||t.anilistData.id&&!t.anilistData.chapters);if(e.length!==0){je=!0,console.log(`Starting background fetch for ${e.length} entries...`);try{for(let t=0;t<e.length;t++){const s=e[t];let n=await Yt(s.title);n||(n=await Zt(s.title)),n&&(s.anilistData=n,(t+1)%5===0&&await chrome.storage.local.set({savedEntriesMerged:Se})),await new Promise(r=>setTimeout(r,500))}await chrome.storage.local.set({savedEntriesMerged:Se})}catch(t){console.error("Error in background metadata fetch:",t)}finally{je=!1,console.log("Background fetch completed.")}}}const He=[{name:"YouTube",url:"https://www.youtube.com"},{name:"ChatGPT",url:"https://chat.openai.com"},{name:"Spotify",url:"https://open.spotify.com"},{name:"Gmail",url:"https://mail.google.com"},{name:"Discord",url:"https://discord.com"}];function ua(){const e=document.getElementById("QuickAccessContainer"),t=document.getElementById("SaveQuickAccessButton"),s=document.getElementById("ResetQuickAccessButton"),n=document.getElementById("logContainerQuickAccess");e&&(chrome.storage.local.get("QuickAccessShortcuts",r=>{const i=r.QuickAccessShortcuts||He;ft(e,i)}),t&&t.addEventListener("click",()=>{const r=[];e.querySelectorAll(".shortcut-input-row").forEach(l=>{const g=l.querySelector(".shortcut-name-input"),o=l.querySelector(".shortcut-url-input");g&&o&&o.value.trim()&&r.push({name:g.value.trim()||"Link",url:o.value.trim()})}),chrome.storage.local.set({QuickAccessShortcuts:r},()=>{n&&(n.textContent="Saved: Quick Access shortcuts updated.",setTimeout(()=>n.textContent="",3e3))})}),s&&s.addEventListener("click",()=>{chrome.storage.local.set({QuickAccessShortcuts:He},()=>{ft(e,He),n&&(n.textContent="Reset to default shortcuts.",setTimeout(()=>n.textContent="",3e3))})}))}function ft(e,t){e.innerHTML="";for(let s=0;s<5;s++){const n=t[s]||{name:"",url:""},r=document.createElement("div");r.className="input-group-row shortcut-input-row",r.style.marginBottom="10px",r.innerHTML=`
            <div class="input-wrapper flex-grow">
                <input type="text" placeholder="Name (e.g. YouTube)" class="input-field shortcut-name-input" value="${n.name}">
            </div>
            <div class="input-wrapper flex-grow-large">
                <input type="text" placeholder="URL (https://...)" class="input-field shortcut-url-input" value="${n.url}">
            </div>
        `,e.appendChild(r)}}let ze={bg:"#0b1437",sidebar:"#111c44",accent:"#7551FF",text:"#ffffff"};function ga(){pa(),ma(),fa(),ha()}function pa(){const e=document.querySelectorAll(".theme-preview-card");e.forEach(t=>{t.addEventListener("click",()=>{console.log("button clicked");const s=t.getAttribute("data-tab")||t.getAttribute("data-theme");Qe(s),e.forEach(n=>n.classList.remove("active")),t.classList.add("active")})})}function Qe(e){const t=document.documentElement;t.classList.remove("dark-mode","black-mode","neon-mode","light-mode","glassy-mode"),e==="light"?t.classList.add("light-mode"):e==="glassy"?t.classList.add("glassy-mode"):t.classList.add(`${e}-mode`),va(),localStorage.setItem("theme",e),chrome.storage.local.set({theme:e,isCustomTheme:!1}),ae(`Theme switched to ${e}`)}function ma(){const e=document.getElementById("ApplyCustomThemeBtn"),t=document.getElementById("ResetThemeBtn"),s=document.getElementById("themeColorBg"),n=document.getElementById("themeColorSidebar"),r=document.getElementById("themeColorAccent"),i=document.getElementById("themeColorText");e==null||e.addEventListener("click",()=>{ze={bg:s.value,sidebar:n.value,accent:r.value,text:i.value},Ct(ze),document.querySelectorAll(".theme-preview-card").forEach(l=>l.classList.remove("active")),localStorage.setItem("theme","custom"),chrome.storage.local.set({isCustomTheme:!0,customThemeData:ze}),ae("Custom theme applied and saved.")}),t==null||t.addEventListener("click",()=>{confirm("Reset to default Cloudy Dark theme?")&&(Qe("dark"),s.value="#0b1437",n.value="#111c44",r.value="#7551FF",i.value="#ffffff",document.querySelectorAll(".theme-preview-card").forEach(l=>{l.getAttribute("data-theme")==="dark"&&l.classList.add("active")}))})}function Ct(e){if(!e)return;const t=document.documentElement;t.style.setProperty("--bg-body",e.bg),t.style.setProperty("--bg-card",e.bg),t.style.setProperty("--bg-sidebar",e.sidebar),t.style.setProperty("--accent-primary",e.accent),t.style.setProperty("--primary",e.accent),t.style.setProperty("--text-primary",e.text),t.style.setProperty("--text-white",e.text);const s=ht(e.bg),n=ht(e.text);t.style.setProperty("--glass-bg",`rgba(${s}, 0.4)`),t.style.setProperty("--glass-border",`rgba(${n}, 0.1)`),t.style.setProperty("--border-color",`rgba(${n}, 0.1)`),t.style.setProperty("--input-bg",`rgba(${s}, 0.2)`),t.style.setProperty("--input-border",`rgba(${n}, 0.1)`),document.body.style.backgroundColor=e.bg,ae(`Custom theme applied: BG=${e.bg}, Sidebar=${e.sidebar}`)}function va(){const e=document.documentElement;["--bg-body","--bg-card","--bg-sidebar","--accent-primary","--primary","--text-primary","--text-white","--glass-bg","--glass-border","--border-color","--input-bg","--input-border"].forEach(s=>e.style.removeProperty(s)),document.body.style.backgroundColor=""}function fa(){const e=document.getElementById("GlobalBorderSize"),t=document.getElementById("globalRangeValue"),s=document.getElementById("GlobalBorderStyle");e==null||e.addEventListener("input",i=>{const l=i.target.value;t&&(t.textContent=`${l}px`),chrome.storage.local.set({CustomBorderSize:l})}),s==null||s.addEventListener("change",i=>{chrome.storage.local.set({GlobalBorderStyle:i.target.value})});const n=document.getElementById("WebtoonsBorderSizeSlider"),r=document.getElementById("WebtoonsBorderSizeValue");n==null||n.addEventListener("input",i=>{const l=i.target.value;r&&(r.textContent=`${l}px`),chrome.storage.local.set({WebtoonsBorderSize:parseInt(l,10)})})}function ha(){chrome.storage.local.get(["theme","isCustomTheme","customThemeData","CustomBorderSize","GlobalBorderStyle","WebtoonsBorderSize"],e=>{if(e.isCustomTheme&&e.customThemeData)Ct(e.customThemeData),document.getElementById("themeColorBg")&&(document.getElementById("themeColorBg").value=e.customThemeData.bg,document.getElementById("themeColorSidebar").value=e.customThemeData.sidebar,document.getElementById("themeColorAccent").value=e.customThemeData.accent,document.getElementById("themeColorText").value=e.customThemeData.text),document.querySelectorAll(".theme-preview-card").forEach(w=>w.classList.remove("active"));else{const w=e.theme||"dark";Qe(w),document.querySelectorAll(".theme-preview-card").forEach(d=>{d.getAttribute("data-theme")===w?d.classList.add("active"):d.classList.remove("active")})}const t=e.CustomBorderSize||4,s=e.GlobalBorderStyle||"solid",n=document.getElementById("GlobalBorderSize"),r=document.getElementById("globalRangeValue"),i=document.getElementById("GlobalBorderStyle");n&&(n.value=t),r&&(r.textContent=`${t}px`),i&&(i.value=s);const l=e.WebtoonsBorderSize||4,g=document.getElementById("WebtoonsBorderSizeSlider"),o=document.getElementById("WebtoonsBorderSizeValue");g&&(g.value=l),o&&(o.textContent=`${l}px`)})}function ht(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?`${parseInt(t[1],16)}, ${parseInt(t[2],16)}, ${parseInt(t[3],16)}`:"11, 20, 55"}class Ye{constructor(t){!t||t.tagName!=="SELECT"||(this.select=t,this.container=null,this.trigger=null,this.dropdown=null,this.isOpen=!1,this.init())}init(){this.buildUI(),this.addEventListeners(),this.observeChanges()}buildUI(){this.container=document.createElement("div"),this.container.className="custom-select-container",this.select.id&&(this.container.id=`${this.select.id}-crystal`);const t=this.select.parentNode,s=this.select.nextSibling;this.select.style.position="absolute",this.select.style.opacity="0",this.select.style.pointerEvents="none",this.select.style.width="1px",this.select.style.height="1px",t.insertBefore(this.container,s),this.container.appendChild(this.select),this.trigger=document.createElement("div"),this.trigger.className="crystal-select-trigger";const n=document.createElement("span");n.className="trigger-text",this.trigger.appendChild(n);const r=document.createElement("div");r.className="select-arrow",r.innerHTML='<svg viewBox="0 0 10 6"><path d="M1 1L5 5L9 1" fill="none" stroke="currentColor"/></svg>',this.trigger.appendChild(r),this.container.appendChild(this.trigger),this.dropdown=document.createElement("div"),this.dropdown.className="crystal-dropdown";const i=document.createElement("div");i.className="crystal-options-list",this.dropdown.appendChild(i),this.container.appendChild(this.dropdown),this.syncOptions()}syncOptions(){const t=this.dropdown.querySelector(".crystal-options-list"),s=this.trigger.querySelector(".trigger-text");t.innerHTML="";const n=this.select.options[this.select.selectedIndex];s.textContent=n?n.textContent:"Select...",Array.from(this.select.options).forEach((r,i)=>{const l=document.createElement("div");if(l.className="crystal-option",r.selected&&l.classList.add("is-selected"),r.disabled&&l.classList.add("is-disabled"),r.style.color){const o=document.createElement("span");o.className="marker-indicator",o.style.backgroundColor=r.style.color,l.appendChild(o)}const g=document.createElement("span");g.textContent=r.textContent,l.appendChild(g),r.disabled||(l.onclick=o=>{o.stopPropagation(),this.setValue(r.value)}),t.appendChild(l)})}setValue(t){this.select.value=t,this.select.dispatchEvent(new Event("change",{bubbles:!0})),this.syncOptions(),this.close()}addEventListeners(){this.trigger.addEventListener("click",t=>{t.stopPropagation(),this.toggle()}),document.addEventListener("click",t=>{this.isOpen&&!this.container.contains(t.target)&&this.close()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.isOpen&&this.close()})}toggle(){this.isOpen?this.close():this.open()}open(){document.querySelectorAll(".custom-select-container.is-open").forEach(t=>{t!==this.container&&t.classList.remove("is-open")}),this.isOpen=!0,this.container.classList.add("is-open"),window.anime&&window.anime({targets:this.dropdown.querySelectorAll(".crystal-option"),opacity:[0,1],translateX:[-10,0],delay:window.anime.stagger(20),duration:400,easing:"easeOutQuart"})}close(){this.isOpen=!1,this.container.classList.remove("is-open")}observeChanges(){new MutationObserver(()=>this.syncOptions()).observe(this.select,{childList:!0,subtree:!0,attributes:!0})}static autoInit(){const t=n=>{n.querySelectorAll("select").forEach(r=>{!r.closest(".custom-select-container")&&!r.classList.contains("no-crystal")&&new Ye(r)})};t(document),new MutationObserver(n=>{n.forEach(r=>{r.addedNodes.forEach(i=>{i.nodeType===1&&(i.tagName==="SELECT"?t(i.parentNode):t(i))})})}).observe(document.body,{childList:!0,subtree:!0})}}function ya(){Jt(),Xt(),ea(),ta(),aa(),ra(),ia(),la(),ua(),ga(),typeof anime<"u"&&anime({targets:".tab-pane.active .card",opacity:[0,1],translateY:[20,0],delay:anime.stagger(100),duration:800,easing:"easeOutExpo"});const e=document.getElementById("sendMessageBtnSyncBookmarks");e&&e.addEventListener("click",()=>{ae("Requesting bookmark sync..."),chrome.runtime.sendMessage({type:"scrapeBookmarks",value:1},s=>{chrome.runtime.lastError?ae("Error: "+chrome.runtime.lastError.message):ae("Sync process initiated...")})});const t=document.getElementById("ClearReadingHistoryBtn");t&&t.addEventListener("click",()=>{chrome.storage.local.remove("userbookmarkshistory",()=>{ae("Reading history cleared."),alert("Reading history cleared!")})});try{Ye.autoInit(),ae("CrystalSelect auto-initialization enabled.")}catch(s){console.error("CrystalSelect Error:",s)}}chrome.runtime.onMessage.addListener(e=>{e.type==="log"&&ae(e.text)});const pe=(e,t)=>{const s=e.__vccOpts||e;for(const[n,r]of t)s[n]=r;return s},ba={class:"toggle-label-group"},ka=["for"],wa={key:0,class:"toggle-sub-label"},Sa=["id","checked"],Ca={__name:"SwitchControl",props:{id:{type:String,required:!0},label:{type:String,required:!0},subLabel:{type:String,default:""},modelValue:{type:Boolean,default:!1},marginTop:{type:Boolean,default:!1},small:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e){return(t,s)=>(S(),C("div",{class:ie(["feature-toggle-wrapper",{"mt-10":e.marginTop}])},[a("div",ba,[a("label",{for:e.id,class:"toggle-main-label"},B(e.label),9,ka),e.subLabel?(S(),C("span",wa,B(e.subLabel),1)):ee("",!0)]),a("label",{class:ie(["switch",{"small-switch":e.small}])},[a("input",{type:"checkbox",id:e.id,checked:e.modelValue,onChange:s[0]||(s[0]=n=>t.$emit("update:modelValue",n.target.checked))},null,40,Sa),s[1]||(s[1]=a("span",{class:"slider round"},null,-1))],2)],2))}},Y=pe(Ca,[["__scopeId","data-v-7cca3c62"]]),xa={class:"card-header"},Ea=["data-target","title"],Ba={class:"icon-svg icon-info",style:{width:"16px",height:"16px"}},Ma={class:"card-body"},re={__name:"SettingsCard",props:{title:{type:String,required:!0},icon:{type:String,default:"‚öôÔ∏è"},guideTarget:{type:String,default:""},guideTitle:{type:String,default:"More Info"},fullHeight:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1},iconBg:{type:String,default:""},iconColor:{type:String,default:""}},setup(e){const t=e,s=V(()=>{const n={};return t.iconBg&&(n.background=t.iconBg),t.iconColor&&(n.color=t.iconColor),n});return(n,r)=>(S(),C("div",{class:ie(["card",{"full-height":e.fullHeight,"highlight-card":e.highlight}])},[a("div",xa,[a("div",{class:"card-icon",style:ue(s.value)},B(e.icon),5),a("h3",null,B(e.title),1),e.guideTarget?(S(),C("button",{key:0,class:"info-redirect-btn","data-target":e.guideTarget,title:e.guideTitle},[(S(),C("svg",Ba))],8,Ea)):ee("",!0)]),a("div",Ma,[Ke(n.$slots,"default")])],2))}};const _a={id:"tab-settings",class:"tab-pane active fade-in"},Da={class:"content-grid"},La={class:"input-group-row"},Aa={class:"cards-row"},Ia={class:"cards-row"},Ta={class:"cards-row"},$a={class:"cards-row"},Ra={__name:"GeneralTab",setup(e){return(t,s)=>(S(),C("div",_a,[s[9]||(s[9]=a("header",{class:"header"},[a("div",{class:"header-text"},[a("h1",null,"Settings"),a("p",{class:"subtitle"},"Configure your custom bookmarks for MangaFire.to, manage sync, and display preferences.")])],-1)),a("div",Da,[_(re,{title:"General Preferences",icon:"‚öôÔ∏è","guide-target":"guide-general"},{default:K(()=>[a("div",La,[_(Y,{id:"MarkHomePage",label:"Mark Homepage","sub-label":"Highlight manga on the homepage"}),_(Y,{id:"MangaFireQuickActions",label:"Quick Actions Overlay","sub-label":"Show 'Continue', 'Status', 'Rating' on hover"}),_(Y,{id:"MangaFireShowProgress",label:"Show Reading Badges","sub-label":"Display 'Ch. X/Y' on manga cards"}),_(Y,{id:"SyncandMarkRead",label:"Sync & Mark Read","sub-label":"Sync history and mark as read"}),_(Y,{id:"FamilyFriendly",label:"Family Friendly","sub-label":"Hide Ecchi/Adult content"}),s[0]||(s[0]=a("div",{class:"feature-toggle-wrapper"},[a("div",{class:"toggle-label-group"},[a("label",{class:"toggle-main-label"},"Reading History"),a("span",{class:"toggle-sub-label"},"Stored dashboard URLs")]),a("button",{id:"ClearReadingHistoryBtn",class:"btn btn-ghost btn-sm",style:{"margin-top":"5px"}}," Clear History ")],-1))])]),_:1}),a("div",Aa,[_(re,{title:"Smart Automation",icon:"‚ö°","icon-bg":"rgba(79, 70, 229, 0.1)","icon-color":"var(--primary)","guide-target":"guide-general","full-height":""},{default:K(()=>[_(Y,{id:"SmartAutoComplete",label:"Smart Auto-Complete","sub-label":"Mark as 'Completed' when reaching last chapter"}),_(Y,{id:"SmartInactivityFade",label:"Inactivity Dimming","sub-label":"Dim 'Reading' manga untouched for 30+ days","margin-top":""}),_(Y,{id:"SmartResumeLink",label:"Smart Resume","sub-label":"Dashboard opens next chapter (Predictive)","margin-top":""}),_(Y,{id:"NotificationsEnabled",label:"New Chapter Alerts","sub-label":"Browser notifications for new releases","margin-top":""})]),_:1}),_(re,{title:"Reader Enhancements",icon:"üìö","icon-bg":"rgba(16, 185, 129, 0.1)","icon-color":"#10b981","guide-target":"guide-reader","full-height":""},{default:K(()=>[_(Y,{id:"AutoScrollEnabled",label:"Auto-Scroll Panel","sub-label":"Show floating auto-scroll controls on reader pages"}),_(Y,{id:"KeybindsEnabled",label:"Keyboard Shortcuts","sub-label":"Arrow keys, Space (auto-scroll), F (fullscreen)","margin-top":""}),_(Y,{id:"ProgressTrackingEnabled",label:"Auto-Save Progress","sub-label":"Automatically save chapter progress while reading","margin-top":""})]),_:1})]),a("div",Ia,[_(re,{title:"MangaDex Highlighting",icon:"üìñ","icon-bg":"rgba(255, 103, 64, 0.1)","icon-color":"#FF6740","guide-target":"guide-general","full-height":""},{default:K(()=>[_(Y,{id:"MangaDexHighlightEnabled",label:"Enable MangaDex Highlighting","sub-label":"Show colored borders on mangadex.org"}),_(Y,{id:"MangaDexShowProgress",label:"Show Reading Progress","sub-label":"Display 'Ch. X/Y' on saved manga cards","margin-top":""})]),_:1}),_(re,{title:"Webtoons Highlighting",icon:"üì∫","icon-bg":"rgba(0, 220, 100, 0.1)","icon-color":"#00DC64","guide-target":"guide-general","full-height":""},{default:K(()=>[_(Y,{id:"WebtoonsHighlightEnabled",label:"Enable Webtoons Highlighting","sub-label":"Show colored borders on webtoons.com"}),_(Y,{id:"WebtoonsShowProgress",label:"Show Reading Progress","sub-label":"Display 'Ep. X/Y' on saved webtoon cards","margin-top":""}),s[1]||(s[1]=a("div",{class:"feature-toggle-wrapper",style:{"margin-top":"10px"}},[a("div",{class:"toggle-label-group"},[a("label",{for:"WebtoonsBorderSize",class:"toggle-main-label"},"Border Thickness"),a("span",{class:"toggle-sub-label"},"Customize highlight border size")]),a("label",{class:"switch small-switch",title:"Enable Custom Border Size"},[a("input",{type:"checkbox",id:"WebtoonsBorderSizeEnabled"}),a("span",{class:"slider round"})])],-1)),s[2]||(s[2]=a("div",{class:"input-wrapper",style:{"margin-top":"10px"}},[a("div",{class:"range-slider-container"},[a("input",{type:"range",id:"WebtoonsBorderSizeSlider",min:"1",max:"10",value:"4",class:"range-slider"}),a("span",{id:"WebtoonsBorderSizeValue",class:"range-value"},"4px")])],-1))]),_:1})]),_(re,{title:"Custom Markers",icon:"üé®","guide-target":"guide-markers"},{default:K(()=>[...s[3]||(s[3]=[a("div",{class:"feature-toggle-header"},[a("span",{class:"description",style:{margin:"0"}},"Add custom statuses beyond the defaults."),a("label",{class:"switch small-switch",title:"Enable Custom Markers"},[a("input",{type:"checkbox",id:"CustomBookmarks"}),a("span",{class:"slider round"})])],-1),a("div",{style:{"margin-top":"15px"}},null,-1),a("div",{class:"input-group-row"},[a("div",{class:"input-wrapper flex-grow"},[a("label",{for:"bookmarkName"},"Marker Name"),a("input",{type:"text",id:"bookmarkName",placeholder:"e.g. Re-reading",class:"input-field"})]),a("div",{class:"input-wrapper"},[a("label",{for:"colorBookmarks"},"Color"),a("div",{class:"color-picker-wrapper"},[a("input",{type:"color",id:"colorBookmarks",value:"#ff0000"})])]),a("div",{class:"input-wrapper"},[a("label",{for:"customBorderStyleSelect"},"Border Style"),a("select",{id:"customBorderStyleSelect",class:"select-field"},[a("option",{value:"solid"},"Solid"),a("option",{value:"dashed"},"Dashed"),a("option",{value:"dotted"},"Dotted"),a("option",{value:"double"},"Double"),a("option",{value:"groove"},"Groove"),a("option",{value:"ridge"},"Ridge"),a("option",{value:"inset"},"Inset"),a("option",{value:"outset"},"Outset")])]),a("div",{class:"input-wrapper input-button-wrapper"},[a("button",{id:"addBookmarkButton",class:"btn btn-primary btn-input-height"}," + Add ")])],-1),a("div",{class:"active-markers-header"},[a("label",{class:"section-label"},"ACTIVE MARKERS"),a("button",{id:"resetBookmarkButton",class:"btn btn-ghost btn-sm"}," Remove All ")],-1),a("div",{id:"CustomBookmarksContainer",class:"markers-container"},null,-1)])]),_:1}),a("div",Ta,[_(re,{title:"Auto Sync",icon:"üîÑ","guide-target":"guide-sync","full-height":""},{default:K(()=>[...s[4]||(s[4]=[a("div",{class:"feature-toggle-header"},[a("span",{class:"description",style:{margin:"0"}},"Automatically update bookmarks on site visit."),a("label",{class:"switch small-switch",title:"Enable Auto Sync"},[a("input",{type:"checkbox",id:"AutoSync"}),a("span",{class:"slider round"})])],-1),a("div",{style:{"margin-top":"15px"}},null,-1),a("div",{class:"input-wrapper"},[a("label",{for:"AutoSyncSetDays"},"Sync Interval (Days)"),a("div",{class:"input-with-button"},[a("input",{type:"number",id:"AutoSyncSetDays",value:"30",class:"input-field"})])],-1),a("p",{id:"logContainerSetDays",class:"status-text"},null,-1),a("div",{class:"button-group bottom-align"},[a("button",{id:"AutoSyncSetDaysButton",class:"btn btn-primary"},"Save Interval"),a("button",{id:"AutoSyncSetDaysButtonReset",class:"btn btn-ghost"},"Reset Default")],-1)])]),_:1}),_(re,{title:"Dashboard Settings",icon:"üìä","guide-target":"guide-personalization","full-height":""},{default:K(()=>[s[5]||(s[5]=a("p",{class:"description compact"},"Configure the appearance and behavior of your Manga Dashboard.",-1)),_(Y,{id:"NewTabDashboard",label:"Enable Dashboard","sub-label":"Replace new tab page"}),_(Y,{id:"DashboardLayoutStyle",label:"Packed Layout","sub-label":"Show stats and more info","margin-top":""})]),_:1})]),_(re,{title:"Quick Access Shortcuts",icon:"üîó","guide-target":"guide-personalization"},{default:K(()=>[...s[6]||(s[6]=[a("div",{class:"card-body"},[a("p",{class:"description"},"Customize the 5 shortcut circles on your Manga Dashboard."),a("div",{id:"QuickAccessContainer",style:{"margin-top":"15px"}}),a("p",{id:"logContainerQuickAccess",class:"status-text"}),a("div",{class:"button-group",style:{"margin-top":"20px"}},[a("button",{id:"SaveQuickAccessButton",class:"btn btn-primary"},"Save Shortcuts"),a("button",{id:"ResetQuickAccessButton",class:"btn btn-ghost"},"Reset to Defaults")])],-1)])]),_:1}),a("div",$a,[_(re,{title:"Manual Synchronization",icon:"‚ö†Ô∏è","guide-target":"guide-sync","icon-bg":"rgba(255, 171, 0, 0.1)","icon-color":"var(--warning)",highlight:""},{default:K(()=>[...s[7]||(s[7]=[a("div",{class:"card-body flex-row-center",style:{"padding-top":"0"}},[a("div",{class:"info-section"},[a("ul",{class:"info-list"},[a("li",null,"Requires you to be logged into MangaFire.to"),a("li",null,"Saves your read history and highlights"),a("li",null,"Disabling sync prevents read status saving")])]),a("div",{class:"action-section"},[a("button",{id:"sendMessageBtnSyncBookmarks",class:"btn btn-warning-large"}," ‚ö° Sync Bookmarks Now "),a("p",{class:"tiny-text"},"Last synced: Check logs below")])],-1)])]),_:1}),s[8]||(s[8]=de('<div class="card bg-terminal" style="padding:0;" data-v-3c62252c><div class="card-header" style="padding:12px 20px;margin-bottom:0;border-bottom:1px solid rgba(0, 255, 0, 0.1);" data-v-3c62252c><div class="card-icon" style="background:rgba(0, 255, 0, 0.1);color:#00FF00;width:30px;height:30px;font-size:16px;" data-v-3c62252c> üîç</div><h3 style="font-size:14px;color:#00FF00;margin:0;" data-v-3c62252c>Debug Logs</h3></div><div id="logContainer" class="terminal-log" data-v-3c62252c></div></div>',1))])])]))}},Pa=pe(Ra,[["__scopeId","data-v-3c62252c"]]);const Fa={id:"tab-appearance",class:"tab-pane fade-in"},Oa={class:"content-grid"},Na={style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"20px","margin-top":"20px"}},Ha={__name:"AppearanceTab",setup(e){return(t,s)=>(S(),C("div",Fa,[s[8]||(s[8]=a("header",{class:"header"},[a("div",{class:"header-text"},[a("h1",null,"Appearance"),a("p",{class:"subtitle"},"Customize the look and feel of your extension and dashboard.")])],-1)),a("div",Oa,[_(re,{title:"Preset Themes",icon:"üé≠","guide-target":"guide-personalization"},{default:K(()=>[...s[0]||(s[0]=[a("div",{class:"theme-grid"},[a("div",{class:"theme-preview-card active","data-theme":"dark"},[a("div",{class:"theme-swatch dark-swatch"}),a("span",{class:"theme-label"},"Cloudy Dark")]),a("div",{class:"theme-preview-card","data-theme":"black"},[a("div",{class:"theme-swatch black-swatch"}),a("span",{class:"theme-label"},"Absolute Black")]),a("div",{class:"theme-preview-card","data-theme":"light"},[a("div",{class:"theme-swatch light-swatch"}),a("span",{class:"theme-label"},"Clean Light")]),a("div",{class:"theme-preview-card","data-theme":"neon"},[a("div",{class:"theme-swatch neon-swatch"}),a("span",{class:"theme-label"},"Cyber Neon")]),a("div",{class:"theme-preview-card","data-theme":"glassy"},[a("div",{class:"theme-swatch glassy-swatch"}),a("span",{class:"theme-label"},"Glassy Blue")])],-1)])]),_:1}),_(re,{title:"Theme Creator",icon:"‚ú®","guide-target":"guide-personalization"},{default:K(()=>[...s[1]||(s[1]=[a("div",{class:"card-body"},[a("p",{class:"description"},"Create your own personalized appearance by adjusting the colors below."),a("div",{class:"color-creator-grid"},[a("div",{class:"input-wrapper"},[a("label",null,"Background"),a("input",{type:"color",id:"themeColorBg",value:"#0b1437"})]),a("div",{class:"input-wrapper"},[a("label",null,"Sidebar"),a("input",{type:"color",id:"themeColorSidebar",value:"#111c44"})]),a("div",{class:"input-wrapper"},[a("label",null,"Accent"),a("input",{type:"color",id:"themeColorAccent",value:"#7551FF"})]),a("div",{class:"input-wrapper"},[a("label",null,"Text"),a("input",{type:"color",id:"themeColorText",value:"#ffffff"})])]),a("div",{class:"button-group",style:{"margin-top":"20px"}},[a("button",{id:"ApplyCustomThemeBtn",class:"btn btn-primary"},"Apply Custom Theme"),a("button",{id:"ResetThemeBtn",class:"btn btn-ghost"},"Reset to Default")])],-1)])]),_:1}),a("div",Na,[_(re,{title:"Highlight Styles",icon:"üñºÔ∏è","guide-target":"guide-personalization","full-height":""},{default:K(()=>[...s[2]||(s[2]=[a("div",{class:"feature-toggle-wrapper"},[a("div",{class:"toggle-label-group"},[a("label",{for:"CustomBorderSize",class:"toggle-main-label"},"Custom Borders"),a("span",{class:"toggle-sub-label"},"Enable highlighting on sites")]),a("label",{class:"switch small-switch"},[a("input",{type:"checkbox",id:"CustomBorderSize"}),a("span",{class:"slider round"})])],-1),a("div",{class:"divider"},null,-1),a("div",{class:"feature-toggle-wrapper"},[a("label",{class:"feature-label"},[U(" Border Style "),a("span",{class:"feature-subtitle"},"Choose line style")]),a("select",{id:"GlobalBorderStyle",class:"select-field"},[a("option",{value:"solid"},"Solid"),a("option",{value:"dashed"},"Dashed"),a("option",{value:"dotted"},"Dotted")])],-1),a("div",{class:"divider"},null,-1),a("div",{class:"range-header"},[a("label",null,"Highlight Thickness"),a("span",{id:"globalRangeValue",style:{color:"var(--primary)","font-weight":"bold"}},"4px")],-1),a("input",{type:"range",id:"GlobalBorderSize",min:"1",max:"10",value:"4",class:"range-slider"},null,-1)])]),_:1}),_(re,{title:"Library Styles",icon:"üìö","guide-target":"guide-personalization","full-height":""},{default:K(()=>[_(Y,{id:"LibraryCardBordersEnabled",label:"Show Status Borders","sub-label":"Color borders in library"}),_(Y,{id:"LibraryHideNoHistory",label:"Only Show with History","sub-label":"Hide entries with no progress"}),s[3]||(s[3]=a("div",{class:"divider"},null,-1)),s[4]||(s[4]=a("div",{class:"range-header"},[a("label",null,"Border Thickness"),a("span",{id:"libraryBorderValue",style:{color:"var(--primary)","font-weight":"bold"}},"2px")],-1)),s[5]||(s[5]=a("input",{type:"range",id:"LibraryCardBorderThickness",min:"1",max:"10",value:"2",class:"range-slider"},null,-1)),s[6]||(s[6]=a("div",{class:"divider"},null,-1)),s[7]||(s[7]=a("p",{class:"section-label"},"‚ú® Visual Effects",-1)),_(Y,{id:"LibraryGlowEffect",label:"Glow Effect","sub-label":"Use glow instead of solid borders"}),_(Y,{id:"LibraryAnimatedBorders",label:"Animated Borders","sub-label":"Pulse animation for 'Reading' status"}),_(Y,{id:"LibraryStatusIcons",label:"Status Icons","sub-label":"Show emoji overlay on cards"}),_(Y,{id:"LibraryProgressBars",label:"Progress Bars","sub-label":"Reading progress on card covers"})]),_:1})])])]))}},za=pe(Ha,[["__scopeId","data-v-68f54b9a"]]);const Va={key:0,class:"filter-label"},Ua={__name:"FilterGroup",props:{label:{type:String,default:""},customClass:{type:String,default:""}},setup(e){return(t,s)=>(S(),C("div",{class:ie(["advanced-filter-group",e.customClass])},[e.label?(S(),C("label",Va,B(e.label),1)):ee("",!0),Ke(t.$slots,"default",{},void 0,!0)],2))}},Ve=pe(Ua,[["__scopeId","data-v-0a553249"]]);const ja={class:"stats-grid-compact"},qa={class:"stats-row stats-row-main"},Ga={class:"stat-item-compact",style:{"--stat-color":"var(--primary)"}},Wa={class:"stat-value-large"},Ka={class:"stat-item-compact",style:{"--stat-color":"#00BCD4"}},Qa={class:"stat-value-large"},Ya={class:"stat-item-compact",style:{"--stat-color":"#4CAF50"}},Za={class:"stat-value-large"},Ja={class:"stat-item-compact",style:{"--stat-color":"#2196F3"}},Xa={class:"stat-value-large"},es={class:"stat-item-compact",style:{"--stat-color":"#9C27B0"}},ts={class:"stat-value-large"},as={class:"stat-item-compact",style:{"--stat-color":"#FFC107"}},ss={class:"stat-value-large"},ns={class:"stat-item-compact",style:{"--stat-color":"#F44336"}},rs={class:"stat-value-large"},os={class:"stats-row stats-row-charts"},is={class:"chart-container"},ls={class:"pie-chart-svg",viewBox:"0 0 180 180"},ds=["data-status","stroke","stroke-dasharray"],cs={class:"pie-center-text",x:"90",y:"85","text-anchor":"middle","dominant-baseline":"middle"},us={class:"pie-legend"},gs={class:"bar-chart-container"},ps={key:0,class:"bar-chart"},ms={class:"bar-label"},vs={class:"bar-track"},fs=["data-target-width"],hs={class:"bar-value"},ys={key:1,style:{color:"var(--text-secondary)","font-size":"0.8rem"}},bs={class:"stats-row stats-row-secondary"},ks={class:"stat-group"},ws={class:"stat-mini-grid"},Ss={class:"stat-mini"},Cs={class:"stat-mini-value"},xs={class:"stat-mini"},Es={class:"stat-mini-value"},Bs={class:"stat-mini"},Ms={class:"stat-mini-value"},_s={class:"stat-mini"},Ds={class:"stat-mini-value"},Ls={class:"stat-group"},As={class:"stat-mini-grid"},Is={class:"stat-mini"},Ts={class:"stat-mini-value",style:{color:"#02A9FF"}},$s={class:"stat-mini"},Rs={class:"stat-mini-value",style:{color:"#FF6740"}},Ps={class:"stat-mini"},Fs={class:"stat-mini-value",style:{color:"#888"}},Os={class:"stat-group"},Ns={class:"stat-mini-grid"},Hs={class:"stat-mini"},zs={class:"stat-mini-value"},Vs={class:"stat-mini"},Us={class:"stat-mini-value"},js={class:"stat-mini"},qs={class:"stat-mini-value"},Gs={class:"progress-ring-container"},Ws={class:"progress-ring-info"},Ks={class:"progress-ring-value"},Qs={class:"stats-row stats-row-bar"},Ys={class:"stat-bar-item"},Zs={class:"stat-bar-item"},Js={class:"stat-bar-item"},Xs={__name:"LibraryStatistics",props:{entries:{type:Array,required:!0},isVisible:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const s=e,n=X(!1),r=X(null),i=2*Math.PI*70,l=2*Math.PI*24,g=["#7551FF","#6B46C1","#805AD5","#9F7AEA","#B794F4","#D6BCFA"],o=V(()=>{const f=s.entries.length;if(f===0)return{total:0,totalChapters:0,reading:0,completed:0,planning:0,onhold:0,dropped:0,avgScore:0,completionRate:0};const u=s.entries.filter(m=>m.status==="Reading").length,v=s.entries.filter(m=>m.status==="Completed").length,h=s.entries.filter(m=>m.status==="Plan to Read").length,$=s.entries.filter(m=>m.status==="On Hold").length,j=s.entries.filter(m=>m.status==="Dropped").length,H=s.entries.reduce((m,p)=>m+(parseInt(p.readChapters)||0),0),Q=s.entries.filter(m=>{var p;return(p=m.anilistData)==null?void 0:p.averageScore}),M=Q.length>0?Math.round(Q.reduce((m,p)=>m+p.anilistData.averageScore,0)/Q.length):0,c=Math.round(v/f*100);return{total:f,totalChapters:H,reading:u,completed:v,planning:h,onhold:$,dropped:j,avgScore:M,completionRate:c}}),w=V(()=>{if(o.value.total===0)return[];const f=[{label:"Reading",value:o.value.reading,color:"#4CAF50"},{label:"Completed",value:o.value.completed,color:"#2196F3"},{label:"Planning",value:o.value.planning,color:"#9C27B0"},{label:"On Hold",value:o.value.onhold,color:"#FFC107"},{label:"Dropped",value:o.value.dropped,color:"#F44336"}].filter(v=>v.value>0);let u=0;return f.map(v=>{const h=v.value/o.value.total,$=i*h,j=u;return u+=$,{...v,dashLen:$,offset:j}})}),d=V(()=>{const f={};s.entries.forEach(h=>{var $;((($=h.anilistData)==null?void 0:$.genres)||[]).forEach(j=>{f[j]=(f[j]||0)+1})});const u=Object.entries(f).sort((h,$)=>$[1]-h[1]).slice(0,6),v=u.length>0?u[0][1]:1;return u.map(([h,$])=>({name:h,count:$,percent:Math.round($/v*100)}))}),E=V(()=>{const f=Date.now(),u=7*24*60*60*1e3,v=30*24*60*60*1e3;return{readThisWeek:s.entries.filter(h=>h.lastRead&&f-h.lastRead<u).length,readThisMonth:s.entries.filter(h=>h.lastRead&&f-h.lastRead<v).length,addedThisWeek:s.entries.filter(h=>h.lastUpdated&&f-h.lastUpdated<u).length,withHistory:s.entries.filter(h=>h.readChapters&&h.readChapters>0).length}}),T=V(()=>({anilist:s.entries.filter(f=>f.anilistData&&!f.anilistData.source).length,mangadex:s.entries.filter(f=>{var u;return((u=f.anilistData)==null?void 0:u.source)==="MANGADEX"}).length,noData:s.entries.filter(f=>!f.anilistData||f.anilistData.status==="NOT_FOUND").length})),O=V(()=>({manga:s.entries.filter(f=>{var u,v;return((u=f.anilistData)==null?void 0:u.format)==="MANGA"||!((v=f.anilistData)!=null&&v.format)}).length,manhwa:s.entries.filter(f=>{var u,v;return((u=f.anilistData)==null?void 0:u.format)==="Manhwa"||((v=f.anilistData)==null?void 0:v.countryOfOrigin)==="KR"}).length,manhua:s.entries.filter(f=>{var u,v;return((u=f.anilistData)==null?void 0:u.format)==="Manhua"||((v=f.anilistData)==null?void 0:v.countryOfOrigin)==="CN"}).length})),x=async()=>{const f=typeof anime<"u"?anime:window.anime;if(console.log("[Stats] Animation trigger - anime available:",!!f),!f){console.warn("[Stats] anime.js not found, skipping animations");return}if(await jt(),console.log("[Stats] After nextTick - root.value:",!!r.value),!r.value){console.warn("[Stats] root ref is null after nextTick");return}const u=r.value.querySelectorAll(".pie-slice"),v=r.value.querySelectorAll(".bar-fill"),h=r.value.querySelector(".progress-ring-fill");console.log("[Stats] Found elements - pieSlices:",u.length,"barFills:",v.length,"ring:",!!h),u.forEach($=>{$.setAttribute("stroke-dasharray",`0 ${i}`)}),v.forEach($=>{$.style.width="0%"}),h&&h.setAttribute("stroke-dashoffset",l),f({targets:r.value.querySelectorAll(".stat-item-compact, .stat-group, .stat-bar-item, .chart-container, .bar-chart-container, .progress-ring-container"),opacity:[0,1],translateY:[15,0],delay:f.stagger(40),duration:600,easing:"easeOutQuart"}),setTimeout(()=>{const $=typeof anime<"u"?anime:window.anime;$&&w.value.forEach((j,H)=>{const Q=u[H];Q&&$({targets:Q,strokeDasharray:[`0 ${i}`,`${j.dashLen} ${i-j.dashLen}`],duration:1e3,delay:H*100,easing:"easeOutQuart"})})},300),setTimeout(()=>{const $=typeof anime<"u"?anime:window.anime;$&&d.value.forEach((j,H)=>{const Q=v[H];Q&&$({targets:Q,width:["0%",j.percent+"%"],duration:800,delay:H*80,easing:"easeOutQuart"})})},500),setTimeout(()=>{if(h){const $=typeof anime<"u"?anime:window.anime;if(!$)return;const j=l-l*o.value.completionRate/100;$({targets:h,strokeDashoffset:[l,j],duration:1200,easing:"easeOutQuart"})}},400)},b=()=>{const f=typeof anime<"u"?anime:window.anime;if(!f||!r.value){n.value=!1;return}const u=r.value.querySelectorAll(".pie-slice"),v=r.value.querySelectorAll(".bar-fill"),h=r.value.querySelector(".progress-ring-fill");f({targets:v,width:"0%",duration:300,easing:"easeInQuart"}),f({targets:u,strokeDasharray:`0 ${i}`,duration:400,easing:"easeInQuart"}),h&&f({targets:h,strokeDashoffset:l,duration:400,easing:"easeInQuart"}),f({targets:r.value.querySelectorAll(".stat-item-compact, .stat-group, .stat-bar-item, .chart-container, .bar-chart-container, .progress-ring-container"),opacity:[1,0],translateY:[0,-10],delay:f.stagger(20,{direction:"reverse"}),duration:300,easing:"easeInQuart",complete:()=>{n.value=!1}})};return Vt(()=>s.isVisible,(f,u)=>{console.log("[Stats] Watch triggered - isVisible changed:",u,"->",f),f?(n.value=!1,requestAnimationFrame(()=>{setTimeout(()=>{console.log("[Stats] Starting entrance animations after delay"),x()},50)})):(n.value=!0,b())}),Re(()=>{console.log("[Stats] Component MOUNTED - isVisible:",s.isVisible),s.isVisible&&x()}),(f,u)=>le((S(),C("div",{ref_key:"root",ref:r,class:ie(["stats-dashboard-card glass-card",{visible:e.isVisible,closing:n.value}])},[u[27]||(u[27]=a("div",{class:"stats-header"},[a("h3",null,"Library Statistics")],-1)),a("div",ja,[a("div",qa,[a("div",Ga,[a("span",Wa,B(o.value.total),1),u[0]||(u[0]=a("span",{class:"stat-label-small"},"Total",-1))]),a("div",Ka,[a("span",Qa,B(o.value.totalChapters.toLocaleString()),1),u[1]||(u[1]=a("span",{class:"stat-label-small"},"Chapters Read",-1))]),a("div",Ya,[a("span",Za,B(o.value.reading),1),u[2]||(u[2]=a("span",{class:"stat-label-small"},"Reading",-1))]),a("div",Ja,[a("span",Xa,B(o.value.completed),1),u[3]||(u[3]=a("span",{class:"stat-label-small"},"Completed",-1))]),a("div",es,[a("span",ts,B(o.value.planning),1),u[4]||(u[4]=a("span",{class:"stat-label-small"},"Plan to Read",-1))]),a("div",as,[a("span",ss,B(o.value.onhold),1),u[5]||(u[5]=a("span",{class:"stat-label-small"},"On Hold",-1))]),a("div",ns,[a("span",rs,B(o.value.dropped),1),u[6]||(u[6]=a("span",{class:"stat-label-small"},"Dropped",-1))])]),a("div",os,[a("div",is,[u[9]||(u[9]=a("span",{class:"chart-title"},"üìä Status Distribution",-1)),(S(),C("svg",ls,[(S(!0),C(te,null,oe(w.value,(v,h)=>(S(),C("circle",{key:v.label,class:"pie-slice","data-status":v.label,cx:"90",cy:"90",r:"70",stroke:v.color,"stroke-dasharray":`0 ${i}`,style:ue({strokeDashoffset:`-${v.offset}`})},null,12,ds))),128)),u[7]||(u[7]=a("circle",{class:"pie-center",cx:"90",cy:"90",r:"45"},null,-1)),a("text",cs,B(o.value.total),1),u[8]||(u[8]=a("text",{class:"pie-center-label",x:"90",y:"105","text-anchor":"middle"},"TOTAL",-1))])),a("div",us,[(S(!0),C(te,null,oe(w.value,v=>(S(),C("div",{key:v.label,class:"legend-item"},[a("span",{class:"legend-dot",style:ue({background:v.color})},null,4),a("span",null,B(v.label)+" ("+B(v.value)+")",1)]))),128))])]),a("div",gs,[u[10]||(u[10]=a("span",{class:"chart-title"},"üè∑Ô∏è Top Genres",-1)),d.value.length>0?(S(),C("div",ps,[(S(!0),C(te,null,oe(d.value,(v,h)=>(S(),C("div",{key:v.name,class:"bar-item"},[a("span",ms,B(v.name),1),a("div",vs,[a("div",{class:"bar-fill",style:ue({width:"0%",background:g[h%g.length]}),"data-target-width":v.percent+"%"},[a("span",hs,B(v.count),1)],12,fs)])]))),128))])):(S(),C("p",ys,"No genre data available"))])]),a("div",bs,[a("div",ks,[u[15]||(u[15]=a("h4",{class:"stat-group-title"},"üìÖ Activity",-1)),a("div",ws,[a("div",Ss,[a("span",Cs,B(E.value.readThisWeek),1),u[11]||(u[11]=a("span",{class:"stat-mini-label"},"Read This Week",-1))]),a("div",xs,[a("span",Es,B(E.value.readThisMonth),1),u[12]||(u[12]=a("span",{class:"stat-mini-label"},"Read This Month",-1))]),a("div",Bs,[a("span",Ms,B(E.value.addedThisWeek),1),u[13]||(u[13]=a("span",{class:"stat-mini-label"},"Added This Week",-1))]),a("div",_s,[a("span",Ds,B(E.value.withHistory),1),u[14]||(u[14]=a("span",{class:"stat-mini-label"},"With History",-1))])])]),a("div",Ls,[u[19]||(u[19]=a("h4",{class:"stat-group-title"},"üåê Data Sources",-1)),a("div",As,[a("div",Is,[a("span",Ts,B(T.value.anilist),1),u[16]||(u[16]=a("span",{class:"stat-mini-label"},"AniList",-1))]),a("div",$s,[a("span",Rs,B(T.value.mangadex),1),u[17]||(u[17]=a("span",{class:"stat-mini-label"},"MangaDex",-1))]),a("div",Ps,[a("span",Fs,B(T.value.noData),1),u[18]||(u[18]=a("span",{class:"stat-mini-label"},"No Data",-1))])])]),a("div",Os,[u[23]||(u[23]=a("h4",{class:"stat-group-title"},"üìö Format",-1)),a("div",Ns,[a("div",Hs,[a("span",zs,B(O.value.manga),1),u[20]||(u[20]=a("span",{class:"stat-mini-label"},"Manga",-1))]),a("div",Vs,[a("span",Us,B(O.value.manhwa),1),u[21]||(u[21]=a("span",{class:"stat-mini-label"},"Manhwa",-1))]),a("div",js,[a("span",qs,B(O.value.manhua),1),u[22]||(u[22]=a("span",{class:"stat-mini-label"},"Manhua",-1))])])]),a("div",Gs,[a("svg",{class:"progress-ring-svg",viewBox:"0 0 60 60"},[u[24]||(u[24]=a("circle",{class:"progress-ring-bg",cx:"30",cy:"30",r:"24"},null,-1)),a("circle",{class:"progress-ring-fill",cx:"30",cy:"30",r:"24","stroke-dasharray":l,"stroke-dashoffset":l})]),a("div",Ws,[a("span",Ks,B(o.value.completionRate)+"%",1),u[25]||(u[25]=a("span",{class:"progress-ring-label"},"Completion Rate",-1))])])]),a("div",Qs,[a("div",Ys,[u[26]||(u[26]=U("‚≠ê Avg Score: ",-1)),a("strong",null,B(o.value.avgScore>0?o.value.avgScore+"%":"N/A"),1)]),a("div",Zs,"üìñ "+B(Math.round(o.value.totalChapters/Math.max(o.value.completed,1)))+" ch/completed manga",1),a("div",Js,"üìà "+B(o.value.completionRate)+"% completion rate",1)])])],2)),[[Ut,e.isVisible||n.value]])}},en=pe(Xs,[["__scopeId","data-v-13735889"]]);function xt(e,t,s){const n=e.toLowerCase();let r=s.find(o=>o.name.toLowerCase()===n);if(!r&&t&&(r=s.find(o=>o.name===t)),r)return{borderColor:r.color,borderStyle:r.style||"solid",badgeBg:`${r.color}26`,badgeText:r.color};const i={reading:{color:"#4CAF50",bg:"rgba(76, 175, 80, 0.15)"},read:{color:"#9f9f9f",bg:"rgba(159, 159, 159, 0.15)"},completed:{color:"#2196F3",bg:"rgba(33, 150, 243, 0.15)"},dropped:{color:"#F44336",bg:"rgba(244, 67, 54, 0.15)"},onhold:{color:"#FFC107",bg:"rgba(255, 193, 7, 0.15)"},planning:{color:"#9C27B0",bg:"rgba(156, 39, 176, 0.15)"},default:{color:"#8B95A5",bg:"rgba(139, 149, 165, 0.15)"}};let l="default";n.includes("reading")?l="reading":n==="read"?l="read":n.includes("completed")?l="completed":n.includes("dropped")?l="dropped":n.includes("hold")?l="onhold":n.includes("plan")&&(l="planning");const g=i[l];return{borderColor:g.color,borderStyle:"solid",badgeBg:g.bg,badgeText:g.color}}function Ze(e,t){return t==="KR"&&e==="MANGA"?"Manhwa":t==="CN"&&e==="MANGA"?"Manhua":{MANGA:"Manga",ONE_SHOT:"One Shot",NOVEL:"Light Novel"}[e]||"Manga"}const tn=["title"],an={key:1,class:"manga-card-progress-bar"},sn={class:"manga-card-actions"},nn=["href","title"],rn=["href"],on={class:"manga-card-body"},ln=["title"],dn={class:"manga-card-meta"},cn={key:0,class:"manga-card-info"},un={key:0,class:"info-item format-badge"},gn={class:"info-item"},pn={key:1,class:"info-item",style:{opacity:"0.6"}},mn="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzY2NiI+PHBhdGggZD0iTTIxIDR2MTJIMy4wMVYySDFWMTZoMjBWNGgtMlptLTEuOTEgMTMuNUw0IDE4djJoMTIuMTdsLjg0LS44NCAxLjA4IDEuNi42Ni0uMjItLjk3LTEuNDNjLjEyLS4xNi4yMi0uMzUuMzEtLjU1eiIvPjwvc3ZnPg==",vn={__name:"MangaCard",props:{entry:{type:Object,required:!0},customMarkers:{type:Array,default:()=>[]},librarySettings:{type:Object,default:()=>({bordersEnabled:!0,borderThickness:2,useGlowEffect:!1,animatedBorders:!1,showStatusIcon:!1,showProgressBar:!1,smartInactivity:!1})}},emits:["click","marker-click"],setup(e){qt(x=>({v31f18884:s.value.borderColor}));const t=e,s=V(()=>xt(t.entry.status,t.entry.customMarker,t.customMarkers)),n=V(()=>t.librarySettings.bordersEnabled&&t.librarySettings.useGlowEffect),r=V(()=>t.librarySettings.bordersEnabled?n.value?{"--glow-color":`${s.value.borderColor}80`,border:"none"}:{border:`${`${t.librarySettings.borderThickness||2}px`} ${s.value.borderStyle||"solid"} ${s.value.borderColor}`}:{border:"none"}),i=V(()=>t.librarySettings.animatedBorders&&t.entry.status==="Reading"),l=V(()=>t.librarySettings.smartInactivity&&t.entry.status==="Reading"&&t.entry.lastRead?(Date.now()-t.entry.lastRead)/(1e3*60*60*24)>30:!1),g=V(()=>{var x,b,f,u;return(b=(x=t.entry.anilistData)==null?void 0:x.coverImage)!=null&&b.large||(u=(f=t.entry.anilistData)==null?void 0:f.coverImage)!=null&&u.medium?t.entry.anilistData.coverImage.large||t.entry.anilistData.coverImage.medium:mn}),o=V(()=>{const x=(t.entry.status||"").toLowerCase();return x.includes("reading")?"üìñ":x==="read"||x.includes("completed")?"‚úÖ":x.includes("dropped")?"‚ùå":x.includes("hold")?"‚è∏Ô∏è":x.includes("plan")?"üìã":"üìö"}),w=V(()=>{var x;return t.librarySettings.showProgressBar&&((x=t.entry.anilistData)==null?void 0:x.chapters)&&t.entry.readChapters}),d=V(()=>{if(!w.value)return 0;const x=t.entry.anilistData.chapters,b=parseInt(t.entry.readChapters)||0;return Math.min(100,Math.round(b/x*100))}),E=V(()=>{var x,b,f,u;return((b=(x=t.entry.anilistData)==null?void 0:x.title)==null?void 0:b.english)||((u=(f=t.entry.anilistData)==null?void 0:f.title)==null?void 0:u.romaji)||t.entry.title}),T=V(()=>t.entry.anilistData?Ze(t.entry.anilistData.format,t.entry.anilistData.countryOfOrigin):null),O=V(()=>{var f;const x=(f=t.entry.anilistData)==null?void 0:f.tags;if(!x||!Array.isArray(x))return null;const b=x.map(u=>u.name.toLowerCase());return b.includes("seinen")?"Seinen":b.includes("josei")?"Josei":b.includes("shounen")?"Shonen":b.includes("shoujo")?"Shoujo":null});return(x,b)=>{var f;return S(),C("div",{class:ie(["manga-card",{"glow-effect":n.value,"reading-pulse":i.value,"has-custom-marker":!!e.entry.customMarker,"stale-entry":l.value}]),style:ue(r.value),onClick:b[3]||(b[3]=u=>x.$emit("click",e.entry))},[a("div",{class:"manga-card-cover",style:ue({backgroundImage:`url('${g.value}')`})},[a("div",{class:"card-status-dot",style:ue({backgroundColor:s.value.borderColor})},null,4),e.librarySettings.showStatusIcon?(S(),C("div",{key:0,class:"manga-card-status-icon",title:e.entry.status},B(o.value),9,tn)):ee("",!0),w.value?(S(),C("div",an,[a("div",{class:"manga-card-progress-fill",style:ue({width:d.value+"%"})},null,4)])):ee("",!0),a("div",sn,[e.entry.lastMangafireUrl?(S(),C("a",{key:0,href:e.entry.lastMangafireUrl,target:"_blank",class:"card-action-btn card-action-continue",onClick:b[0]||(b[0]=Ie(()=>{},["stop"])),title:"Continue reading Ch."+(e.entry.lastChapterRead||"?")}," ‚ñ∂ Ch."+B(e.entry.lastChapterRead||"?"),9,nn)):ee("",!0),(f=e.entry.anilistData)!=null&&f.siteUrl?(S(),C("a",{key:1,href:e.entry.anilistData.siteUrl,target:"_blank",class:"card-action-btn",onClick:b[1]||(b[1]=Ie(()=>{},["stop"]))}," View ",8,rn)):ee("",!0),a("button",{class:"card-action-btn",onClick:b[2]||(b[2]=Ie(u=>x.$emit("marker-click",e.entry),["stop"]))},B(e.entry.customMarker?"‚úì "+e.entry.customMarker:"+ Marker"),1)])],4),a("div",on,[a("h3",{class:"manga-card-title",title:E.value},B(E.value),9,ln),a("div",dn,[a("span",{class:"manga-card-status",style:ue({backgroundColor:s.value.badgeBg,color:s.value.badgeText})},B(e.entry.status),5),e.entry.anilistData?(S(),C("div",cn,[T.value?(S(),C("div",un,B(T.value),1)):ee("",!0),O.value?(S(),C("div",{key:1,class:ie(["info-item","format-badge",`demo-${O.value.toLowerCase()}`]),style:{"margin-left":"4px"}},B(O.value),3)):ee("",!0),a("div",gn,[e.entry.anilistData.chapters?(S(),C(te,{key:0},[b[4]||(b[4]=a("span",{class:"info-label"},"Read:",-1)),U(B(e.entry.readChapters||0)+" / ",1),b[5]||(b[5]=a("span",{class:"info-label"},"Total:",-1)),U(B(e.entry.anilistData.chapters),1)],64)):(S(),C(te,{key:1},[b[6]||(b[6]=a("span",{class:"info-label"},"Read:",-1)),U(B(e.entry.readChapters||0)+" ",1),b[7]||(b[7]=a("span",{class:"info-label ongoing-tag"},"Ongoing",-1))],64))])])):(S(),C("div",pn," Loading info... "))])])],6)}}},fn=pe(vn,[["__scopeId","data-v-4dc50140"]]);const hn={key:0,class:"empty-library"},yn={__name:"MangaGrid",props:{entries:{type:Array,required:!0},customMarkers:{type:Array,default:()=>[]},librarySettings:{type:Object,default:()=>({})},viewSize:{type:String,default:"large"}},emits:["card-click","marker-click"],setup(e){return(t,s)=>(S(),C("div",{class:ie(["manga-grid",{compact:e.viewSize==="compact"}])},[(S(!0),C(te,null,oe(e.entries,n=>{var r;return S(),Gt(fn,{key:n.title+(((r=n.anilistData)==null?void 0:r.id)||""),entry:n,"custom-markers":e.customMarkers,"library-settings":e.librarySettings,onClick:i=>t.$emit("card-click",n),onMarkerClick:i=>t.$emit("marker-click",n)},null,8,["entry","custom-markers","library-settings","onClick","onMarkerClick"])}),128)),e.entries.length===0?(S(),C("div",hn," No matches found. ")):ee("",!0)],2))}},bn=pe(yn,[["__scopeId","data-v-95eb6043"]]),Ce={PERSONAL_DATA:"libraryPersonalData",USER_TAGS:"libraryUserTags",FILTER_PRESETS:"libraryFilterPresets"};function we(e){var t;return(t=e.anilistData)!=null&&t.id?`anilist:${e.anilistData.id}`:e.mangadexId?`mangadex:${e.mangadexId}`:`title:${kn(e.title)}`}function kn(e){return e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}let Be=null,Me=null;async function Je(){return Be||new Promise(e=>{chrome.storage.local.get([Ce.PERSONAL_DATA],t=>{Be=t[Ce.PERSONAL_DATA]||{},e(Be)})})}async function Xe(e){const t=await Je(),s=we(e);return t[s]||{tags:[],notes:"",rating:0}}async function Pe(e,t){const s=await Je(),n=we(e);return s[n]={...s[n]||{tags:[],notes:"",rating:0},...t,lastModified:Date.now()},Be=s,new Promise(r=>{chrome.storage.local.set({[Ce.PERSONAL_DATA]:s},r)})}async function qe(){return Me||new Promise(e=>{chrome.storage.local.get([Ce.USER_TAGS],t=>{Me=t[Ce.USER_TAGS]||[],e(Me)})})}async function wn(e){const t=await qe(),s=e.trim();return!s||t.includes(s)?t:(t.push(s),Me=t,new Promise(n=>{chrome.storage.local.set({[Ce.USER_TAGS]:t},()=>n(t))}))}async function Sn(e,t){const s=await Xe(e);return s.tags.includes(t)||(s.tags.push(t),await Pe(e,{tags:s.tags})),await wn(t),s.tags}async function Cn(e,t){const s=await Xe(e);return s.tags=s.tags.filter(n=>n!==t),await Pe(e,{tags:s.tags}),s.tags}async function xn(e,t){await Pe(e,{notes:t.trim()})}async function En(e,t){const s=Math.max(0,Math.min(10,parseInt(t)||0));return await Pe(e,{rating:s}),s}function Ae(e,t){if(!e||!t)return!1;const s=e.toLowerCase(),n=t.toLowerCase();if(n.includes(s))return!0;let r=0;for(let i=0;i<n.length&&r<s.length;i++)n[i]===s[r]&&r++;return r===s.length}const Bn={id:"tab-saved-entries",class:"tab-pane fade-in",style:{display:"none"}},Mn={class:"content-grid",style:{"max-width":"100%"}},_n={key:0,class:"bulk-ops-bar glass-card",style:{display:"flex"}},Dn={class:"bulk-info"},Ln={class:"bulk-actions"},An={class:"library-header"},In={class:"library-title-section"},Tn={class:"library-title-text"},$n={style:{display:"flex","align-items":"center",gap:"8px"}},Rn={class:"info-redirect-btn","data-target":"guide-entries",title:"How to use"},Pn={class:"icon-svg icon-info",style:{width:"16px",height:"16px"}},Fn={class:"library-subtitle"},On={class:"library-controls"},Nn=["value"],Hn=["value"],zn={class:"view-toggle-group"},Vn={class:"library-controls-advanced"},Un={class:"chapter-range-wrapper"},jn={__name:"SavedEntriesTab",setup(e){const t=X(!1),s=X(!1),n=X("Reading"),r=X([]),i=X([]),l=X({}),g=X("large"),o=X(!1),w=pt({bordersEnabled:!0,borderThickness:2,hideNoHistory:!1,useGlowEffect:!1,animatedBorders:!1,showStatusIcon:!1,showProgressBar:!1,smartInactivity:!1}),d=pt({sort:"title-asc",demographic:"All",status:"All",genre:"All",format:"All",search:"",chapterMin:null,chapterMax:null,lastUpdated:"all",newChaptersOnly:!1}),E=V(()=>{const M=new Set;return r.value.forEach(c=>{var m;(m=c.anilistData)!=null&&m.genres&&c.anilistData.genres.forEach(p=>M.add(p))}),Array.from(M).sort()}),T=V(()=>r.value.filter(M=>{var D,P,I,R,k,y;const c=M.anilistData;if(o.value&&(c!=null&&c.genres)&&c.genres.some(L=>["Ecchi","Hentai"].includes(L)))return!1;if(d.status!=="All"){if(d.status.startsWith("marker:")){const L=d.status.substring(7);if(M.customMarker!==L&&M.status!==L)return!1}else if(d.status==="HasHistory"){if(!(M.lastRead||M.lastChapterRead||M.readChapters>0))return!1}else if(M.status!==d.status)return!1}if(w.hideNoHistory&&!(M.lastRead||M.lastChapterRead||M.readChapters>0)||d.format!=="All"&&(!c||Ze(c.format,c.countryOfOrigin)!==d.format)||d.genre!=="All"&&!((D=c==null?void 0:c.genres)!=null&&D.includes(d.genre)))return!1;if(d.search!==""){const L=Ae(d.search,M.title)||Ae(d.search,((P=c==null?void 0:c.title)==null?void 0:P.english)||"")||Ae(d.search,((I=c==null?void 0:c.title)==null?void 0:I.romaji)||""),F=((k=(R=c==null?void 0:c.staff)==null?void 0:R.edges)==null?void 0:k.some(N=>{var q,G;return Ae(d.search,((G=(q=N.node)==null?void 0:q.name)==null?void 0:G.full)||"")}))||!1;if(!L&&!F)return!1}if(d.demographic!=="All"){const L=d.demographic.toLowerCase();if(!((y=c==null?void 0:c.tags)!=null&&y.some(F=>F.name.toLowerCase()===L)))return!1}const m=d.chapterMin||0,p=d.chapterMax||1/0;if(m>0||p<1/0){const L=(c==null?void 0:c.chapters)||M.readChapters||0;if(L<m||L>p)return!1}if(d.lastUpdated!=="all"){const L=Date.now(),F=M.lastRead||M.lastUpdated||0;let N=0;switch(d.lastUpdated){case"7d":N=L-7*24*60*60*1e3;break;case"30d":N=L-30*24*60*60*1e3;break;case"90d":N=L-90*24*60*60*1e3;break;case"year":N=L-365*24*60*60*1e3;break}if(F<N)return!1}if(d.newChaptersOnly){const L=(c==null?void 0:c.chapters)||0,F=M.readChapters||0;if(!(L>0&&F<L))return!1}return!0})),O=V(()=>{const M=[...T.value];return M.sort((c,m)=>{var P,I,R,k,y,L,F,N,q,G,W,J,se,ne;const p=(((I=(P=c.anilistData)==null?void 0:P.title)==null?void 0:I.english)||c.title).toLowerCase(),D=(((k=(R=m.anilistData)==null?void 0:R.title)==null?void 0:k.english)||m.title).toLowerCase();switch(d.sort){case"title-asc":return p.localeCompare(D);case"title-desc":return D.localeCompare(p);case"pop-desc":return(((y=m.anilistData)==null?void 0:y.popularity)||0)-(((L=c.anilistData)==null?void 0:L.popularity)||0);case"pop-asc":return(((F=c.anilistData)==null?void 0:F.popularity)||0)-(((N=m.anilistData)==null?void 0:N.popularity)||0);case"score-desc":return(((q=m.anilistData)==null?void 0:q.averageScore)||0)-(((G=c.anilistData)==null?void 0:G.averageScore)||0);case"added-desc":return(m.lastUpdated||0)-(c.lastUpdated||0);case"last-read-desc":return(m.lastRead||0)-(c.lastRead||0);case"rating-desc":{const ce=((W=l.value[we(c)])==null?void 0:W.rating)||0;return(((J=l.value[we(m)])==null?void 0:J.rating)||0)-ce}case"rating-asc":{const ce=((se=l.value[we(c)])==null?void 0:se.rating)||0,ye=((ne=l.value[we(m)])==null?void 0:ne.rating)||0;return ce-ye}default:return 0}}),M}),x=()=>{t.value=!t.value},b=M=>{window.showMangaDetails&&window.showMangaDetails(M)},f=M=>{g.value=M,chrome.storage.local.set({cardViewSize:M})},u=()=>{d.chapterMin=null,d.chapterMax=null,d.lastUpdated="all",d.newChaptersOnly=!1,d.status="All",d.genre="All",d.format="All",d.demographic="All"},v=()=>{d.chapterMin=d.chapterMin>=100?null:100},h=M=>{window.showMarkerPicker&&window.showMarkerPicker(M)},$=()=>{var M;confirm("Remove duplicate entries?")&&((M=document.getElementById("BtnCleanLibrary"))==null||M.click())},j=()=>{var M;confirm("Reset library cache and fresh sync?")&&((M=document.getElementById("BtnTrashAndSyncEntries"))==null||M.click())},H=async()=>{const M=O.value.length;if(M!==0&&confirm(`Update all ${M} filtered items to "${n.value}"?`)){const c=r.value.map(m=>O.value.some(D=>D.title===m.title)?{...m,status:n.value,customMarker:null}:m);chrome.storage.local.set({savedEntriesMerged:c},()=>{alert(`Updated ${M} items.`),s.value=!1})}},Q=()=>{var M;if(!((M=chrome.runtime)!=null&&M.id)){console.error("Extension context invalidated. Please refresh the page.");return}chrome.storage.local.get(["savedEntriesMerged","customBookmarks","cardViewSize","FamilyFriendlyfeatureEnabled","LibraryCardBordersEnabled","LibraryCardBorderThickness","LibraryHideNoHistory","LibraryGlowEffect","LibraryAnimatedBorders","LibraryStatusIcons","LibraryProgressBars"],async c=>{r.value=c.savedEntriesMerged||[],i.value=c.customBookmarks||[],g.value=c.cardViewSize||"large",o.value=c.FamilyFriendlyfeatureEnabled||!1,w.bordersEnabled=c.LibraryCardBordersEnabled!==!1,w.borderThickness=c.LibraryCardBorderThickness||2,w.hideNoHistory=c.LibraryHideNoHistory===!0,w.useGlowEffect=c.LibraryGlowEffect===!0,w.animatedBorders=c.LibraryAnimatedBorders===!0,w.showStatusIcon=c.LibraryStatusIcons===!0,w.showProgressBar=c.LibraryProgressBars===!0,l.value=await Je()})};return Re(()=>{console.log("[SavedEntriesTab] Component MOUNTED"),Q(),chrome.storage.onChanged.addListener((M,c)=>{c==="local"&&(M.savedEntriesMerged&&(r.value=M.savedEntriesMerged.newValue||[]),M.customBookmarks&&(i.value=M.customBookmarks.newValue||[]),M.LibraryCardBordersEnabled&&(w.bordersEnabled=M.LibraryCardBordersEnabled.newValue))}),window.refreshLibraryData=Q}),(M,c)=>(S(),C("div",Bn,[a("header",{class:"header"},[c[15]||(c[15]=a("div",{class:"header-text"},[a("h1",null,"Saved Entries"),a("p",{class:"subtitle"},"Browse and manage your manga library")],-1)),a("div",{class:"header-actions"},[a("button",{id:"BtnShowStats",class:"btn btn-ghost btn-sm",onClick:x},"üìä Stats"),a("button",{onClick:$,class:"btn btn-ghost btn-sm",title:"Remove Duplicates"},"üßπ Clean"),a("button",{onClick:j,class:"btn btn-warning-large"},"‚ö°Fresh Sync Entries")])]),a("div",Mn,[_(en,{entries:r.value,"is-visible":t.value},null,8,["entries","is-visible"]),s.value?(S(),C("div",_n,[a("div",Dn,[a("span",null,B(O.value.length)+" items filtered",1)]),a("div",Ln,[c[17]||(c[17]=a("span",null,"Update All Filtered to:",-1)),le(a("select",{"onUpdate:modelValue":c[0]||(c[0]=m=>n.value=m),class:"select-field sm"},[...c[16]||(c[16]=[de('<option value="Reading" data-v-57856dcb>Reading</option><option value="Completed" data-v-57856dcb>Completed</option><option value="On Hold" data-v-57856dcb>On Hold</option><option value="Plan to Read" data-v-57856dcb>Plan to Read</option><option value="Dropped" data-v-57856dcb>Dropped</option>',5)])],512),[[be,n.value]]),a("button",{onClick:H,class:"btn btn-primary btn-sm"},"Apply Update"),a("button",{onClick:c[1]||(c[1]=m=>s.value=!1),class:"btn btn-ghost btn-sm"},"√ó")])])):ee("",!0),a("div",An,[a("div",In,[c[19]||(c[19]=a("div",{class:"library-icon"},"üìö",-1)),a("div",Tn,[a("div",$n,[c[18]||(c[18]=a("h2",null,"Your Library",-1)),a("button",{onClick:c[2]||(c[2]=m=>s.value=!s.value),class:ie(["btn btn-ghost btn-sm",{active:s.value}])},"Bulk",2),a("button",Rn,[(S(),C("svg",Pn))])]),a("p",Fn,B(O.value.length)+" item"+B(O.value.length!==1?"s":""),1)])]),a("div",On,[le(a("select",{"onUpdate:modelValue":c[3]||(c[3]=m=>d.sort=m),class:"select-field",style:{width:"140px"}},[...c[20]||(c[20]=[de('<option value="title-asc" data-v-57856dcb>A-Z</option><option value="title-desc" data-v-57856dcb>Z-A</option><option value="pop-desc" data-v-57856dcb>Most Popular</option><option value="pop-asc" data-v-57856dcb>Least Popular</option><option value="score-desc" data-v-57856dcb>Highest Score</option><option value="rating-desc" data-v-57856dcb>My Rating ‚Üì</option><option value="rating-asc" data-v-57856dcb>My Rating ‚Üë</option><option value="added-desc" data-v-57856dcb>Recently Added</option><option value="last-read-desc" data-v-57856dcb>Recently Read</option>',9)])],512),[[be,d.sort]]),le(a("select",{"onUpdate:modelValue":c[4]||(c[4]=m=>d.demographic=m),class:"select-field"},[...c[21]||(c[21]=[de('<option value="All" data-v-57856dcb>All Demographics</option><option value="Shonen" data-v-57856dcb>Shonen</option><option value="Seinen" data-v-57856dcb>Seinen</option><option value="Shoujo" data-v-57856dcb>Shoujo</option><option value="Josei" data-v-57856dcb>Josei</option>',5)])],512),[[be,d.demographic]]),le(a("select",{"onUpdate:modelValue":c[5]||(c[5]=m=>d.status=m),class:"select-field"},[c[23]||(c[23]=de('<option value="All" data-v-57856dcb>All Statuses</option><option value="Reading" data-v-57856dcb>Reading</option><option value="Completed" data-v-57856dcb>Completed</option><option value="On Hold" data-v-57856dcb>On Hold</option><option value="Plan to Read" data-v-57856dcb>Plan to Read</option><option value="Dropped" data-v-57856dcb>Dropped</option><option value="HasHistory" data-v-57856dcb>Has History</option>',7)),i.value.length>0?(S(),C(te,{key:0},[c[22]||(c[22]=a("option",{disabled:""},"‚îÄ‚îÄ Custom Markers ‚îÄ‚îÄ",-1)),(S(!0),C(te,null,oe(i.value,m=>(S(),C("option",{key:m.name,value:"marker:"+m.name}," üìå "+B(m.name),9,Nn))),128))],64)):ee("",!0)],512),[[be,d.status]]),le(a("select",{"onUpdate:modelValue":c[6]||(c[6]=m=>d.genre=m),class:"select-field"},[c[24]||(c[24]=a("option",{value:"All"},"All Genres",-1)),(S(!0),C(te,null,oe(E.value,m=>(S(),C("option",{key:m,value:m},B(m),9,Hn))),128))],512),[[be,d.genre]]),le(a("select",{"onUpdate:modelValue":c[7]||(c[7]=m=>d.format=m),class:"select-field"},[...c[25]||(c[25]=[de('<option value="All" data-v-57856dcb>All Formats</option><option value="Manga" data-v-57856dcb>Manga</option><option value="Manhwa" data-v-57856dcb>Manhwa</option><option value="Manhua" data-v-57856dcb>Manhua</option><option value="One Shot" data-v-57856dcb>One Shot</option><option value="Light Novel" data-v-57856dcb>Light Novel</option>',6)])],512),[[be,d.format]]),le(a("input",{type:"text","onUpdate:modelValue":c[8]||(c[8]=m=>d.search=m),placeholder:"Search titles...",class:"input-field"},null,512),[[_e,d.search]]),a("div",zn,[a("button",{onClick:c[9]||(c[9]=m=>f("compact")),class:ie(["view-toggle-btn",{active:g.value==="compact"}])},[...c[26]||(c[26]=[a("svg",{class:"icon-svg icon-view-compact"},null,-1)])],2),a("button",{onClick:c[10]||(c[10]=m=>f("large")),class:ie(["view-toggle-btn",{active:g.value==="large"}])},[...c[27]||(c[27]=[a("svg",{class:"icon-svg icon-view-large"},null,-1)])],2)])]),a("div",Vn,[_(Ve,{label:"Chapters:"},{default:K(()=>[a("div",Un,[le(a("input",{type:"number","onUpdate:modelValue":c[11]||(c[11]=m=>d.chapterMin=m),class:"input-field input-sm",placeholder:"Min",style:{width:"70px"}},null,512),[[_e,d.chapterMin,void 0,{number:!0}]]),c[28]||(c[28]=a("span",{class:"range-separator"},"‚Äì",-1)),le(a("input",{type:"number","onUpdate:modelValue":c[12]||(c[12]=m=>d.chapterMax=m),class:"input-field input-sm",placeholder:"Max",style:{width:"70px"}},null,512),[[_e,d.chapterMax,void 0,{number:!0}]])])]),_:1}),_(Ve,{label:"Updated:"},{default:K(()=>[le(a("select",{"onUpdate:modelValue":c[13]||(c[13]=m=>d.lastUpdated=m),class:"select-field select-sm"},[...c[29]||(c[29]=[a("option",{value:"all"},"Any Time",-1),a("option",{value:"7d"},"Last 7 Days",-1),a("option",{value:"30d"},"Last 30 Days",-1),a("option",{value:"90d"},"Last 90 Days",-1),a("option",{value:"year"},"Last Year",-1)])],512),[[be,d.lastUpdated]])]),_:1}),_(Ve,{"custom-class":"quick-filters"},{default:K(()=>[a("button",{onClick:v,class:ie(["btn btn-ghost btn-sm filter-preset-btn",{active:d.chapterMin>=100}])},"üî• Binge-worthy",2),a("button",{onClick:c[14]||(c[14]=m=>d.newChaptersOnly=!d.newChaptersOnly),class:ie(["btn btn-ghost btn-sm filter-preset-btn",{active:d.newChaptersOnly}])},"‚ú® New Chapters",2),a("button",{onClick:u,class:"btn btn-ghost btn-sm filter-preset-btn"},"‚úï Clear")]),_:1})])]),_(bn,{entries:O.value,"custom-markers":i.value,"library-settings":w,"view-size":g.value,onCardClick:b,onMarkerClick:h},null,8,["entries","custom-markers","library-settings","view-size"])])]))}},qn=pe(jn,[["__scopeId","data-v-57856dcb"]]);const Gn={},Wn={id:"tab-import-export",class:"tab-pane fade-in",style:{display:"none"}},Kn={class:"content-grid export-import-grid"},Qn={class:"card secondary-bg-card"},Yn={class:"card-header"},Zn={class:"card-icon blue-icon"},Jn={class:"icon-svg icon-export",style:{width:"20px",height:"20px"}},Xn={class:"inner-info-card"},er={id:"exportDataBtn",class:"btn btn-primary btn-with-icon"},tr={class:"icon-svg icon-export",style:{width:"16px",height:"16px"}},ar={class:"card secondary-bg-card"},sr={class:"card-header"},nr={class:"card-icon purple-icon"},rr={class:"icon-svg icon-import",style:{width:"20px",height:"20px"}},or={class:"card-title-group"},ir={style:{display:"flex","align-items":"center",gap:"8px"}},lr={class:"info-redirect-btn","data-target":"guide-backup",title:"About Backup & Restore"},dr={class:"icon-svg icon-info",style:{width:"16px",height:"16px"}},cr={class:"drop-zone-container",id:"dropZone"},ur={class:"drop-zone-content"},gr={class:"drop-zone-icon"},pr={class:"icon-svg icon-file",style:{width:"24px",height:"24px"}},mr={class:"import-actions-row"},vr={id:"startImportBtn",class:"btn btn-primary btn-with-icon"},fr={class:"icon-svg icon-plus",style:{width:"16px",height:"16px"}},hr={class:"card secondary-bg-card",style:{"grid-column":"1 / -1"}},yr={class:"card-header"},br={class:"card-icon",style:{background:"rgba(255, 103, 64, 0.1)"}},kr={style:{width:"20px",height:"20px"},viewBox:"0 0 24 24",fill:"none",stroke:"#FF6740","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},wr={class:"inner-info-card",style:{"flex-direction":"column",gap:"12px"}},Sr={style:{display:"flex",gap:"10px",width:"100%","align-items":"center"}},Cr={id:"mdlistImportBtn",class:"btn btn-primary btn-with-icon"},xr={style:{width:"16px",height:"16px"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"};function Er(e,t){return S(),C("div",Wn,[t[20]||(t[20]=a("header",{class:"header"},[a("div",{class:"header-text"},[a("h1",null,"Import & Export"),a("p",{class:"subtitle"},"Manage your manga bookmarks and reading history. Keep your data safe or transfer it to another machine.")])],-1)),a("div",Kn,[a("div",Qn,[a("div",Yn,[a("div",Zn,[(S(),C("svg",Jn))]),t[0]||(t[0]=de('<div class="card-title-group" data-v-2081d4e6><div style="display:flex;align-items:center;gap:8px;" data-v-2081d4e6><h3 data-v-2081d4e6>Export Data</h3><button class="info-redirect-btn" data-target="guide-backup" title="About Backup &amp; Restore" data-v-2081d4e6><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-2081d4e6><circle cx="12" cy="12" r="10" data-v-2081d4e6></circle><line x1="12" y1="16" x2="12" y2="12" data-v-2081d4e6></line><line x1="12" y1="8" x2="12.01" y2="8" data-v-2081d4e6></line></svg></button></div><p class="description compact" data-v-2081d4e6>Generate a backup of your library and settings.</p></div>',1))]),t[3]||(t[3]=de('<div class="export-options" data-v-2081d4e6><p class="section-label" data-v-2081d4e6>Include in export:</p><div class="export-checkboxes" data-v-2081d4e6><label class="export-option" data-v-2081d4e6><input type="checkbox" id="exportLibrary" checked data-v-2081d4e6><span data-v-2081d4e6>üìö Library Entries</span><span class="export-count" id="exportLibraryCount" data-v-2081d4e6>(0)</span></label><label class="export-option" data-v-2081d4e6><input type="checkbox" id="exportHistory" checked data-v-2081d4e6><span data-v-2081d4e6>üìñ Reading History</span><span class="export-count" id="exportHistoryCount" data-v-2081d4e6>(0)</span></label><label class="export-option" data-v-2081d4e6><input type="checkbox" id="exportSettings" checked data-v-2081d4e6><span data-v-2081d4e6>‚öôÔ∏è Settings</span></label><label class="export-option" data-v-2081d4e6><input type="checkbox" id="exportPersonalData" checked data-v-2081d4e6><span data-v-2081d4e6>üè∑Ô∏è Tags, Notes &amp; Ratings</span><span class="export-count" id="exportPersonalCount" data-v-2081d4e6>(0)</span></label><label class="export-option" data-v-2081d4e6><input type="checkbox" id="exportCache" data-v-2081d4e6><span data-v-2081d4e6>üíæ AniList Cache</span><span class="export-count" id="exportCacheCount" data-v-2081d4e6>(0 KB)</span></label></div></div>',1)),a("div",Xn,[t[2]||(t[2]=a("div",{class:"format-info"},[a("span",{class:"label-info"},[U("Format: "),a("span",{class:"highlight-text"},"JSON")])],-1)),a("button",er,[(S(),C("svg",tr)),t[1]||(t[1]=U(" Export Selected ",-1))])]),t[4]||(t[4]=a("div",{class:"card-footer-info"},[a("span",{class:"status-icon"},"‚ÑπÔ∏è"),a("span",{class:"status-text-muted"},[U("Last backup: "),a("span",{id:"lastBackupDisplay"},"Never")])],-1))]),a("div",ar,[a("div",sr,[a("div",nr,[(S(),C("svg",rr))]),a("div",or,[a("div",ir,[t[5]||(t[5]=a("h3",null,"Import Data",-1)),a("button",lr,[(S(),C("svg",dr))])]),t[6]||(t[6]=a("p",{class:"description compact"},"Restore your data from a previously exported file. ",-1))])]),a("div",cr,[t[9]||(t[9]=a("input",{type:"file",id:"importDataInput",accept:".json,.xml",style:{display:"none"}},null,-1)),a("div",ur,[a("div",gr,[(S(),C("svg",pr))]),t[7]||(t[7]=a("span",{class:"drop-zone-text"},"Click to upload or drag and drop",-1)),t[8]||(t[8]=a("span",{class:"drop-zone-subtext"},"Supports .json or .xml files (max 10MB)",-1))])]),a("div",mr,[t[11]||(t[11]=de('<div class="feature-toggle-wrapper" data-v-2081d4e6><div class="toggle-label-group" data-v-2081d4e6><span class="toggle-main-label" data-v-2081d4e6>Merge with current data</span></div><label class="switch" data-v-2081d4e6><input type="checkbox" id="mergeImportToggle" checked data-v-2081d4e6><span class="slider round" data-v-2081d4e6></span></label></div>',1)),a("button",vr,[(S(),C("svg",fr)),t[10]||(t[10]=U(" Start Import ",-1))])]),t[12]||(t[12]=a("div",{class:"caution-banner"},[a("div",{class:"caution-icon"},"‚ö†Ô∏è"),a("div",{class:"caution-text"},[a("strong",null,"Caution:"),U(' If "Merge with current data" is disabled, all existing bookmarks will be overwritten by the imported file. This action cannot be undone. ')])],-1))]),a("div",hr,[a("div",yr,[a("div",br,[(S(),C("svg",kr,[...t[13]||(t[13]=[a("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},null,-1),a("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},null,-1)])]))]),t[14]||(t[14]=a("div",{class:"card-title-group"},[a("div",{style:{display:"flex","align-items":"center",gap:"8px"}},[a("h3",null,"Import from MangaDex List")]),a("p",{class:"description compact"},"Import manga from a public MangaDex reading list (MDList).")],-1))]),a("div",wr,[t[18]||(t[18]=a("div",{class:"format-info",style:{width:"100%"}},[a("span",{class:"label-info"},"Paste MDList URL or ID:"),a("p",{class:"sub-description"},"Example: https://mangadex.org/list/abc123... or just the UUID ")],-1)),a("div",Sr,[t[17]||(t[17]=a("input",{type:"text",id:"mdlistInput",placeholder:"https://mangadex.org/list/...",class:"input-field",style:{flex:"1"}},null,-1)),a("button",Cr,[(S(),C("svg",xr,[...t[15]||(t[15]=[a("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},null,-1),a("polyline",{points:"7 10 12 15 17 10"},null,-1),a("line",{x1:"12",y1:"15",x2:"12",y2:"3"},null,-1)])])),t[16]||(t[16]=U(" Import ",-1))])])]),t[19]||(t[19]=a("div",{class:"card-footer-info"},[a("span",{class:"status-icon"},"üìã"),a("span",{class:"status-text-muted"},'Imported manga will be added with "Plan to Read" status')],-1))])])])}const Br=pe(Gn,[["render",Er],["__scopeId","data-v-2081d4e6"]]),Mr=["id"],_r={class:"card-header"},Dr={key:0,class:"card-icon"},Lr={class:"card-body"},Ar={class:"guide-text"},fe={__name:"GuideCard",props:{id:{type:String,default:""},icon:{type:String,default:""},title:{type:String,required:!0}},setup(e){return(t,s)=>(S(),C("div",{id:e.id,class:"card guide-card"},[a("div",_r,[e.icon?(S(),C("div",Dr,B(e.icon),1)):ee("",!0),a("h3",null,B(e.title),1)]),a("div",Lr,[a("p",Ar,[Ke(t.$slots,"default")])])],8,Mr))}};const Ir={id:"tab-about",class:"tab-pane fade-in"},Tr={class:"content-grid"},$r={class:"guide-grid"},Rr={__name:"AboutTab",setup(e){return(t,s)=>(S(),C("div",Ir,[s[11]||(s[11]=a("header",{class:"header"},[a("div",{class:"header-text"},[a("h1",null,"About"),a("p",{class:"subtitle"},"Information, usage guide, and credits.")])],-1)),a("div",Tr,[s[9]||(s[9]=de('<div class="card" data-v-f4c87268><div class="card-body prose" data-v-f4c87268><h2 data-v-f4c87268>MangaFire Bookmark Color Marker</h2><p data-v-f4c87268>A powerful Chrome Extension for <a href="https://mangafire.to/home" target="_blank" data-v-f4c87268>MangaFire.to</a> that enhances your browsing experience by automatically highlighting manga based on your bookmarks and reading history.</p><h3 data-v-f4c87268>üöÄ Why Use This?</h3><p data-v-f4c87268>Finding new manga to read can be frustrating when you can&#39;t instantly see what you&#39;ve already read or saved. MangaFire&#39;s default interface doesn&#39;t always make this clear at a glance.</p><p data-v-f4c87268><strong data-v-f4c87268>Bookmark Color Marker</strong> solves this by visually tagging manga covers with colored borders corresponding to their status (e.g., Reading, Completed, Plan to Read) directly on the browsing pages.</p><hr class="divider" data-v-f4c87268><h3 data-v-f4c87268>‚ú® Features</h3><ul class="feature-list" data-v-f4c87268><li data-v-f4c87268><strong data-v-f4c87268>Automatic Highlighting</strong>: Instantly spot your saved manga with custom colored borders.</li><li data-v-f4c87268><strong data-v-f4c87268>Custom Statuses</strong>: Create your own bookmark categories with unique names, colors, and border styles.</li><li data-v-f4c87268><strong data-v-f4c87268>History Sync</strong>: Optionally highlight manga that are in your reading history but not bookmarked.</li><li data-v-f4c87268><strong data-v-f4c87268>Visual Customization</strong>: Adjust border thickness and style (Solid, Dashed, Dotted, etc.).</li></ul><hr class="divider" data-v-f4c87268><h3 data-v-f4c87268>üìñ How to Use</h3><ol class="usage-list" data-v-f4c87268><li data-v-f4c87268><strong data-v-f4c87268>Sync Data</strong>: Click &#39;Sync Bookmarks Now&#39; in the Settings tab (requires login to MangaFire).</li><li data-v-f4c87268><strong data-v-f4c87268>Browse</strong>: Visit MangaFire.to. Your lists will be highlighted! </li><li data-v-f4c87268><strong data-v-f4c87268>Customize</strong>: Use the Settings tab to add new markers (e.g. &quot;Favorites&quot; in Gold).</li></ol><hr class="divider" data-v-f4c87268><div class="alert-box" data-v-f4c87268><p data-v-f4c87268><strong data-v-f4c87268>Disclaimer:</strong> This is an unofficial extension and is not affiliated with MangaFire.to.</p></div><hr class="divider" data-v-f4c87268><h3 data-v-f4c87268>üîí Privacy &amp; Security</h3><p data-v-f4c87268>Your privacy is our priority. This extension is designed with a **privacy-first** approach:</p><ul class="feature-list" data-v-f4c87268><li data-v-f4c87268><strong data-v-f4c87268>Local Storage</strong>: All bookmarked manga, reading history, and settings are stored locally on your device using `chrome.storage.local`.</li><li data-v-f4c87268><strong data-v-f4c87268>No External Servers</strong>: We do not maintain any external servers. Your data never leaves your browser, except when you manually export it or sync with AniList (which goes directly to AniList APIs).</li><li data-v-f4c87268><strong data-v-f4c87268>No Tracking</strong>: There are no trackers, analytics, or behavioral monitoring scripts in this extension.</li><li data-v-f4c87268><strong data-v-f4c87268>Open Permissions</strong>: We only request permissions necessary for the extension to function (e.g., access to `mangafire.to` for highlighting).</li></ul></div></div><div class="section-title-full" data-v-f4c87268><h2 class="section-label" data-v-f4c87268>User Guide &amp; Feature Help</h2></div>',2)),a("div",$r,[_(fe,{id:"guide-sync",title:"Auto Sync",icon:"üîÑ"},{default:K(()=>[...s[0]||(s[0]=[U(" Automatically retrieves your latest bookmarks from MangaFire. You can set the interval (in days) for how often the background sync should trigger. Requires you to be logged into the site. ",-1)])]),_:1}),_(fe,{id:"guide-markers",title:"Custom Markers",icon:"üé®"},{default:K(()=>[...s[1]||(s[1]=[U(' Go beyond default statuses! Create markers like "Favorite", "Top Tier", or "To-Read". You can customize the color and border style (dashed, double, etc.) for each marker. ',-1)])]),_:1}),_(fe,{id:"guide-general",title:"General Preferences",icon:"‚öôÔ∏è"},{default:K(()=>[...s[2]||(s[2]=[U(" Toggle ",-1),a("b",null,"Mark Homepage",-1),U(" to see highlights on the front page. Use ",-1),a("b",null,"Sync & Mark Read",-1),U(" to track history. ",-1),a("b",null,"Family Friendly",-1),U(" mode hides entries with adult-only tags. ",-1)])]),_:1}),_(fe,{id:"guide-entries",title:"Saved Entries",icon:"üìö"},{default:K(()=>[...s[3]||(s[3]=[U(" Your local manga library. Synchronize with AniList to get cover images and metadata. Use filters to browse your collection by status, format, or name. ",-1)])]),_:1}),_(fe,{id:"guide-backup",title:"Backup & Restore",icon:"üíæ"},{default:K(()=>[...s[4]||(s[4]=[U(" Always keep a backup! ",-1),a("b",null,"Export",-1),U(" saves your bookmarks, settings, and cache. ",-1),a("b",null,"Import",-1),U(" allows you to restore data or merge backups from different devices. ",-1)])]),_:1}),_(fe,{id:"guide-personalization",title:"Personalization",icon:"üåô"},{default:K(()=>[...s[5]||(s[5]=[U(" Switch between light and dark modes in the sidebar. You can also adjust the thickness of the manga highlight borders to suit your visual preference. ",-1)])]),_:1}),_(fe,{id:"guide-dashboard",title:"Dashboard Settings",icon:"üìä"},{default:K(()=>[...s[6]||(s[6]=[U(" Enable or disable the ",-1),a("b",null,"Manga Dashboard",-1),U(" new tab page. Use ",-1),a("b",null,"Packed Layout",-1),U(" to show more detailed statistics if you have many entries. ",-1)])]),_:1}),_(fe,{id:"guide-styles",title:"Highlight Styles",icon:"üñºÔ∏è"},{default:K(()=>[...s[7]||(s[7]=[U(" Customize the default appearance of highlights. Choose between ",-1),a("b",null,"Solid, Dashed, Dotted",-1),U(" styles and adjust the ",-1),a("b",null,"Border Thickness",-1),U(" for better visibility. ",-1)])]),_:1}),_(fe,{id:"guide-fresh-sync",title:"Fresh Sync",icon:"‚ö°"},{default:K(()=>[...s[8]||(s[8]=[U(" Use the ",-1),a("b",null,"Fresh Sync Entries",-1),U(" button in the Saved Entries tab to completely rebuild your library metadata and covers from AniList. ",-1),a("i",null,"Note: This clears the local library cache first.",-1)])]),_:1})]),s[10]||(s[10]=de('<div class="support-dev-card glass-card" data-v-f4c87268><div class="card-body" data-v-f4c87268><div class="support-header" data-v-f4c87268><div class="support-icon" data-v-f4c87268>‚òï</div><h2 data-v-f4c87268>Support the Development</h2></div><p class="description" data-v-f4c87268>If you enjoy using this extension and want to support its further development, consider buying me a coffee! Your support helps keep the project alive, ad-free, and always evolving with new requested features.</p><div class="support-links-group" data-v-f4c87268><a href="https://www.buymeacoffee.com" target="_blank" class="btn btn-primary support-btn" data-v-f4c87268><span class="btn-icon" data-v-f4c87268>‚òï</span> Buy me a Coffee </a><a href="https://github.com/sponsors/yourprofile" target="_blank" class="btn btn-ghost support-btn" data-v-f4c87268><span class="btn-icon" data-v-f4c87268>üíñ</span> GitHub Sponsor </a></div></div></div>',1))])]))}},Pr=pe(Rr,[["__scopeId","data-v-f4c87268"]]);function et(){return typeof anime<"u"}function Fr(e,t={}){if(!et())return null;const s={targets:e,strokeDashoffset:[anime.setDashoffset,0],easing:"easeInOutSine",duration:1500,direction:"alternate",loop:!1};return anime({...s,...t})}function Or(e){if(!et())return Promise.resolve();const t=e.querySelector(".anime-success-checkmark");t&&t.remove(),e.style.position="relative";const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("anime-success-checkmark"),s.setAttribute("width","40"),s.setAttribute("height","40"),s.setAttribute("viewBox","0 0 52 52"),s.style.position="absolute",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)",s.style.zIndex="100",s.style.pointerEvents="none";const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M14.1 27.2l7.1 7.2 16.7-16.8"),n.setAttribute("fill","none"),n.setAttribute("stroke","#4CAF50"),n.setAttribute("stroke-width","4"),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-linejoin","round"),s.appendChild(n),e.appendChild(s),Fr(n,{duration:800,easing:"easeInOutQuad",complete:()=>{anime({targets:s,opacity:0,delay:1e3,duration:500,easing:"linear",complete:()=>s.remove()})}}).finished}function Nr(e){et()&&(anime.set(e,{scale:.8,opacity:0,rotateX:10}),anime({targets:e,scale:1,opacity:1,rotateX:0,duration:800,easing:"easeOutElastic(1, .6)"}))}const Hr={class:"modal-content fade-in"},zr={class:"modal-layout"},Vr={class:"modal-sidebar"},Ur=["src"],jr={class:"modal-sidebar-info"},qr={class:"modal-meta-row"},Gr={class:"modal-meta-row"},Wr={id:"modalFormatBadge",class:"format-badge"},Kr={class:"modal-meta-row"},Qr={class:"modal-meta-value",id:"modalPopularity"},Yr={class:"modal-meta-row"},Zr={class:"modal-score"},Jr={class:"score-value",id:"modalScoreValue"},Xr={class:"modal-meta-row"},eo={class:"modal-meta-value",id:"modalReleased"},to={class:"modal-meta-row",id:"modalHistoryRow"},ao={class:"modal-history-actions"},so={key:0,id:"modalReadChaptersList",class:"modal-chapters-list"},no={key:0,style:{color:"var(--text-secondary)","font-style":"italic"}},ro={class:"modal-main"},oo={id:"modalTitle"},io={id:"modalSynonyms",class:"modal-synonyms"},lo={id:"modalGenres",class:"modal-genres"},co={id:"modalTags",class:"modal-tags"},uo={class:"modal-personal-section",id:"modalPersonalSection"},go={class:"modal-personal-row"},po={class:"modal-personal-content"},mo={class:"star-rating-container"},vo=["onClick","onMouseenter"],fo={class:"star-rating-value"},ho={class:"modal-personal-row"},yo={class:"modal-personal-content"},bo={class:"tag-input-container"},ko={class:"tag-list"},wo={class:"tag-pill-text"},So=["onClick"],Co={class:"tag-input-wrapper"},xo={key:0,class:"tag-suggestions"},Eo=["onClick"],Bo={class:"modal-personal-row"},Mo={class:"modal-personal-content"},_o={class:"notes-editor-container"},Do={class:"notes-char-count"},Lo={class:"modal-description"},Ao=["innerHTML"],Io={id:"modalExternalLinks",class:"modal-external-links"},To=["href"],$o=["href"],Ro={__name:"MangaDetailsModal",setup(e){const t=X(!1),s=X({}),n=V(()=>s.value.anilistData),r=X(!1),i=X([]),l=X({tags:[],notes:"",rating:0}),g=X([]),o=X(""),w=X(0),d=X(null),E=V(()=>n.value?Ze(n.value.format,n.value.countryOfOrigin):"Manga"),T=V(()=>{if(!s.value.status)return{};const k=xt(s.value.status,s.value.customMarker,[]);return{backgroundColor:k.badgeBg,color:k.badgeText}}),O=V(()=>{var k,y;return n.value?n.value.bannerImage||((k=n.value.coverImage)==null?void 0:k.extraLarge)||((y=n.value.coverImage)==null?void 0:y.large):null}),x=V(()=>{var k;return O.value?{backgroundImage:`url('${O.value}')`,display:"block",filter:(k=n.value)!=null&&k.bannerImage?"none":"blur(4px) brightness(0.7)"}:{}}),b=V(()=>{var k,y;return n.value&&(((k=n.value.coverImage)==null?void 0:k.large)||((y=n.value.coverImage)==null?void 0:y.medium))||"https://mangadex.org/img/avatar.png"}),f=V(()=>{var y,L;if(!((L=(y=n.value)==null?void 0:y.startDate)!=null&&L.year))return"Unknown";const k=n.value.startDate;return`${k.year}${k.month?"-"+k.month:""}${k.day?"-"+k.day:""}`}),u=V(()=>{var F;if(!((F=n.value)!=null&&F.externalLinks))return[];const k=n.value.externalLinks,y=new Map;k.forEach(N=>{y.has(N.site)||y.set(N.site,[]),y.get(N.site).push(N)});const L=[];return y.forEach(N=>{if(N.length>1){const q=N.find(G=>{const W=(G.language||"").toLowerCase(),J=(G.url||"").toLowerCase();return W==="english"||J.includes("/en/")||J.includes("/english")||J.includes("language=en")});L.push(q||N[0])}else L.push(N[0])}),L}),v=V(()=>[...i.value].sort((k,y)=>{const L=parseFloat(k.replace(/[^\d.]/g,""))||0;return(parseFloat(y.replace(/[^\d.]/g,""))||0)-L})),h=V(()=>{const k=o.value.toLowerCase().trim();return k?g.value.filter(y=>y.toLowerCase().includes(k)&&!l.value.tags.includes(y)).slice(0,5):[]}),$=async k=>{s.value=k,r.value=!1,t.value=!0,Q(),l.value=await Xe(k),g.value=await qe(),setTimeout(()=>{d.value&&(d.value.scrollTop=0);const y=document.querySelector("#mangaDetailsModal .modal-content");y&&Nr(y)},0)},j=()=>{t.value=!1},H=()=>{r.value=!r.value},Q=()=>{var k;(k=chrome.runtime)!=null&&k.id&&chrome.storage.local.get(["savedReadChapters"],y=>{const L=y.savedReadChapters||{},F=s.value.title.toLowerCase(),N=s.value.title.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),q=s.value.mangaSlug?s.value.mangaSlug.split(".")[0]:null,G=Object.keys(L).find(W=>{const J=W.toLowerCase(),se=J.replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");if(W.startsWith("webtoon:")){const ne=W.replace("webtoon:","").replace(/-/g," ").toLowerCase(),ce=W.replace("webtoon:","").toLowerCase();if(F.includes(ne)||N===ce||ne.includes(F))return!0}return J===F||se===N||q&&se===q||q&&J===q});i.value=G?L[G]:[]})},M=async()=>{var N,q;const k=(N=n.value)==null?void 0:N.chapters;if(!k||k<=0){alert("Unable to mark all as read: Total chapter count is unknown.");return}if(!confirm(`Mark all ${k} chapters as read?`))return;const y=Array.from({length:k},(G,W)=>String(W+1)),L=G=>G.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),F=((q=s.value.mangaSlug)==null?void 0:q.split(".")[0])||L(s.value.title);chrome.storage.local.get(["savedReadChapters"],G=>{const W=G.savedReadChapters||{};W[F]=y,chrome.storage.local.set({savedReadChapters:W},()=>{i.value=y,s.value.readChapters=k,s.value.lastChapterRead=String(k),s.value.lastRead=Date.now(),chrome.storage.local.get(["savedEntriesMerged"],se=>{const ne=se.savedEntriesMerged||[],ce=ne.findIndex(ye=>{var xe,Ee;return((xe=ye.anilistData)==null?void 0:xe.id)===((Ee=n.value)==null?void 0:Ee.id)||ye.mangaSlug===s.value.mangaSlug});ce!==-1&&(ne[ce]={...s.value},chrome.storage.local.set({savedEntriesMerged:ne},()=>{window.refreshLibraryData&&window.refreshLibraryData()}))});const J=document.querySelector(".btn-primary.btn-sm");J&&Or(J)})})},c=async k=>{l.value.rating=k,await En(s.value,k)},m=async()=>{await xn(s.value,l.value.notes)},p=async()=>{const k=o.value.trim();k&&!l.value.tags.includes(k)&&(l.value.tags.push(k),await Sn(s.value,k),g.value=await qe()),o.value=""},D=k=>{o.value=k,p()},P=async k=>{l.value.tags=l.value.tags.filter(y=>y!==k),await Cn(s.value,k)},I=k=>{const y=k*2,L=w.value||l.value.rating;return L>=y?"full":L>=y-1?"half":""},R=k=>{const y=k*2;return(w.value||l.value.rating)>=y-1?"‚òÖ":"‚òÜ"};return Re(()=>{window.showMangaDetails=$}),(k,y)=>{var L,F,N,q,G,W,J,se,ne,ce,ye,xe,Ee,ut,gt;return t.value?(S(),C("div",{key:0,id:"mangaDetailsModal",class:"modal-overlay",onClick:Ie(j,["self"])},[a("div",Hr,[a("button",{class:"modal-close",id:"closeMangaDetails",onClick:j},"√ó"),O.value?(S(),C("div",{key:0,id:"modalBanner",class:"modal-banner",style:ue(x.value)},null,4)):ee("",!0),a("div",{class:"modal-body",ref_key:"modalBodyRef",ref:d},[a("div",zr,[a("div",Vr,[a("img",{id:"modalCover",src:b.value,alt:"Cover",class:"modal-cover"},null,8,Ur),a("div",jr,[a("div",qr,[y[3]||(y[3]=a("span",{class:"modal-meta-label"},"Status",-1)),a("div",{id:"modalStatusBadge",class:"manga-card-status",style:ue(T.value)},B(s.value.status),5)]),a("div",Gr,[y[4]||(y[4]=a("span",{class:"modal-meta-label"},"Format",-1)),a("div",Wr,B(E.value),1)]),a("div",Kr,[y[5]||(y[5]=a("span",{class:"modal-meta-label"},"Popularity",-1)),a("div",Qr,B(((F=(L=n.value)==null?void 0:L.popularity)==null?void 0:F.toLocaleString())||"-"),1)]),a("div",Yr,[y[6]||(y[6]=a("span",{class:"modal-meta-label"},"Average Score",-1)),a("div",Zr,[a("span",Jr,B((N=n.value)!=null&&N.averageScore?n.value.averageScore+"%":"-"),1)])]),a("div",Xr,[y[7]||(y[7]=a("span",{class:"modal-meta-label"},"Released",-1)),a("div",eo,B(f.value),1)]),a("div",to,[y[8]||(y[8]=a("span",{class:"modal-meta-label"},"History",-1)),a("div",ao,[a("button",{class:"btn btn-ghost btn-sm",onClick:H,style:{padding:"2px 8px","font-size":"11px"}},B(r.value?"Hide Chapters":"Show Chapters"),1),a("button",{class:"btn btn-primary btn-sm",onClick:M,style:{padding:"2px 8px","font-size":"11px"},title:"Mark all chapters as read up to total"},"‚úì Mark All Read")]),r.value?(S(),C("div",so,[(S(!0),C(te,null,oe(v.value,z=>(S(),C("span",{key:z,class:"chapter-pill"},B(z),1))),128)),v.value.length===0?(S(),C("span",no," No history found ")):ee("",!0)])):ee("",!0)])])]),a("div",ro,[a("h2",oo,B(((G=(q=n.value)==null?void 0:q.title)==null?void 0:G.english)||((J=(W=n.value)==null?void 0:W.title)==null?void 0:J.romaji)||s.value.title),1),a("div",io,[(S(!0),C(te,null,oe((ne=(se=n.value)==null?void 0:se.synonyms)==null?void 0:ne.slice(0,5),z=>(S(),C("span",{key:z,class:"modal-synonym-item"},B(z),1))),128))]),a("div",lo,[(S(!0),C(te,null,oe((ce=n.value)==null?void 0:ce.genres,z=>(S(),C("span",{key:z,class:"modal-genre-tag"},B(z),1))),128))]),a("div",co,[(S(!0),C(te,null,oe((xe=(ye=n.value)==null?void 0:ye.tags)==null?void 0:xe.slice(0,10),z=>(S(),C("span",{key:z.name,class:"modal-tag"},B(z.name),1))),128))]),a("div",uo,[y[12]||(y[12]=a("h4",null,"üìù Your Data",-1)),a("div",go,[y[9]||(y[9]=a("span",{class:"modal-personal-label"},"Rating",-1)),a("div",po,[a("div",mo,[(S(),C(te,null,oe(5,z=>a("span",{key:z,class:ie(["star-rating-star",I(z)]),onClick:Le=>c(z*2),onMouseenter:Le=>w.value=z*2,onMouseleave:y[0]||(y[0]=Le=>w.value=0)},B(R(z)),43,vo)),64)),a("span",fo,B(l.value.rating>0?l.value.rating+"/10":""),1)])])]),a("div",ho,[y[10]||(y[10]=a("span",{class:"modal-personal-label"},"Tags",-1)),a("div",yo,[a("div",bo,[a("div",ko,[(S(!0),C(te,null,oe(l.value.tags,z=>(S(),C("span",{key:z,class:"tag-pill"},[a("span",wo,B(z),1),a("button",{class:"tag-pill-remove",onClick:Le=>P(z)},"√ó",8,So)]))),128))]),a("div",Co,[le(a("input",{type:"text","onUpdate:modelValue":y[1]||(y[1]=z=>o.value=z),class:"tag-input",placeholder:"Add tag...",onKeydown:Wt(p,["enter"])},null,544),[[_e,o.value]]),h.value.length>0?(S(),C("div",xo,[(S(!0),C(te,null,oe(h.value,z=>(S(),C("div",{key:z,class:"tag-suggestion-item",onClick:Le=>D(z)},B(z),9,Eo))),128))])):ee("",!0)])])])]),a("div",Bo,[y[11]||(y[11]=a("span",{class:"modal-personal-label"},"Notes",-1)),a("div",Mo,[a("div",_o,[le(a("textarea",{"onUpdate:modelValue":y[2]||(y[2]=z=>l.value.notes=z),class:"notes-textarea",placeholder:"Add personal notes...",rows:"3",onBlur:m},null,544),[[_e,l.value.notes]]),a("span",Do,B(((Ee=l.value.notes)==null?void 0:Ee.length)||0)+"/500",1)])])])]),a("div",Lo,[y[13]||(y[13]=a("h3",null,"Synopsis",-1)),a("p",{id:"modalDescriptionText",innerHTML:((ut=n.value)==null?void 0:ut.description)||"No description available."},null,8,Ao)]),a("div",Io,[(gt=n.value)!=null&&gt.siteUrl?(S(),C("a",{key:0,class:"external-link-btn primary",href:n.value.siteUrl,target:"_blank"},[...y[14]||(y[14]=[a("span",null,"AniList",-1)])],8,To)):ee("",!0),(S(!0),C(te,null,oe(u.value,z=>(S(),C("a",{key:z.url,class:"external-link-btn",href:z.url,target:"_blank"},B(z.site),9,$o))),128))])])])],512)])])):ee("",!0)}}},Po=pe(Ro,[["__scopeId","data-v-aa90d06c"]]);const Fo={class:"app-container"},Oo={class:"main-content"},No={__name:"App",setup(e){return Re(()=>{ya()}),(t,s)=>(S(),C(te,null,[a("div",Fo,[s[0]||(s[0]=de('<aside class="sidebar"><div class="brand"><div class="brand-icon"><span class="icon-svg icon-brand"></span></div><span class="brand-name header-text-gradient">Color Marker</span></div><nav class="nav-menu"><a href="#" class="nav-item active" data-tab="settings"><span class="nav-icon">‚öôÔ∏è</span> General Settings </a><a href="#" class="nav-item" data-tab="saved-entries"><span class="nav-icon">üìö</span> Saved Entries </a><a href="#" class="nav-item" data-tab="import-export"><span class="nav-icon">üìÇ</span> Import &amp; Export </a><a href="#" class="nav-item" data-tab="appearance"><span class="nav-icon">üé®</span> Appearance </a><a href="#" class="nav-item" data-tab="about"><span class="nav-icon">‚ÑπÔ∏è</span> About </a><div class="nav-indicator"></div></nav><div class="sidebar-footer"><a href="https://www.buymeacoffee.com" target="_blank" class="sidebar-btn support-sidebar-btn" title="Support Developer"><span class="icon">‚òï</span><span class="label">Support Dev</span></a><div class="version-info">Version 3.7.0</div></div></aside>',1)),a("main",Oo,[_(Pa),_(za),_(qn),_(Br),_(Pr)])]),s[1]||(s[1]=a("button",{id:"scrollToTopBtn",class:"scroll-to-top",title:"Go to top"},[a("svg",{class:"icon-svg icon-arrow-up"})],-1)),_(Po)],64))}};(function(){try{const e=localStorage.getItem("theme"),t=document.documentElement;t.classList.remove("dark-mode","black-mode","neon-mode","light-mode"),e==="light"?t.classList.add("light-mode"):e==="black"?t.classList.add("black-mode"):e==="neon"?t.classList.add("neon-mode"):t.classList.add("dark-mode")}catch(e){console.error("Preloader error:",e)}})();var Et={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},tt={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Ho=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],$e={CSS:{},springs:{}};function me(e,t,s){return Math.min(Math.max(e,t),s)}function De(e,t){return e.indexOf(t)>-1}function Ue(e,t){return e.apply(null,t)}var A={arr:function(e){return Array.isArray(e)},obj:function(e){return De(Object.prototype.toString.call(e),"Object")},pth:function(e){return A.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||A.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return A.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return A.hex(e)||A.rgb(e)||A.hsl(e)},key:function(e){return!Et.hasOwnProperty(e)&&!tt.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function Bt(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(s){return parseFloat(s)}):[]}function Mt(e,t){var s=Bt(e),n=me(A.und(s[0])?1:s[0],.1,100),r=me(A.und(s[1])?100:s[1],.1,100),i=me(A.und(s[2])?10:s[2],.1,100),l=me(A.und(s[3])?0:s[3],.1,100),g=Math.sqrt(r/n),o=i/(2*Math.sqrt(r*n)),w=o<1?g*Math.sqrt(1-o*o):0,d=1,E=o<1?(o*g+-l)/w:-l+g;function T(x){var b=t?t*x/1e3:x;return o<1?b=Math.exp(-b*o*g)*(d*Math.cos(w*b)+E*Math.sin(w*b)):b=(d+E*b)*Math.exp(-b*g),x===0||x===1?x:1-b}function O(){var x=$e.springs[e];if(x)return x;for(var b=1/6,f=0,u=0;;)if(f+=b,T(f)===1){if(u++,u>=16)break}else u=0;var v=f*b*1e3;return $e.springs[e]=v,v}return t?T:O}function zo(e){return e===void 0&&(e=10),function(t){return Math.ceil(me(t,1e-6,1)*e)*(1/e)}}var Vo=function(){var e=11,t=1/(e-1);function s(d,E){return 1-3*E+3*d}function n(d,E){return 3*E-6*d}function r(d){return 3*d}function i(d,E,T){return((s(E,T)*d+n(E,T))*d+r(E))*d}function l(d,E,T){return 3*s(E,T)*d*d+2*n(E,T)*d+r(E)}function g(d,E,T,O,x){var b,f,u=0;do f=E+(T-E)/2,b=i(f,O,x)-d,b>0?T=f:E=f;while(Math.abs(b)>1e-7&&++u<10);return f}function o(d,E,T,O){for(var x=0;x<4;++x){var b=l(E,T,O);if(b===0)return E;var f=i(E,T,O)-d;E-=f/b}return E}function w(d,E,T,O){if(!(0<=d&&d<=1&&0<=T&&T<=1))return;var x=new Float32Array(e);if(d!==E||T!==O)for(var b=0;b<e;++b)x[b]=i(b*t,d,T);function f(u){for(var v=0,h=1,$=e-1;h!==$&&x[h]<=u;++h)v+=t;--h;var j=(u-x[h])/(x[h+1]-x[h]),H=v+j*t,Q=l(H,d,T);return Q>=.001?o(u,H,d,T):Q===0?H:g(u,v,v+t,d,T)}return function(u){return d===E&&T===O||u===0||u===1?u:i(f(u),E,O)}}return w}(),_t=function(){var e={linear:function(){return function(n){return n}}},t={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var r,i=4;n<((r=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((r*3-2)/22-n,2)}},Elastic:function(n,r){n===void 0&&(n=1),r===void 0&&(r=.5);var i=me(n,1,10),l=me(r,.1,2);return function(g){return g===0||g===1?g:-i*Math.pow(2,10*(g-1))*Math.sin((g-1-l/(Math.PI*2)*Math.asin(1/i))*(Math.PI*2)/l)}}},s=["Quad","Cubic","Quart","Quint","Expo"];return s.forEach(function(n,r){t[n]=function(){return function(i){return Math.pow(i,r+2)}}}),Object.keys(t).forEach(function(n){var r=t[n];e["easeIn"+n]=r,e["easeOut"+n]=function(i,l){return function(g){return 1-r(i,l)(1-g)}},e["easeInOut"+n]=function(i,l){return function(g){return g<.5?r(i,l)(g*2)/2:1-r(i,l)(g*-2+2)/2}},e["easeOutIn"+n]=function(i,l){return function(g){return g<.5?(1-r(i,l)(1-g*2))/2:(r(i,l)(g*2-1)+1)/2}}}),e}();function at(e,t){if(A.fnc(e))return e;var s=e.split("(")[0],n=_t[s],r=Bt(e);switch(s){case"spring":return Mt(e,t);case"cubicBezier":return Ue(Vo,r);case"steps":return Ue(zo,r);default:return Ue(n,r)}}function Dt(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function Fe(e,t){for(var s=e.length,n=arguments.length>=2?arguments[1]:void 0,r=[],i=0;i<s;i++)if(i in e){var l=e[i];t.call(n,l,i,e)&&r.push(l)}return r}function Oe(e){return e.reduce(function(t,s){return t.concat(A.arr(s)?Oe(s):s)},[])}function yt(e){return A.arr(e)?e:(A.str(e)&&(e=Dt(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function st(e,t){return e.some(function(s){return s===t})}function nt(e){var t={};for(var s in e)t[s]=e[s];return t}function Ge(e,t){var s=nt(e);for(var n in e)s[n]=t.hasOwnProperty(n)?t[n]:e[n];return s}function Ne(e,t){var s=nt(e);for(var n in t)s[n]=A.und(e[n])?t[n]:e[n];return s}function Uo(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function jo(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,s=e.replace(t,function(g,o,w,d){return o+o+w+w+d+d}),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s),r=parseInt(n[1],16),i=parseInt(n[2],16),l=parseInt(n[3],16);return"rgba("+r+","+i+","+l+",1)"}function qo(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),s=parseInt(t[1],10)/360,n=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100,i=t[4]||1;function l(T,O,x){return x<0&&(x+=1),x>1&&(x-=1),x<1/6?T+(O-T)*6*x:x<1/2?O:x<2/3?T+(O-T)*(2/3-x)*6:T}var g,o,w;if(n==0)g=o=w=r;else{var d=r<.5?r*(1+n):r+n-r*n,E=2*r-d;g=l(E,d,s+1/3),o=l(E,d,s),w=l(E,d,s-1/3)}return"rgba("+g*255+","+o*255+","+w*255+","+i+")"}function Go(e){if(A.rgb(e))return Uo(e);if(A.hex(e))return jo(e);if(A.hsl(e))return qo(e)}function he(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function Wo(e){if(De(e,"translate")||e==="perspective")return"px";if(De(e,"rotate")||De(e,"skew"))return"deg"}function We(e,t){return A.fnc(e)?e(t.target,t.id,t.total):e}function ve(e,t){return e.getAttribute(t)}function rt(e,t,s){var n=he(t);if(st([s,"deg","rad","turn"],n))return t;var r=$e.CSS[t+s];if(!A.und(r))return r;var i=100,l=document.createElement(e.tagName),g=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;g.appendChild(l),l.style.position="absolute",l.style.width=i+s;var o=i/l.offsetWidth;g.removeChild(l);var w=o*parseFloat(t);return $e.CSS[t+s]=w,w}function Lt(e,t,s){if(t in e.style){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=e.style[t]||getComputedStyle(e).getPropertyValue(n)||"0";return s?rt(e,r,s):r}}function ot(e,t){if(A.dom(e)&&!A.inp(e)&&(!A.nil(ve(e,t))||A.svg(e)&&e[t]))return"attribute";if(A.dom(e)&&st(Ho,t))return"transform";if(A.dom(e)&&t!=="transform"&&Lt(e,t))return"css";if(e[t]!=null)return"object"}function At(e){if(A.dom(e)){for(var t=e.style.transform||"",s=/(\w+)\(([^)]*)\)/g,n=new Map,r;r=s.exec(t);)n.set(r[1],r[2]);return n}}function Ko(e,t,s,n){var r=De(t,"scale")?1:0+Wo(t),i=At(e).get(t)||r;return s&&(s.transforms.list.set(t,i),s.transforms.last=t),n?rt(e,i,n):i}function it(e,t,s,n){switch(ot(e,t)){case"transform":return Ko(e,t,n,s);case"css":return Lt(e,t,s);case"attribute":return ve(e,t);default:return e[t]||0}}function lt(e,t){var s=/^(\*=|\+=|-=)/.exec(e);if(!s)return e;var n=he(e)||0,r=parseFloat(t),i=parseFloat(e.replace(s[0],""));switch(s[0][0]){case"+":return r+i+n;case"-":return r-i+n;case"*":return r*i+n}}function It(e,t){if(A.col(e))return Go(e);if(/\s/g.test(e))return e;var s=he(e),n=s?e.substr(0,e.length-s.length):e;return t?n+t:n}function dt(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Qo(e){return Math.PI*2*ve(e,"r")}function Yo(e){return ve(e,"width")*2+ve(e,"height")*2}function Zo(e){return dt({x:ve(e,"x1"),y:ve(e,"y1")},{x:ve(e,"x2"),y:ve(e,"y2")})}function Tt(e){for(var t=e.points,s=0,n,r=0;r<t.numberOfItems;r++){var i=t.getItem(r);r>0&&(s+=dt(n,i)),n=i}return s}function Jo(e){var t=e.points;return Tt(e)+dt(t.getItem(t.numberOfItems-1),t.getItem(0))}function $t(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return Qo(e);case"rect":return Yo(e);case"line":return Zo(e);case"polyline":return Tt(e);case"polygon":return Jo(e)}}function Xo(e){var t=$t(e);return e.setAttribute("stroke-dasharray",t),t}function ei(e){for(var t=e.parentNode;A.svg(t)&&A.svg(t.parentNode);)t=t.parentNode;return t}function Rt(e,t){var s=t||{},n=s.el||ei(e),r=n.getBoundingClientRect(),i=ve(n,"viewBox"),l=r.width,g=r.height,o=s.viewBox||(i?i.split(" "):[0,0,l,g]);return{el:n,viewBox:o,x:o[0]/1,y:o[1]/1,w:l,h:g,vW:o[2],vH:o[3]}}function ti(e,t){var s=A.str(e)?Dt(e)[0]:e,n=t||100;return function(r){return{property:r,el:s,svg:Rt(s),totalLength:$t(s)*(n/100)}}}function ai(e,t,s){function n(d){d===void 0&&(d=0);var E=t+d>=1?t+d:0;return e.el.getPointAtLength(E)}var r=Rt(e.el,e.svg),i=n(),l=n(-1),g=n(1),o=s?1:r.w/r.vW,w=s?1:r.h/r.vH;switch(e.property){case"x":return(i.x-r.x)*o;case"y":return(i.y-r.y)*w;case"angle":return Math.atan2(g.y-l.y,g.x-l.x)*180/Math.PI}}function bt(e,t){var s=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=It(A.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(s)?n.match(s).map(Number):[0],strings:A.str(e)||t?n.split(s):[]}}function ct(e){var t=e?Oe(A.arr(e)?e.map(yt):yt(e)):[];return Fe(t,function(s,n,r){return r.indexOf(s)===n})}function Pt(e){var t=ct(e);return t.map(function(s,n){return{target:s,id:n,total:t.length,transforms:{list:At(s)}}})}function si(e,t){var s=nt(t);if(/^spring/.test(s.easing)&&(s.duration=Mt(s.easing)),A.arr(e)){var n=e.length,r=n===2&&!A.obj(e[0]);r?e={value:e}:A.fnc(t.duration)||(s.duration=t.duration/n)}var i=A.arr(e)?e:[e];return i.map(function(l,g){var o=A.obj(l)&&!A.pth(l)?l:{value:l};return A.und(o.delay)&&(o.delay=g?0:t.delay),A.und(o.endDelay)&&(o.endDelay=g===i.length-1?t.endDelay:0),o}).map(function(l){return Ne(l,s)})}function ni(e){for(var t=Fe(Oe(e.map(function(i){return Object.keys(i)})),function(i){return A.key(i)}).reduce(function(i,l){return i.indexOf(l)<0&&i.push(l),i},[]),s={},n=function(i){var l=t[i];s[l]=e.map(function(g){var o={};for(var w in g)A.key(w)?w==l&&(o.value=g[w]):o[w]=g[w];return o})},r=0;r<t.length;r++)n(r);return s}function ri(e,t){var s=[],n=t.keyframes;n&&(t=Ne(ni(n),t));for(var r in t)A.key(r)&&s.push({name:r,tweens:si(t[r],e)});return s}function oi(e,t){var s={};for(var n in e){var r=We(e[n],t);A.arr(r)&&(r=r.map(function(i){return We(i,t)}),r.length===1&&(r=r[0])),s[n]=r}return s.duration=parseFloat(s.duration),s.delay=parseFloat(s.delay),s}function ii(e,t){var s;return e.tweens.map(function(n){var r=oi(n,t),i=r.value,l=A.arr(i)?i[1]:i,g=he(l),o=it(t.target,e.name,g,t),w=s?s.to.original:o,d=A.arr(i)?i[0]:w,E=he(d)||he(o),T=g||E;return A.und(l)&&(l=w),r.from=bt(d,T),r.to=bt(lt(l,d),T),r.start=s?s.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=at(r.easing,r.duration),r.isPath=A.pth(i),r.isPathTargetInsideSVG=r.isPath&&A.svg(t.target),r.isColor=A.col(r.from.original),r.isColor&&(r.round=1),s=r,r})}var Ft={css:function(e,t,s){return e.style[t]=s},attribute:function(e,t,s){return e.setAttribute(t,s)},object:function(e,t,s){return e[t]=s},transform:function(e,t,s,n,r){if(n.list.set(t,s),t===n.last||r){var i="";n.list.forEach(function(l,g){i+=g+"("+l+") "}),e.style.transform=i}}};function Ot(e,t){var s=Pt(e);s.forEach(function(n){for(var r in t){var i=We(t[r],n),l=n.target,g=he(i),o=it(l,r,g,n),w=g||he(o),d=lt(It(i,w),o),E=ot(l,r);Ft[E](l,r,d,n.transforms,!0)}})}function li(e,t){var s=ot(e.target,t.name);if(s){var n=ii(t,e),r=n[n.length-1];return{type:s,property:t.name,animatable:e,tweens:n,duration:r.end,delay:n[0].delay,endDelay:r.endDelay}}}function di(e,t){return Fe(Oe(e.map(function(s){return t.map(function(n){return li(s,n)})})),function(s){return!A.und(s)})}function Nt(e,t){var s=e.length,n=function(i){return i.timelineOffset?i.timelineOffset:0},r={};return r.duration=s?Math.max.apply(Math,e.map(function(i){return n(i)+i.duration})):t.duration,r.delay=s?Math.min.apply(Math,e.map(function(i){return n(i)+i.delay})):t.delay,r.endDelay=s?r.duration-Math.max.apply(Math,e.map(function(i){return n(i)+i.duration-i.endDelay})):t.endDelay,r}var kt=0;function ci(e){var t=Ge(Et,e),s=Ge(tt,e),n=ri(s,e),r=Pt(e.targets),i=di(r,n),l=Nt(i,s),g=kt;return kt++,Ne(t,{id:g,children:[],animatables:r,animations:i,duration:l.duration,delay:l.delay,endDelay:l.endDelay})}var ge=[],Ht=function(){var e;function t(){!e&&(!wt()||!Z.suspendWhenDocumentHidden)&&ge.length>0&&(e=requestAnimationFrame(s))}function s(r){for(var i=ge.length,l=0;l<i;){var g=ge[l];g.paused?(ge.splice(l,1),i--):(g.tick(r),l++)}e=l>0?requestAnimationFrame(s):void 0}function n(){Z.suspendWhenDocumentHidden&&(wt()?e=cancelAnimationFrame(e):(ge.forEach(function(r){return r._onDocumentVisibility()}),Ht()))}return typeof document<"u"&&document.addEventListener("visibilitychange",n),t}();function wt(){return!!document&&document.hidden}function Z(e){e===void 0&&(e={});var t=0,s=0,n=0,r,i=0,l=null;function g(v){var h=window.Promise&&new Promise(function($){return l=$});return v.finished=h,h}var o=ci(e);g(o);function w(){var v=o.direction;v!=="alternate"&&(o.direction=v!=="normal"?"normal":"reverse"),o.reversed=!o.reversed,r.forEach(function(h){return h.reversed=o.reversed})}function d(v){return o.reversed?o.duration-v:v}function E(){t=0,s=d(o.currentTime)*(1/Z.speed)}function T(v,h){h&&h.seek(v-h.timelineOffset)}function O(v){if(o.reversePlayback)for(var $=i;$--;)T(v,r[$]);else for(var h=0;h<i;h++)T(v,r[h])}function x(v){for(var h=0,$=o.animations,j=$.length;h<j;){var H=$[h],Q=H.animatable,M=H.tweens,c=M.length-1,m=M[c];c&&(m=Fe(M,function(ne){return v<ne.end})[0]||m);for(var p=me(v-m.start-m.delay,0,m.duration)/m.duration,D=isNaN(p)?1:m.easing(p),P=m.to.strings,I=m.round,R=[],k=m.to.numbers.length,y=void 0,L=0;L<k;L++){var F=void 0,N=m.to.numbers[L],q=m.from.numbers[L]||0;m.isPath?F=ai(m.value,D*N,m.isPathTargetInsideSVG):F=q+D*(N-q),I&&(m.isColor&&L>2||(F=Math.round(F*I)/I)),R.push(F)}var G=P.length;if(!G)y=R[0];else{y=P[0];for(var W=0;W<G;W++){P[W];var J=P[W+1],se=R[W];isNaN(se)||(J?y+=se+J:y+=se+" ")}}Ft[H.type](Q.target,H.property,y,Q.transforms),H.currentValue=y,h++}}function b(v){o[v]&&!o.passThrough&&o[v](o)}function f(){o.remaining&&o.remaining!==!0&&o.remaining--}function u(v){var h=o.duration,$=o.delay,j=h-o.endDelay,H=d(v);o.progress=me(H/h*100,0,100),o.reversePlayback=H<o.currentTime,r&&O(H),!o.began&&o.currentTime>0&&(o.began=!0,b("begin")),!o.loopBegan&&o.currentTime>0&&(o.loopBegan=!0,b("loopBegin")),H<=$&&o.currentTime!==0&&x(0),(H>=j&&o.currentTime!==h||!h)&&x(h),H>$&&H<j?(o.changeBegan||(o.changeBegan=!0,o.changeCompleted=!1,b("changeBegin")),b("change"),x(H)):o.changeBegan&&(o.changeCompleted=!0,o.changeBegan=!1,b("changeComplete")),o.currentTime=me(H,0,h),o.began&&b("update"),v>=h&&(s=0,f(),o.remaining?(t=n,b("loopComplete"),o.loopBegan=!1,o.direction==="alternate"&&w()):(o.paused=!0,o.completed||(o.completed=!0,b("loopComplete"),b("complete"),!o.passThrough&&"Promise"in window&&(l(),g(o)))))}return o.reset=function(){var v=o.direction;o.passThrough=!1,o.currentTime=0,o.progress=0,o.paused=!0,o.began=!1,o.loopBegan=!1,o.changeBegan=!1,o.completed=!1,o.changeCompleted=!1,o.reversePlayback=!1,o.reversed=v==="reverse",o.remaining=o.loop,r=o.children,i=r.length;for(var h=i;h--;)o.children[h].reset();(o.reversed&&o.loop!==!0||v==="alternate"&&o.loop===1)&&o.remaining++,x(o.reversed?o.duration:0)},o._onDocumentVisibility=E,o.set=function(v,h){return Ot(v,h),o},o.tick=function(v){n=v,t||(t=n),u((n+(s-t))*Z.speed)},o.seek=function(v){u(d(v))},o.pause=function(){o.paused=!0,E()},o.play=function(){o.paused&&(o.completed&&o.reset(),o.paused=!1,ge.push(o),E(),Ht())},o.reverse=function(){w(),o.completed=!o.reversed,E()},o.restart=function(){o.reset(),o.play()},o.remove=function(v){var h=ct(v);zt(h,o)},o.reset(),o.autoplay&&o.play(),o}function St(e,t){for(var s=t.length;s--;)st(e,t[s].animatable.target)&&t.splice(s,1)}function zt(e,t){var s=t.animations,n=t.children;St(e,s);for(var r=n.length;r--;){var i=n[r],l=i.animations;St(e,l),!l.length&&!i.children.length&&n.splice(r,1)}!s.length&&!n.length&&t.pause()}function ui(e){for(var t=ct(e),s=ge.length;s--;){var n=ge[s];zt(t,n)}}function gi(e,t){t===void 0&&(t={});var s=t.direction||"normal",n=t.easing?at(t.easing):null,r=t.grid,i=t.axis,l=t.from||0,g=l==="first",o=l==="center",w=l==="last",d=A.arr(e),E=parseFloat(d?e[0]:e),T=d?parseFloat(e[1]):0,O=he(d?e[1]:e)||0,x=t.start||0+(d?E:0),b=[],f=0;return function(u,v,h){if(g&&(l=0),o&&(l=(h-1)/2),w&&(l=h-1),!b.length){for(var $=0;$<h;$++){if(!r)b.push(Math.abs(l-$));else{var j=o?(r[0]-1)/2:l%r[0],H=o?(r[1]-1)/2:Math.floor(l/r[0]),Q=$%r[0],M=Math.floor($/r[0]),c=j-Q,m=H-M,p=Math.sqrt(c*c+m*m);i==="x"&&(p=-c),i==="y"&&(p=-m),b.push(p)}f=Math.max.apply(Math,b)}n&&(b=b.map(function(P){return n(P/f)*f})),s==="reverse"&&(b=b.map(function(P){return i?P<0?P*-1:-P:Math.abs(f-P)}))}var D=d?(T-E)/f:E;return x+D*(Math.round(b[v]*100)/100)+O}}function pi(e){e===void 0&&(e={});var t=Z(e);return t.duration=0,t.add=function(s,n){var r=ge.indexOf(t),i=t.children;r>-1&&ge.splice(r,1);function l(T){T.passThrough=!0}for(var g=0;g<i.length;g++)l(i[g]);var o=Ne(s,Ge(tt,e));o.targets=o.targets||e.targets;var w=t.duration;o.autoplay=!1,o.direction=t.direction,o.timelineOffset=A.und(n)?w:lt(n,w),l(t),t.seek(o.timelineOffset);var d=Z(o);l(d),i.push(d);var E=Nt(i,e);return t.delay=E.delay,t.endDelay=E.endDelay,t.duration=E.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}Z.version="3.2.1";Z.speed=1;Z.suspendWhenDocumentHidden=!0;Z.running=ge;Z.remove=ui;Z.get=it;Z.set=Ot;Z.convertPx=rt;Z.path=ti;Z.setDashoffset=Xo;Z.stagger=gi;Z.timeline=pi;Z.easing=at;Z.penner=_t;Z.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};window.anime=Z;console.log("[Options] anime loaded:",typeof window.anime);Kt(No).mount("#app");
