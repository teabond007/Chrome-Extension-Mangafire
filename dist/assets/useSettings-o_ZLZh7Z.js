import{S as a}from"./storage-schema-i3DC1Zp8.js";import{B as L,o as U,p as H,d as y,r as s}from"./main-B0rinBDx.js";const m={Reading:"#4ade80",Completed:"#60a5fa","Plan to Read":"#fbbf24","On-Hold":"#f97316","On Hold":"#f97316",Dropped:"#ef4444","Re-reading":"#a855f7",HasHistory:"#9ca3af"},h={size:4,style:"solid",radius:"8px"},F=["solid","dashed","dotted","double","groove","ridge"],b={highlighting:!0,progressBadges:!0,quickActions:!0,notifications:!0,autoScroll:!0,keyboardShortcuts:!0,newChapterBadge:!0,autoSync:!1,customBookmarks:!1,markHomePage:!1,syncAndMarkRead:!1,newTabDashboard:!1,webtoonsHighlight:!0,familyFriendly:!1},v={"cloudy-dark":{name:"Cloudy Dark",bgBody:"#0a0e14",bgSidebar:"#151a21",bgSurface:"#1a1f27",bgElevated:"#242a33",accentPrimary:"#ff6b6b",accentSecondary:"#4ecdc4",textPrimary:"#ffffff",textSecondary:"#9ca3af",textMuted:"#6b7280",border:"#2d3748"},"midnight-blue":{name:"Midnight Blue",bgBody:"#0f172a",bgSidebar:"#1e293b",bgSurface:"#1e293b",bgElevated:"#334155",accentPrimary:"#60a5fa",accentSecondary:"#a855f7",textPrimary:"#f8fafc",textSecondary:"#94a3b8",textMuted:"#64748b",border:"#475569"},forest:{name:"Forest",bgBody:"#0d1f0d",bgSidebar:"#1a2f1a",bgSurface:"#1a2f1a",bgElevated:"#2d4a2d",accentPrimary:"#4ade80",accentSecondary:"#86efac",textPrimary:"#f0fdf4",textSecondary:"#86efac",textMuted:"#6b9b6b",border:"#365936"}},O={small:{width:"150px",height:"225px"},medium:{width:"180px",height:"270px"},large:{width:"220px",height:"330px"}};function Y(){const E=s(!1),g=s(!0),l=s("cloudy-dark"),n=s({...m}),i=s({...h}),o=s({...b}),c=s("medium"),u=s([]),d=s({}),p=y(()=>v[l.value]||v["cloudy-dark"]),M=y(()=>O[c.value]||O.medium),C=y(()=>Object.entries(v).map(([e,t])=>({id:e,name:t.name})));async function R(){g.value=!0;try{const e=await chrome.storage.local.get([a.THEME,a.STATUS_COLORS,a.BORDER_STYLE,a.BORDER_SIZE,a.CUSTOM_MARKERS,"features","cardSize"]);e[a.THEME]&&(l.value=e[a.THEME]),e[a.STATUS_COLORS]&&(n.value={...m,...e[a.STATUS_COLORS]}),e[a.BORDER_STYLE]&&(i.value.style=e[a.BORDER_STYLE]),e[a.BORDER_SIZE]&&(i.value.size=e[a.BORDER_SIZE]),e[a.CUSTOM_MARKERS]&&(u.value=e[a.CUSTOM_MARKERS]),e.features&&(o.value={...b,...e.features}),e.cardSize&&(c.value=e.cardSize),e.platformSettings&&(d.value=e.platformSettings),E.value=!0,console.log("[useSettings] ✓ Settings loaded")}catch(e){console.error("[useSettings] Failed to load settings:",e)}finally{g.value=!1}}async function f(){try{await chrome.storage.local.set({[a.THEME]:l.value,[a.STATUS_COLORS]:n.value,[a.BORDER_STYLE]:i.value.style,[a.BORDER_SIZE]:i.value.size,[a.CUSTOM_MARKERS]:u.value,features:o.value,cardSize:c.value,platformSettings:d.value}),console.log("[useSettings] ✓ Settings saved")}catch(e){console.error("[useSettings] Failed to save settings:",e)}}async function _(e,t){const r=e.split(".");r.length===1?e==="theme"?l.value=t:e==="cardSize"&&(c.value=t):r[0]==="border"?i.value[r[1]]=t:r[0]==="features"?o.value[r[1]]=t:r[0]==="statusColors"?n.value[r[1]]=t:r[0]==="platforms"&&r.length===3&&(d.value[r[1]]||(d.value[r[1]]={}),d.value[r[1]][r[2]]=t),await f()}function x(e){return n.value[e]||"transparent"}function B(e){return o.value[e]??!1}async function P(e){o.value[e]=!o.value[e],await f()}async function w(e,t){u.value.push({name:e,color:t}),await f()}async function A(e){u.value=u.value.filter(t=>t.name!==e),await f()}function S(){const e=p.value,t=document.documentElement;t.style.setProperty("--color-bg-body",e.bgBody),t.style.setProperty("--color-bg-sidebar",e.bgSidebar),t.style.setProperty("--color-bg-surface",e.bgSurface),t.style.setProperty("--color-bg-elevated",e.bgElevated),t.style.setProperty("--color-primary",e.accentPrimary),t.style.setProperty("--color-accent",e.accentSecondary),t.style.setProperty("--color-text-primary",e.textPrimary),t.style.setProperty("--color-text-secondary",e.textSecondary),t.style.setProperty("--color-text-muted",e.textMuted),t.style.setProperty("--color-border",e.border)}async function D(){l.value="cloudy-dark",n.value={...m},i.value={...h},o.value={...b},c.value="medium",u.value=[],await f(),S()}function T(e,t){t==="local"&&(e[a.THEME]&&(l.value=e[a.THEME].newValue,S()),e[a.STATUS_COLORS]&&(n.value=e[a.STATUS_COLORS].newValue),e.features&&(o.value=e.features.newValue))}return L(l,()=>{S()}),U(async()=>{await R(),S(),chrome.storage.onChanged.addListener(T)}),H(()=>{chrome.storage.onChanged.removeListener(T)}),{isLoaded:E,isLoading:g,theme:l,statusColors:n,border:i,features:o,cardSize:c,customMarkers:u,platforms:d,themeConfig:p,cardDimensions:M,availableThemes:C,loadSettings:R,saveSettings:f,updateSetting:_,getStatusColor:x,isFeatureEnabled:B,toggleFeature:P,addCustomMarker:w,removeCustomMarker:A,applyTheme:S,resetToDefaults:D}}export{F as B,Y as u};
