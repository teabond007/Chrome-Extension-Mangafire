import{u as x}from"./useLibrary-DABP6zvl.js";import{G as k}from"./GlassCard-rkL6pgvQ.js";import{B as _}from"./BaseButton-G3PIWAFR.js";import{_ as S,c as a,g as n,e as y,a as e,f as h,t as o,z as C,r as B,n as V,b as u,s as f,u as r,A as N,F as T,j as F}from"./main-B0rinBDx.js";import"./storage-schema-i3DC1Zp8.js";/* empty css                                                                   */const O={key:0,class:"input-label"},j={key:0,class:"required"},q={class:"input-container"},A={key:0,class:"input-icon"},E=["value","type","placeholder","disabled","required"],U={key:1,class:"input-spinner"},D={key:1,class:"input-error"},z={key:2,class:"input-hint"},J={__name:"BaseInput",props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},label:{type:String,default:""},placeholder:{type:String,default:""},icon:{type:String,default:""},error:{type:String,default:""},hint:{type:String,default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s){const d=B(!1),c=B(null);return(p,i)=>(n(),a("div",{class:V(["base-input-wrapper",{"has-error":s.error,"is-disabled":s.disabled}])},[s.label?(n(),a("label",O,[h(o(s.label)+" ",1),s.required?(n(),a("span",j,"*")):y("",!0)])):y("",!0),e("div",q,[s.icon?(n(),a("span",A,o(s.icon),1)):y("",!0),e("input",C({ref_key:"inputRef",ref:c,value:s.modelValue,type:s.type,placeholder:s.placeholder,disabled:s.disabled,required:s.required,class:["base-input",{"has-icon":s.icon}]},p.$attrs,{onInput:i[0]||(i[0]=m=>p.$emit("update:modelValue",m.target.value)),onFocus:i[1]||(i[1]=m=>d.value=!0),onBlur:i[2]||(i[2]=m=>d.value=!1)}),null,16,E),s.loading?(n(),a("div",U)):y("",!0)]),s.error?(n(),a("span",D,o(s.error),1)):s.hint?(n(),a("span",z,o(s.hint),1)):y("",!0)],2))}},G=S(J,[["__scopeId","data-v-50433b2a"]]),P={class:"tab-content"},M={class:"stats-grid"},Q={class:"stat-item total"},Z={class:"stat-value"},H={class:"stat-item reading"},K={class:"stat-value"},W={class:"stat-item completed"},X={class:"stat-value"},Y={class:"stat-item planned"},ee={class:"stat-value"},te={class:"actions-row"},se={class:"action-buttons"},ae={class:"actions-row danger-zone"},ne={class:"action-buttons"},le={class:"library-controls"},oe={class:"search-box"},re={class:"entries-preview"},ie={key:0,class:"empty-state"},de={key:1,class:"entries-list"},ue={class:"entry-title"},ce=["data-status"],pe={key:0,class:"more-entries"},fe={__name:"LibraryTab",setup(s){const{stats:d,filteredEntries:c,searchQuery:p,clearLibrary:i,entriesArray:m}=x(),I=B(null),$=()=>{const g=JSON.stringify(m.value,null,2),t=new Blob([g],{type:"application/json"}),l=URL.createObjectURL(t),b=document.createElement("a");b.href=l,b.download=`mangafire-backup-${new Date().toISOString().split("T")[0]}.json`,b.click(),URL.revokeObjectURL(l)},w=()=>{I.value.click()},L=g=>{const t=g.target.files[0];if(!t)return;const l=new FileReader;l.onload=async b=>{try{const v=JSON.parse(b.target.result);Array.isArray(v)?(console.log("Imported",v.length,"entries"),alert("Import function stub - File parsed successfully ("+v.length+" entries)")):alert("Invalid backup format")}catch(v){console.error(v),alert("Failed to parse backup file")}},l.readAsText(t)},R=()=>{confirm("Are you sure you want to delete all library entries? This cannot be undone.")&&i()};return(g,t)=>(n(),a("div",P,[u(k,{title:"Library Statistics",subtitle:"Overview of your reading progress"},{default:f(()=>[e("div",M,[e("div",Q,[e("span",Z,o(r(d).total),1),t[1]||(t[1]=e("span",{class:"stat-label"},"Total Entries",-1))]),e("div",H,[e("span",K,o(r(d).reading),1),t[2]||(t[2]=e("span",{class:"stat-label"},"Reading",-1))]),e("div",W,[e("span",X,o(r(d).completed),1),t[3]||(t[3]=e("span",{class:"stat-label"},"Completed",-1))]),e("div",Y,[e("span",ee,o(r(d).planToRead),1),t[4]||(t[4]=e("span",{class:"stat-label"},"Plan to Read",-1))])])]),_:1}),u(k,{title:"Data Management",subtitle:"Backup and restore your library"},{default:f(()=>[e("div",te,[t[7]||(t[7]=e("div",{class:"action-info"},[e("h3",null,"Backup & Restore"),e("p",null,"Export your library to a JSON file or import from a backup.")],-1)),e("div",se,[u(_,{variant:"secondary",icon:"ðŸ“¥",onClick:$},{default:f(()=>[...t[5]||(t[5]=[h(" Export Backup ",-1)])]),_:1}),u(_,{variant:"secondary",icon:"ðŸ“¤",onClick:w},{default:f(()=>[...t[6]||(t[6]=[h(" Import Backup ",-1)])]),_:1}),e("input",{type:"file",ref_key:"fileInput",ref:I,accept:".json",style:{display:"none"},onChange:L},null,544)])]),e("div",ae,[t[9]||(t[9]=e("div",{class:"action-info"},[e("h3",null,"Danger Zone"),e("p",null,"Irreversible actions for data management.")],-1)),e("div",ne,[u(_,{variant:"danger",icon:"ðŸ—‘ï¸",onClick:R},{default:f(()=>[...t[8]||(t[8]=[h(" Clear Library ",-1)])]),_:1})])])]),_:1}),u(k,{title:"Library Browser",subtitle:"Browse and manage entries"},{default:f(()=>[e("div",le,[e("div",oe,[u(G,{modelValue:r(p),"onUpdate:modelValue":t[0]||(t[0]=l=>N(p)?p.value=l:null),placeholder:"Search library...",icon:"ðŸ”"},null,8,["modelValue"])])]),e("div",re,[r(c).length===0?(n(),a("div",ie," No entries found matching your criteria. ")):(n(),a("div",de,[(n(!0),a(T,null,F(r(c).slice(0,5),l=>(n(),a("div",{key:l.id,class:"entry-item"},[e("span",ue,o(l.title),1),e("span",{class:"entry-status box-badge","data-status":l.status},o(l.status),9,ce)]))),128)),r(c).length>5?(n(),a("div",pe," +"+o(r(c).length-5)+" more entries ",1)):y("",!0)]))])]),_:1})]))}},ke=S(fe,[["__scopeId","data-v-3537f0bf"]]);export{ke as default};
