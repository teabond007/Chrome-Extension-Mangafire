import{C as o,R as c}from"./ReaderEnhancer-5WGslhQ1.js";import"./storage-schema-5IIhgyd6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./config-C-HYl_Rw.js";const i={id:"mangadex",name:"MangaDex",selectors:{card:'.manga-card, .hchaptercard, a[href*="/title/"]:has(img), [class*="chapter-feed__container"]',cardLink:'a[href*="/title/"]',cardTitle:'a[href*="/title/"] h6, a.title span, a.title, [class*="title"]'},extractCardData(e){try{const t=e.querySelector(this.selectors.cardLink)||(e.tagName==="A"&&e.href.includes("/title/")?e:null);if(!t)return null;const r=t.href,l=this.extractUUID(r);let n="",a=e.querySelector("h6")||e.querySelector("span.font-bold")||e.querySelector(".title")||e.querySelector('[class*="title"]');return a?n=a.textContent.trim():t.textContent&&t.textContent.trim().length>0&&(n=t.textContent.trim()),!n&&t.title&&(n=t.title),{title:n||"Unknown Title",url:r,id:l,slug:this.extractSlug(n)}}catch(t){return console.warn("[MangaDex] Extraction error:",t),null}},extractUUID(e){if(!e)return"";const t=e.match(/\/(title|chapter)\/([a-f0-9-]{36})/i);return t?t[2]:""},extractSlug(e){return e?e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""):""},applyBorder(e,t){var n;let r=e;const l=e.querySelector(".manga-card-cover")||((n=e.querySelector("img"))==null?void 0:n.parentElement);l&&(r=l,getComputedStyle(r).position==="static"&&(r.style.position="relative")),r.style.border=`3px solid ${t}`,r.style.borderRadius="8px",r.style.boxSizing="border-box",r.classList.add("bmh-bordered")},isReaderPage(){return window.location.href.includes("/chapter/")},parseUrl(e){const t=document.title,r=t.match(/Ch\.(\d+(\.\d+)?)/)||t.match(/Chapter (\d+)/);if(this.extractUUID(e),r){const l=document.querySelector('a[href*="/title/"]');let n="",a="";return l&&(n=this.extractUUID(l.href),a=this.extractSlug(l.textContent)),{id:n,slug:a,chapterNo:r[1]}}return null},goToNextChapter(){const e=document.querySelectorAll("a");for(let t of e)if(t.textContent.includes("Next Chapter")){t.click();return}},goToPrevChapter(){const e=document.querySelectorAll("a");for(let t of e)if(t.textContent.includes("Previous Chapter")){t.click();return}}},s=new o(i);s.init();i.isReaderPage()&&setTimeout(()=>{new c(i).init()},1e3);console.log("[MangaDex] Enhancer loaded.");
