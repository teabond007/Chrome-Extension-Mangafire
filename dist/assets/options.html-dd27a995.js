import{b as C,d as x,e as a,t as E,f as Z,n as ie,g as ce,r as Qe,h as V,i as _,w as W,c as de,j as U,k as jt,o as Pe,l as le,v as qt,F as ee,m as oe,p as X,q as Gt,u as Wt,s as Te,x as we,y as Le,z as ze,A as Kt,B as Qt,a as Yt}from"./runtime-dom.esm-bundler-0ef316fb.js";import{b as Zt,f as Jt,a as Xt,w as ea}from"./mangadex-api-9a5edea1.js";function ta(){const e=document.querySelectorAll(".nav-item"),t=document.querySelectorAll(".tab-pane"),s=document.querySelector(".nav-indicator"),n=document.querySelector(".nav-item.active");n&&s&&mt(n,s,!1),e.forEach(r=>{r.addEventListener("click",i=>{i.preventDefault();const l=r.getAttribute("data-tab");if(!l)return;e.forEach(m=>m.classList.remove("active")),r.classList.add("active"),s&&mt(r,s);const p=document.querySelector(".tab-pane.active"),o=document.getElementById(`tab-${l}`);p!==o&&(typeof window.anime<"u"?p?window.anime({targets:p,opacity:0,translateY:-10,duration:200,easing:"easeInQuad",complete:()=>{p.style.display="none",p.classList.remove("active"),vt(o)}}):vt(o):t.forEach(m=>{m.id===`tab-${l}`?(m.style.display="block",setTimeout(()=>m.classList.add("active"),10)):(m.style.display="none",m.classList.remove("active"))}))})})}function mt(e,t,s=!0){const n=document.querySelector(".nav-menu");if(!n)return;const r=e.getBoundingClientRect(),i=n.getBoundingClientRect(),l=r.top-i.top,p=r.height;if(!s){t.style.top=`${l+p/2-15}px`;return}typeof window.anime<"u"?window.anime({targets:t,top:l+p/2-15,height:[30,45,30],duration:500,easing:"easeOutElastic(1, .5)"}):t.style.top=`${l+p/2-15}px`}function vt(e){if(e)if(e.style.display="block",e.style.opacity="0",e.style.transform="translateY(10px)",e.classList.add("active"),typeof window.anime<"u"){window.anime({targets:e,opacity:[0,1],translateY:[10,0],duration:400,easing:"easeOutQuad",delay:50});const t=e.querySelectorAll(".card");t.length>0&&window.anime({targets:t,opacity:[0,1],translateY:[20,0],delay:window.anime.stagger(100,{start:100}),duration:500,easing:"easeOutCubic"})}else e.style.opacity="1",e.style.transform="translateY(0)"}function aa(){document.querySelectorAll(".info-redirect-btn").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const s=e.getAttribute("data-target"),n=document.querySelector('.nav-item[data-tab="about"]');if(n&&(n.click(),s)){const r=document.getElementById(s);r&&setTimeout(()=>{r.scrollIntoView({behavior:"smooth",block:"center"}),r.classList.add("highlight-pulse"),setTimeout(()=>r.classList.remove("highlight-pulse"),2e3)},300)}})})}function sa(){const e=document.getElementById("scrollToTopBtn"),t=document.querySelector(".main-content");!e||!t||(t.addEventListener("scroll",()=>{t.scrollTop>300?e.classList.add("visible"):e.classList.remove("visible")}),e.addEventListener("click",()=>{t.scrollTo({top:0,behavior:"smooth"})}))}function na(){var t;const e=window.location.hash;if(e){if(e.includes("library")||e.includes("saved-entries")){const s=document.querySelector('.nav-item[data-tab="saved-entries"]');s&&s.click()}if(e.includes("showDetails="))try{const s=e.split("showDetails=");if(s.length>1){const n=decodeURIComponent(s[1].split("&")[0]);(t=chrome.runtime)!=null&&t.id&&chrome.storage.local.get(["savedEntriesMerged"],r=>{const i=r.savedEntriesMerged||[],l=n.toLowerCase().trim(),p=i.find(o=>o.title.toLowerCase().trim()===l);if(p){const o=(m=0)=>{window.showMangaDetails?window.showMangaDetails(p):m<20&&setTimeout(()=>o(m+1),200)};o()}})}}catch(s){console.error("[UI] Error parsing URL params:",s)}}}function ra(){chrome.runtime.onMessage.addListener(e=>{var t;if(e.type==="showMangaDetails"){const s=document.querySelector('.nav-item[data-tab="saved-entries"]');s&&s.click(),(t=chrome.runtime)!=null&&t.id&&chrome.storage.local.get(["savedEntriesMerged"],n=>{const r=n.savedEntriesMerged||[],i=(e.title||"").toLowerCase().trim(),l=r.find(p=>p.title.toLowerCase().trim()===i);if(l){const p=(o=0)=>{window.showMangaDetails?window.showMangaDetails(l):o<10&&setTimeout(()=>p(o+1),200)};p()}})}})}function oa(){const e=[{id:"MarkHomePage",storageKey:"MangaFireHighlightEnabled"},{id:"MangaFireQuickActions",storageKey:"MangaFireQuickActionsEnabled",defaultValue:!0},{id:"MangaFireShowProgress",storageKey:"MangaFireShowProgress",defaultValue:!0},{id:"SyncandMarkRead",storageKey:"SyncandMarkReadfeatureEnabled"},{id:"CustomBookmarks",storageKey:"CustomBookmarksfeatureEnabled"},{id:"AutoSync",storageKey:"AutoSyncfeatureEnabled"},{id:"CustomBorderSize",storageKey:"CustomBorderSizefeatureEnabled"},{id:"FamilyFriendly",storageKey:"FamilyFriendlyfeatureEnabled"},{id:"NewTabDashboard",storageKey:"NewTabDashboardfeatureEnabled"},{id:"DashboardLayoutStyle",storageKey:"DashboardLayoutStylePacked"},{id:"SmartAutoComplete",storageKey:"SmartAutoCompletefeatureEnabled"},{id:"SmartInactivityFade",storageKey:"SmartInactivityFadefeatureEnabled"},{id:"SmartResumeLink",storageKey:"SmartResumeLinkfeatureEnabled"},{id:"MangaDexHighlightEnabled",storageKey:"MangaDexHighlightEnabled",defaultValue:!0},{id:"MangaDexShowProgress",storageKey:"MangaDexShowProgress",defaultValue:!0},{id:"WebtoonsHighlightEnabled",storageKey:"WebtoonsHighlightfeatureEnabled",defaultValue:!0},{id:"WebtoonsShowProgress",storageKey:"WebtoonsShowProgress",defaultValue:!0},{id:"WebtoonsBorderSizeEnabled",storageKey:"WebtoonsBorderSizefeatureEnabled",defaultValue:!1},{id:"NotificationsEnabled",storageKey:"NotificationsfeatureEnabled",defaultValue:!1},{id:"AutoScrollEnabled",storageKey:"autoScrollEnabled",defaultValue:!0},{id:"KeybindsEnabled",storageKey:"keybindsEnabled",defaultValue:!0},{id:"ProgressTrackingEnabled",storageKey:"progressTrackingEnabled",defaultValue:!0}];e.forEach(t=>{const s=document.getElementById(t.id);s&&(chrome.storage.local.get(t.storageKey,n=>{const r=t.defaultValue!==void 0?t.defaultValue:!1;s.checked=n[t.storageKey]!==void 0?n[t.storageKey]:r}),s.addEventListener("change",()=>{const n={};n[t.storageKey]=s.checked,chrome.storage.local.set(n)}))}),chrome.storage.onChanged.addListener((t,s)=>{s==="local"&&e.forEach(n=>{if(t[n.storageKey]){const r=document.getElementById(n.id);r&&(r.checked=t[n.storageKey].newValue)}})})}function ia(){la()}function la(){const e=document.getElementById("AutoSyncSetDaysButton"),t=document.getElementById("AutoSyncSetDaysButtonReset"),s=document.getElementById("AutoSyncSetDays"),n=document.getElementById("logContainerSetDays");chrome.storage.local.get("SyncEverySetDate",r=>{s&&(s.value=r.SyncEverySetDate||30)}),e&&e.addEventListener("click",()=>{const r=s.value;chrome.storage.local.set({SyncEverySetDate:r},()=>{n&&(n.textContent=`Saved: Sync every ${r} days.`,setTimeout(()=>n.textContent="",3e3))})}),t&&t.addEventListener("click",()=>{chrome.storage.local.set({SyncEverySetDate:30},()=>{s&&(s.value=30),n&&(n.textContent="Reset to default (30 days).",setTimeout(()=>n.textContent="",3e3))})})}function ae(e){const t=document.getElementById("logContainer");if(!t)return;const s=document.createElement("div");s.textContent=`> ${e}`,t.appendChild(s),t.scrollTop=t.scrollHeight}function ca(e){if(!e)return"";const t=document.createElement("textarea");return t.innerHTML=e,t.value}function da(){const e=document.getElementById("addBookmarkButton"),t=document.getElementById("resetBookmarkButton");e&&e.addEventListener("click",()=>{const s=document.getElementById("bookmarkName").value,n=document.getElementById("colorBookmarks").value,r=document.getElementById("customBorderStyleSelect").value;s&&n?chrome.storage.local.get("customBookmarks",i=>{const l=Array.isArray(i.customBookmarks)?i.customBookmarks:[],p={name:s,color:n,style:r};chrome.storage.local.set({customBookmarks:[...l,p]},()=>{ae(`Added custom marker: ${s}`),document.getElementById("bookmarkName").value="",$e()})}):alert("Please enter a name for the marker.")}),t&&t.addEventListener("click",()=>{confirm("Are you sure you want to remove all custom markers?")&&chrome.storage.local.remove("customBookmarks",()=>{ae("All custom markers removed."),$e()})}),$e()}function $e(){chrome.storage.local.get("customBookmarks",e=>{const t=e.customBookmarks||[],s=document.getElementById("CustomBookmarksContainer");if(s){if(s.innerHTML="",t.length===0){const n=document.createElement("span");n.className="description",n.style.margin="0",n.textContent="No active markers.",s.appendChild(n);return}t.forEach((n,r)=>{const i=document.createElement("div");i.className="marker-pill",i.style.backgroundColor=`${n.color}33`,i.style.border=`2px ${n.style} ${n.color}CC`,i.textContent=n.name,i.title="Click to remove",i.addEventListener("click",()=>{confirm(`Remove marker "${n.name}"?`)&&ua(r)}),s.appendChild(i)})}})}function ua(e){chrome.storage.local.get("customBookmarks",t=>{const s=t.customBookmarks||[];if(e>=0&&e<s.length){const n=s.splice(e,1);chrome.storage.local.set({customBookmarks:s},()=>{ae(`Marker removed: ${n[0].name}`),$e()})}})}const Ce={library:{keys:["savedEntriesMerged","userBookmarks"],label:"Library Entries"},history:{keys:["savedReadChapters"],label:"Reading History"},settings:{keys:["CustomBorderSize","MarkHomePagefeatureEnabled","SyncandMarkReadfeatureEnabled","CustomBookmarksfeatureEnabled","AutoSyncfeatureEnabled","CustomBorderSizefeatureEnabled","FamilyFriendlyfeatureEnabled","SmartAutoCompletefeatureEnabled","MangaDexHighlightEnabled","MangaDexShowProgress","WebtoonsHighlightfeatureEnabled","WebtoonsShowProgress","WebtoonsBorderSizefeatureEnabled","WebtoonsBorderSize","MangaFireHighlightEnabled","MangaFireShowProgress","MangaFireQuickActionsEnabled","autoScrollEnabled","keybindsEnabled","progressTrackingEnabled","cardViewSize","theme","LibraryCardBordersEnabled","LibraryCardBorderThickness","LibraryGlowEffect","LibraryAnimatedBorders","LibraryStatusIcons","LibraryProgressBars","SyncLastDate","SyncEverySetDate","customBookmarks"],label:"Settings"},personalData:{keys:["libraryPersonalData","libraryUserTags","libraryFilterPresets"],label:"Tags, Notes & Ratings"},cache:{keys:["anilistCache","mangadexCache"],label:"API Cache"}};function ga(){const e=document.getElementById("exportDataBtn"),t=document.getElementById("startImportBtn"),s=document.getElementById("importDataInput"),n=document.getElementById("dropZone"),r=document.getElementById("mergeImportToggle"),i=document.getElementById("lastBackupDisplay"),l=document.getElementById("exportLibrary"),p=document.getElementById("exportHistory"),o=document.getElementById("exportSettings"),m=document.getElementById("exportPersonalData"),v=document.getElementById("exportCache"),u=document.getElementById("exportLibraryCount"),I=document.getElementById("exportHistoryCount"),O=document.getElementById("exportPersonalCount"),S=document.getElementById("exportCacheCount"),w=()=>{chrome.storage.local.get(null,d=>{const B=Array.isArray(d.savedEntriesMerged)?d.savedEntriesMerged.length:Array.isArray(d.userBookmarks)?d.userBookmarks.length:0;u&&(u.textContent=`(${B})`);const R=d.savedReadChapters?Object.keys(d.savedReadChapters).length:0;I&&(I.textContent=`(${R} titles)`);const A=d.libraryPersonalData?Object.keys(d.libraryPersonalData).length:0;O&&(O.textContent=`(${A})`);const $=h(d);S&&(S.textContent=`(${g($)})`)})},h=d=>{let B=0;return d.anilistCache&&(B+=JSON.stringify(d.anilistCache).length),d.mangadexCache&&(B+=JSON.stringify(d.mangadexCache).length),B},g=d=>d<1024?`${d} B`:d<1024*1024?`${(d/1024).toFixed(1)} KB`:`${(d/(1024*1024)).toFixed(1)} MB`,f=()=>{chrome.storage.local.get("LastBackupDate",d=>{if(i)if(d.LastBackupDate){const B=new Date(d.LastBackupDate);i.textContent=B.toLocaleString()}else i.textContent="Never"})};f(),w();const y=()=>{const d=["LastBackupDate"];if(l!=null&&l.checked&&d.push(...Ce.library.keys),p!=null&&p.checked&&d.push(...Ce.history.keys),o!=null&&o.checked&&d.push(...Ce.settings.keys),m!=null&&m.checked&&d.push(...Ce.personalData.keys),v!=null&&v.checked&&d.push(...Ce.cache.keys),d.length===1){alert("Please select at least one data category to export.");return}chrome.storage.local.get(d,B=>{B._exportMeta={version:"3.9.0",exportDate:new Date().toISOString(),categories:{library:(l==null?void 0:l.checked)||!1,history:(p==null?void 0:p.checked)||!1,settings:(o==null?void 0:o.checked)||!1,personalData:(m==null?void 0:m.checked)||!1,cache:(v==null?void 0:v.checked)||!1}};const R=new Blob([JSON.stringify(B,null,2)],{type:"application/json"}),A=URL.createObjectURL(R),$=document.createElement("a");$.href=A,$.download=`mangafire_backup_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(A);const k=Date.now();chrome.storage.local.set({LastBackupDate:k},()=>{f(),ae("Data exported successfully.")})})};e&&e.addEventListener("click",y);const T=d=>{if(!d)return;const B=d.type==="application/json"||d.name.endsWith(".json"),R=d.type==="text/xml"||d.type==="application/xml"||d.name.endsWith(".xml");if(!B&&!R){alert("Please select a valid JSON or XML file.");return}const A=new FileReader;A.onload=$=>{try{let k;if(B?k=JSON.parse($.target.result):R&&(k=N($.target.result)),!k)throw new Error("Failed to parse data");j(k,r==null?void 0:r.checked)}catch(k){console.error("Import error:",k),alert("Failed to parse file. Please ensure it is a valid backup or MyAnimeList XML export.")}},A.readAsText(d)},j=(d,B)=>{const R={libraryEntries:Array.isArray(d.savedEntriesMerged)?d.savedEntriesMerged.length:Array.isArray(d.userBookmarks)?d.userBookmarks.length:0,historyTitles:d.savedReadChapters?Object.keys(d.savedReadChapters).length:0,personalData:d.libraryPersonalData?Object.keys(d.libraryPersonalData).length:0,hasSettings:Object.keys(d).some($=>Ce.settings.keys.includes($)),hasCache:!!d.anilistCache||!!d.mangadexCache};let A=`üìÅ Import Preview

`;A+=`üìö Library: ${R.libraryEntries} entries
`,A+=`üìñ History: ${R.historyTitles} titles
`,A+=`üè∑Ô∏è Personal Data: ${R.personalData} entries
`,A+=`‚öôÔ∏è Settings: ${R.hasSettings?"Included":"Not included"}
`,A+=`üíæ Cache: ${R.hasCache?"Included":"Not included"}

`,A+=`Mode: ${B?"MERGE (keeps existing data)":"OVERWRITE (replaces all data)"}`,B||(A+=`

‚ö†Ô∏è WARNING: This will delete all your current data!`),confirm(A+`

Proceed with import?`)&&(B?te(d):Q(d))},N=d=>{const A=new DOMParser().parseFromString(d,"text/xml").querySelectorAll("manga");if(A.length===0)throw new Error("No manga entries found in XML.");return{userBookmarks:Array.from(A).map(k=>{const b=k.querySelector("manga_title"),F=k.querySelector("my_status"),L=k.querySelector("my_read_chapters");let P=b?ca(b.textContent.trim()):"Unknown Title",z=F?F.textContent.trim():"Reading",G=L&&parseInt(L.textContent.trim())||0;return z==="On-Hold"&&(z="On Hold"),{title:P,status:z,readChapters:G}})}},Q=d=>{delete d._exportMeta,chrome.storage.local.clear(()=>{chrome.storage.local.set(d,()=>{ae("Data imported (Overwrite) successfully."),alert("‚úÖ Import successful! The page will now reload."),location.reload()})})},te=d=>{delete d._exportMeta,chrome.storage.local.get(null,B=>{const R={...B,...d};if(d.userBookmarks&&B.userBookmarks){const A=new Map;B.userBookmarks.forEach($=>A.set($.title.toLowerCase(),$)),d.userBookmarks.forEach($=>A.set($.title.toLowerCase(),$)),R.userBookmarks=Array.from(A.values())}if(d.savedEntriesMerged&&B.savedEntriesMerged){const A=new Map;B.savedEntriesMerged.forEach($=>A.set($.title.toLowerCase(),$)),d.savedEntriesMerged.forEach($=>A.set($.title.toLowerCase(),$)),R.savedEntriesMerged=Array.from(A.values())}if(d.customBookmarks&&B.customBookmarks){const A=new Map;B.customBookmarks.forEach($=>A.set($.name.toLowerCase(),$)),d.customBookmarks.forEach($=>A.set($.name.toLowerCase(),$)),R.customBookmarks=Array.from(A.values())}if(d.savedReadChapters&&B.savedReadChapters){const A={...B.savedReadChapters};Object.entries(d.savedReadChapters).forEach(([$,k])=>{A[$]?A[$]=[...new Set([...A[$],...k])]:A[$]=k}),R.savedReadChapters=A}d.anilistCache&&B.anilistCache&&(R.anilistCache={...B.anilistCache,...d.anilistCache}),d.libraryPersonalData&&B.libraryPersonalData&&(R.libraryPersonalData={...B.libraryPersonalData,...d.libraryPersonalData}),chrome.storage.local.set(R,()=>{ae("Data imported (Merge) successfully."),alert("‚úÖ Import successful! New data has been merged."),location.reload()})})};n&&(n.addEventListener("click",()=>s==null?void 0:s.click()),n.addEventListener("dragover",d=>{d.preventDefault(),n.classList.add("drag-over")}),n.addEventListener("dragleave",()=>{n.classList.remove("drag-over")}),n.addEventListener("drop",d=>{d.preventDefault(),n.classList.remove("drag-over"),d.dataTransfer.files.length>0&&T(d.dataTransfer.files[0])})),t&&t.addEventListener("click",()=>s==null?void 0:s.click()),s&&s.addEventListener("change",d=>{d.target.files.length>0&&T(d.target.files[0])});const M=document.getElementById("mdlistImportBtn"),c=document.getElementById("mdlistInput");M&&c&&M.addEventListener("click",async()=>{const d=c.value.trim();if(!d){alert("Please enter a MangaDex list URL or ID.");return}M.disabled=!0,M.textContent="Importing...";try{const B=await Zt(d);if(!B.success){alert(`Import failed: ${B.error}`);return}if(B.manga.length===0){alert("No manga found in this list.");return}chrome.storage.local.get(["savedEntriesMerged"],R=>{let A=Array.isArray(R.savedEntriesMerged)?R.savedEntriesMerged:[];const $=new Set(A.map(L=>L.title.toLowerCase())),k=new Set(A.filter(L=>{var P;return(P=L.anilistData)==null?void 0:P.mangadexId}).map(L=>L.anilistData.mangadexId));let b=0,F=0;B.manga.forEach(L=>{var G,q;const P=((G=L.title)==null?void 0:G.english)||((q=L.title)==null?void 0:q.romaji)||"Unknown",z=L.mangadexId;if($.has(P.toLowerCase())||k.has(z)){F++;return}A.push({title:P,status:"Plan to Read",readChapters:0,anilistData:L,customMarker:null,lastUpdated:Date.now(),importedFrom:"MDList"}),b++}),chrome.storage.local.set({savedEntriesMerged:A},()=>{alert(`‚úÖ Imported ${b} manga from "${B.listName}". ${F} duplicates skipped.`),c.value="",location.reload()})})}catch(B){console.error("MDList import error:",B),alert(`Import error: ${B.message}`)}finally{M.disabled=!1,M.textContent="Import"}})}let Se=[],ke=!1;function ft(e){return{title:e.title||"Unknown",readChapters:e.readChapters||0,anilistData:e.anilistData,...e}}function pa(){chrome.storage.local.get(["savedEntriesMerged"],e=>{Se=(Array.isArray(e.savedEntriesMerged)?e.savedEntriesMerged:[]).map(ft),ke||xt()}),chrome.storage.onChanged.addListener((e,t)=>{t==="local"&&e.savedEntriesMerged&&(Se=(e.savedEntriesMerged.newValue||[]).map(ft))}),window.cleanLibraryDuplicates=ma,window.forceSyncLibrary=fa}function ma(){const e=new Map;let t=0;if(Se.forEach(s=>{const n=s.title.toLowerCase().trim(),r=e.get(n);if(!r)e.set(n,s);else{const i=parseInt(String(r.readChapters||0));(parseInt(String(s.readChapters||0))>i||!r.anilistData&&s.anilistData)&&e.set(n,s),t++}}),t>0){const s=Array.from(e.values());chrome.storage.local.set({savedEntriesMerged:s},()=>{console.log(`Library cleaned: removed ${t} duplicates.`),window.refreshLibraryData&&window.refreshLibraryData()})}}async function xt(){var t,s,n,r,i;const e=Se.filter(l=>(!l.anilistData||l.anilistData.id&&!l.anilistData.chapters)&&(!l.lastChecked||Date.now()-l.lastChecked>36e5));if(e.length!==0){ke=!0,console.log(`Starting background fetch for ${e.length} entries...`),window.dispatchEvent(new CustomEvent("library-sync-start",{detail:{total:e.length}}));try{for(let l=0;l<e.length;l++){const p=e[l],o=Se.find(u=>u.title===p.title);if(!o)continue;va(l+1,e.length,o.title);let m=await Jt(o.title);const v=m&&(!m.bannerImage||!m.description||!((t=m.coverImage)!=null&&t.large)||((s=m.genres)==null?void 0:s.length)===0);if(!m||v){const u=await Xt(o.title);u&&(m?(!m.bannerImage&&u.bannerImage&&(m.bannerImage=u.bannerImage),!m.description&&u.description&&(m.description=u.description),(!((n=m.coverImage)!=null&&n.large)||m.coverImage.large.includes("default"))&&((r=u.coverImage)!=null&&r.large)&&(m.coverImage=u.coverImage),(!m.genres||m.genres.length===0)&&((i=u.genres)==null?void 0:i.length)>0&&(m.genres=u.genres)):m=u)}m&&(o.anilistData=m),o.lastChecked=Date.now(),await chrome.storage.local.set({savedEntriesMerged:Se}),await new Promise(u=>setTimeout(u,500))}}catch(l){console.error("Error in background metadata fetch:",l)}finally{ke=!1,console.log("Background fetch completed."),window.dispatchEvent(new CustomEvent("library-sync-complete"))}}}function va(e,t,s){window.dispatchEvent(new CustomEvent("library-sync-progress",{detail:{current:e,total:t,title:s}}))}async function fa(){if(ke){if(!confirm("A sync is already in progress. Do you want to restart it? This will effectively stop the current one and start over."))return;ke=!1}ke=!0,console.log("Starting forced library sync..."),Se.forEach(e=>{e.anilistData=void 0,e.lastChecked=void 0}),await ea(),console.log("Cleared MangaDex cache.");try{await xt(),alert("Library sync completed!")}catch(e){console.error("Force sync failed:",e),alert("Sync failed. Check console constraints.")}finally{ke=!1}}const Ve=[{name:"YouTube",url:"https://www.youtube.com"},{name:"ChatGPT",url:"https://chat.openai.com"},{name:"Spotify",url:"https://open.spotify.com"},{name:"Gmail",url:"https://mail.google.com"},{name:"Discord",url:"https://discord.com"}];function ha(){const e=document.getElementById("QuickAccessContainer"),t=document.getElementById("SaveQuickAccessButton"),s=document.getElementById("ResetQuickAccessButton"),n=document.getElementById("logContainerQuickAccess");e&&(chrome.storage.local.get("QuickAccessShortcuts",r=>{const i=r.QuickAccessShortcuts||Ve;ht(e,i)}),t&&t.addEventListener("click",()=>{const r=[];e.querySelectorAll(".shortcut-input-row").forEach(l=>{const p=l.querySelector(".shortcut-name-input"),o=l.querySelector(".shortcut-url-input");p&&o&&o.value.trim()&&r.push({name:p.value.trim()||"Link",url:o.value.trim()})}),chrome.storage.local.set({QuickAccessShortcuts:r},()=>{n&&(n.textContent="Saved: Quick Access shortcuts updated.",setTimeout(()=>n.textContent="",3e3))})}),s&&s.addEventListener("click",()=>{chrome.storage.local.set({QuickAccessShortcuts:Ve},()=>{ht(e,Ve),n&&(n.textContent="Reset to default shortcuts.",setTimeout(()=>n.textContent="",3e3))})}))}function ht(e,t){e.innerHTML="";for(let s=0;s<5;s++){const n=t[s]||{name:"",url:""},r=document.createElement("div");r.className="input-group-row shortcut-input-row",r.style.marginBottom="10px",r.innerHTML=`
            <div class="input-wrapper flex-grow">
                <input type="text" placeholder="Name (e.g. YouTube)" class="input-field shortcut-name-input" value="${n.name}">
            </div>
            <div class="input-wrapper flex-grow-large">
                <input type="text" placeholder="URL (https://...)" class="input-field shortcut-url-input" value="${n.url}">
            </div>
        `,e.appendChild(r)}}let Ue={bg:"#0b1437",sidebar:"#111c44",accent:"#7551FF",text:"#ffffff"};function ya(){ba(),wa(),Sa(),Ca()}function ba(){const e=document.querySelectorAll(".theme-preview-card");e.forEach(t=>{t.addEventListener("click",()=>{console.log("button clicked");const s=t.getAttribute("data-tab")||t.getAttribute("data-theme");Ye(s),e.forEach(n=>n.classList.remove("active")),t.classList.add("active")})})}function Ye(e){const t=document.documentElement;t.classList.remove("dark-mode","black-mode","neon-mode","light-mode","glassy-mode"),e==="light"?t.classList.add("light-mode"):e==="glassy"?t.classList.add("glassy-mode"):t.classList.add(`${e}-mode`),ka(),localStorage.setItem("theme",e),chrome.storage.local.set({theme:e,isCustomTheme:!1}),ae(`Theme switched to ${e}`)}function wa(){const e=document.getElementById("ApplyCustomThemeBtn"),t=document.getElementById("ResetThemeBtn"),s=document.getElementById("themeColorBg"),n=document.getElementById("themeColorSidebar"),r=document.getElementById("themeColorAccent"),i=document.getElementById("themeColorText");e==null||e.addEventListener("click",()=>{Ue={bg:s.value,sidebar:n.value,accent:r.value,text:i.value},Et(Ue),document.querySelectorAll(".theme-preview-card").forEach(l=>l.classList.remove("active")),localStorage.setItem("theme","custom"),chrome.storage.local.set({isCustomTheme:!0,customThemeData:Ue}),ae("Custom theme applied and saved.")}),t==null||t.addEventListener("click",()=>{confirm("Reset to default Cloudy Dark theme?")&&(Ye("dark"),s.value="#0b1437",n.value="#111c44",r.value="#7551FF",i.value="#ffffff",document.querySelectorAll(".theme-preview-card").forEach(l=>{l.getAttribute("data-theme")==="dark"&&l.classList.add("active")}))})}function Et(e){if(!e)return;const t=document.documentElement;t.style.setProperty("--bg-body",e.bg),t.style.setProperty("--bg-card",e.bg),t.style.setProperty("--bg-sidebar",e.sidebar),t.style.setProperty("--accent-primary",e.accent),t.style.setProperty("--primary",e.accent),t.style.setProperty("--text-primary",e.text),t.style.setProperty("--text-white",e.text);const s=yt(e.bg),n=yt(e.text);t.style.setProperty("--glass-bg",`rgba(${s}, 0.4)`),t.style.setProperty("--glass-border",`rgba(${n}, 0.1)`),t.style.setProperty("--border-color",`rgba(${n}, 0.1)`),t.style.setProperty("--input-bg",`rgba(${s}, 0.2)`),t.style.setProperty("--input-border",`rgba(${n}, 0.1)`),document.body.style.backgroundColor=e.bg,ae(`Custom theme applied: BG=${e.bg}, Sidebar=${e.sidebar}`)}function ka(){const e=document.documentElement;["--bg-body","--bg-card","--bg-sidebar","--accent-primary","--primary","--text-primary","--text-white","--glass-bg","--glass-border","--border-color","--input-bg","--input-border"].forEach(s=>e.style.removeProperty(s)),document.body.style.backgroundColor=""}function Sa(){const e=document.getElementById("GlobalBorderSize"),t=document.getElementById("globalRangeValue"),s=document.getElementById("GlobalBorderStyle");e==null||e.addEventListener("input",i=>{const l=i.target.value;t&&(t.textContent=`${l}px`),chrome.storage.local.set({CustomBorderSize:l})}),s==null||s.addEventListener("change",i=>{chrome.storage.local.set({GlobalBorderStyle:i.target.value})});const n=document.getElementById("WebtoonsBorderSizeSlider"),r=document.getElementById("WebtoonsBorderSizeValue");n==null||n.addEventListener("input",i=>{const l=i.target.value;r&&(r.textContent=`${l}px`),chrome.storage.local.set({WebtoonsBorderSize:parseInt(l,10)})})}function Ca(){chrome.storage.local.get(["theme","isCustomTheme","customThemeData","CustomBorderSize","GlobalBorderStyle","WebtoonsBorderSize"],e=>{if(e.isCustomTheme&&e.customThemeData)Et(e.customThemeData),document.getElementById("themeColorBg")&&(document.getElementById("themeColorBg").value=e.customThemeData.bg,document.getElementById("themeColorSidebar").value=e.customThemeData.sidebar,document.getElementById("themeColorAccent").value=e.customThemeData.accent,document.getElementById("themeColorText").value=e.customThemeData.text),document.querySelectorAll(".theme-preview-card").forEach(m=>m.classList.remove("active"));else{const m=e.theme||"dark";Ye(m),document.querySelectorAll(".theme-preview-card").forEach(v=>{v.getAttribute("data-theme")===m?v.classList.add("active"):v.classList.remove("active")})}const t=e.CustomBorderSize||4,s=e.GlobalBorderStyle||"solid",n=document.getElementById("GlobalBorderSize"),r=document.getElementById("globalRangeValue"),i=document.getElementById("GlobalBorderStyle");n&&(n.value=t),r&&(r.textContent=`${t}px`),i&&(i.value=s);const l=e.WebtoonsBorderSize||4,p=document.getElementById("WebtoonsBorderSizeSlider"),o=document.getElementById("WebtoonsBorderSizeValue");p&&(p.value=l),o&&(o.textContent=`${l}px`)})}function yt(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?`${parseInt(t[1],16)}, ${parseInt(t[2],16)}, ${parseInt(t[3],16)}`:"11, 20, 55"}class Ze{constructor(t){!t||t.tagName!=="SELECT"||(this.select=t,this.container=null,this.trigger=null,this.dropdown=null,this.isOpen=!1,this.init())}init(){this.buildUI(),this.addEventListeners(),this.observeChanges()}buildUI(){this.container=document.createElement("div"),this.container.className="custom-select-container",this.select.id&&(this.container.id=`${this.select.id}-crystal`);const t=this.select.parentNode,s=this.select.nextSibling;this.select.style.position="absolute",this.select.style.opacity="0",this.select.style.pointerEvents="none",this.select.style.width="1px",this.select.style.height="1px",t.insertBefore(this.container,s),this.container.appendChild(this.select),this.trigger=document.createElement("div"),this.trigger.className="crystal-select-trigger";const n=document.createElement("span");n.className="trigger-text",this.trigger.appendChild(n);const r=document.createElement("div");r.className="select-arrow",r.innerHTML='<svg viewBox="0 0 10 6"><path d="M1 1L5 5L9 1" fill="none" stroke="currentColor"/></svg>',this.trigger.appendChild(r),this.container.appendChild(this.trigger),this.dropdown=document.createElement("div"),this.dropdown.className="crystal-dropdown";const i=document.createElement("div");i.className="crystal-options-list",this.dropdown.appendChild(i),this.container.appendChild(this.dropdown),this.syncOptions()}syncOptions(){const t=this.dropdown.querySelector(".crystal-options-list"),s=this.trigger.querySelector(".trigger-text");t.innerHTML="";const n=this.select.options[this.select.selectedIndex];s.textContent=n?n.textContent:"Select...",Array.from(this.select.options).forEach((r,i)=>{const l=document.createElement("div");if(l.className="crystal-option",r.selected&&l.classList.add("is-selected"),r.disabled&&l.classList.add("is-disabled"),r.style.color){const o=document.createElement("span");o.className="marker-indicator",o.style.backgroundColor=r.style.color,l.appendChild(o)}const p=document.createElement("span");p.textContent=r.textContent,l.appendChild(p),r.disabled||(l.onclick=o=>{o.stopPropagation(),this.setValue(r.value)}),t.appendChild(l)})}setValue(t){this.select.value=t,this.select.dispatchEvent(new Event("change",{bubbles:!0})),this.syncOptions(),this.close()}addEventListeners(){this.trigger.addEventListener("click",t=>{t.stopPropagation(),this.toggle()}),document.addEventListener("click",t=>{this.isOpen&&!this.container.contains(t.target)&&this.close()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.isOpen&&this.close()})}toggle(){this.isOpen?this.close():this.open()}open(){document.querySelectorAll(".custom-select-container.is-open").forEach(t=>{t!==this.container&&t.classList.remove("is-open")}),this.isOpen=!0,this.container.classList.add("is-open"),window.anime&&window.anime({targets:this.dropdown.querySelectorAll(".crystal-option"),opacity:[0,1],translateX:[-10,0],delay:window.anime.stagger(20),duration:400,easing:"easeOutQuart"})}close(){this.isOpen=!1,this.container.classList.remove("is-open")}observeChanges(){new MutationObserver(()=>this.syncOptions()).observe(this.select,{childList:!0,subtree:!0,attributes:!0})}static autoInit(){const t=n=>{n.querySelectorAll("select").forEach(r=>{!r.closest(".custom-select-container")&&!r.classList.contains("no-crystal")&&new Ze(r)})};t(document),new MutationObserver(n=>{n.forEach(r=>{r.addedNodes.forEach(i=>{i.nodeType===1&&(i.tagName==="SELECT"?t(i.parentNode):t(i))})})}).observe(document.body,{childList:!0,subtree:!0})}}function xa(){ta(),aa(),sa(),na(),ra(),oa(),ia(),da(),ga(),pa(),ha(),ya(),typeof anime<"u"&&anime({targets:".tab-pane.active .card",opacity:[0,1],translateY:[20,0],delay:anime.stagger(100),duration:800,easing:"easeOutExpo"});const e=document.getElementById("sendMessageBtnSyncBookmarks");e&&e.addEventListener("click",()=>{ae("Requesting bookmark sync..."),chrome.runtime.sendMessage({type:"scrapeBookmarks",value:1},s=>{chrome.runtime.lastError?ae("Error: "+chrome.runtime.lastError.message):ae("Sync process initiated...")})});const t=document.getElementById("ClearReadingHistoryBtn");t&&t.addEventListener("click",()=>{chrome.storage.local.remove("userbookmarkshistory",()=>{ae("Reading history cleared."),alert("Reading history cleared!")})});try{Ze.autoInit(),ae("CrystalSelect auto-initialization enabled.")}catch(s){console.error("CrystalSelect Error:",s)}}chrome.runtime.onMessage.addListener(e=>{e.type==="log"&&ae(e.text)});const ve=(e,t)=>{const s=e.__vccOpts||e;for(const[n,r]of t)s[n]=r;return s},Ea={class:"toggle-label-group"},Ma=["for"],Ba={key:0,class:"toggle-sub-label"},_a=["id","checked"],La={__name:"SwitchControl",props:{id:{type:String,required:!0},label:{type:String,required:!0},subLabel:{type:String,default:""},modelValue:{type:Boolean,default:!1},marginTop:{type:Boolean,default:!1},small:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e){return(t,s)=>(C(),x("div",{class:ie(["feature-toggle-wrapper",{"mt-10":e.marginTop}])},[a("div",Ea,[a("label",{for:e.id,class:"toggle-main-label"},E(e.label),9,Ma),e.subLabel?(C(),x("span",Ba,E(e.subLabel),1)):Z("",!0)]),a("label",{class:ie(["switch",{"small-switch":e.small}])},[a("input",{type:"checkbox",id:e.id,checked:e.modelValue,onChange:s[0]||(s[0]=n=>t.$emit("update:modelValue",n.target.checked))},null,40,_a),s[1]||(s[1]=a("span",{class:"slider round"},null,-1))],2)],2))}},K=ve(La,[["__scopeId","data-v-7cca3c62"]]),Da={class:"card-header"},Aa=["data-target","title"],Ia={class:"icon-svg icon-info",style:{width:"16px",height:"16px"}},Ta={class:"card-body"},re={__name:"SettingsCard",props:{title:{type:String,required:!0},icon:{type:String,default:"‚öôÔ∏è"},guideTarget:{type:String,default:""},guideTitle:{type:String,default:"More Info"},fullHeight:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1},iconBg:{type:String,default:""},iconColor:{type:String,default:""}},setup(e){const t=e,s=V(()=>{const n={};return t.iconBg&&(n.background=t.iconBg),t.iconColor&&(n.color=t.iconColor),n});return(n,r)=>(C(),x("div",{class:ie(["card",{"full-height":e.fullHeight,"highlight-card":e.highlight}])},[a("div",Da,[a("div",{class:"card-icon",style:ce(s.value)},E(e.icon),5),a("h3",null,E(e.title),1),e.guideTarget?(C(),x("button",{key:0,class:"info-redirect-btn","data-target":e.guideTarget,title:e.guideTitle},[(C(),x("svg",Ia))],8,Aa)):Z("",!0)]),a("div",Ta,[Qe(n.$slots,"default")])],2))}};const $a={id:"tab-settings",class:"tab-pane active fade-in"},Ra={class:"content-grid"},Pa={class:"input-group-row"},Fa={class:"cards-row"},Oa={class:"cards-row"},Na={class:"cards-row"},Ha={class:"cards-row"},za={__name:"GeneralTab",setup(e){return(t,s)=>(C(),x("div",$a,[s[9]||(s[9]=a("header",{class:"header"},[a("div",{class:"header-text"},[a("h1",null,"Settings"),a("p",{class:"subtitle"},"Configure your custom bookmarks for MangaFire.to, manage sync, and display preferences.")])],-1)),a("div",Ra,[_(re,{title:"General Preferences",icon:"‚öôÔ∏è","guide-target":"guide-general"},{default:W(()=>[a("div",Pa,[_(K,{id:"MarkHomePage",label:"Mark Homepage","sub-label":"Highlight manga on the homepage"}),_(K,{id:"MangaFireQuickActions",label:"Quick Actions Overlay","sub-label":"Show 'Continue', 'Status', 'Rating' on hover"}),_(K,{id:"MangaFireShowProgress",label:"Show Reading Badges","sub-label":"Display 'Ch. X/Y' on manga cards"}),_(K,{id:"SyncandMarkRead",label:"Sync & Mark Read","sub-label":"Sync history and mark as read"}),_(K,{id:"FamilyFriendly",label:"Family Friendly","sub-label":"Hide Ecchi/Adult content"}),s[0]||(s[0]=a("div",{class:"feature-toggle-wrapper"},[a("div",{class:"toggle-label-group"},[a("label",{class:"toggle-main-label"},"Reading History"),a("span",{class:"toggle-sub-label"},"Stored dashboard URLs")]),a("button",{id:"ClearReadingHistoryBtn",class:"btn btn-ghost btn-sm",style:{"margin-top":"5px"}}," Clear History ")],-1))])]),_:1}),a("div",Fa,[_(re,{title:"Smart Automation",icon:"‚ö°","icon-bg":"rgba(79, 70, 229, 0.1)","icon-color":"var(--primary)","guide-target":"guide-general","full-height":""},{default:W(()=>[_(K,{id:"SmartAutoComplete",label:"Smart Auto-Complete","sub-label":"Mark as 'Completed' when reaching last chapter"}),_(K,{id:"SmartInactivityFade",label:"Inactivity Dimming","sub-label":"Dim 'Reading' manga untouched for 30+ days","margin-top":""}),_(K,{id:"SmartResumeLink",label:"Smart Resume","sub-label":"Dashboard opens next chapter (Predictive)","margin-top":""}),_(K,{id:"NotificationsEnabled",label:"New Chapter Alerts","sub-label":"Browser notifications for new releases","margin-top":""})]),_:1}),_(re,{title:"Reader Enhancements",icon:"üìö","icon-bg":"rgba(16, 185, 129, 0.1)","icon-color":"#10b981","guide-target":"guide-reader","full-height":""},{default:W(()=>[_(K,{id:"AutoScrollEnabled",label:"Auto-Scroll Panel","sub-label":"Show floating auto-scroll controls on reader pages"}),_(K,{id:"KeybindsEnabled",label:"Keyboard Shortcuts","sub-label":"Arrow keys, Space (auto-scroll), F (fullscreen)","margin-top":""}),_(K,{id:"ProgressTrackingEnabled",label:"Auto-Save Progress","sub-label":"Automatically save chapter progress while reading","margin-top":""})]),_:1})]),a("div",Oa,[_(re,{title:"MangaDex Highlighting",icon:"üìñ","icon-bg":"rgba(255, 103, 64, 0.1)","icon-color":"#FF6740","guide-target":"guide-general","full-height":""},{default:W(()=>[_(K,{id:"MangaDexHighlightEnabled",label:"Enable MangaDex Highlighting","sub-label":"Show colored borders on mangadex.org"}),_(K,{id:"MangaDexShowProgress",label:"Show Reading Progress","sub-label":"Display 'Ch. X/Y' on saved manga cards","margin-top":""})]),_:1}),_(re,{title:"Webtoons Highlighting",icon:"üì∫","icon-bg":"rgba(0, 220, 100, 0.1)","icon-color":"#00DC64","guide-target":"guide-general","full-height":""},{default:W(()=>[_(K,{id:"WebtoonsHighlightEnabled",label:"Enable Webtoons Highlighting","sub-label":"Show colored borders on webtoons.com"}),_(K,{id:"WebtoonsShowProgress",label:"Show Reading Progress","sub-label":"Display 'Ep. X/Y' on saved webtoon cards","margin-top":""}),s[1]||(s[1]=a("div",{class:"feature-toggle-wrapper",style:{"margin-top":"10px"}},[a("div",{class:"toggle-label-group"},[a("label",{for:"WebtoonsBorderSize",class:"toggle-main-label"},"Border Thickness"),a("span",{class:"toggle-sub-label"},"Customize highlight border size")]),a("label",{class:"switch small-switch",title:"Enable Custom Border Size"},[a("input",{type:"checkbox",id:"WebtoonsBorderSizeEnabled"}),a("span",{class:"slider round"})])],-1)),s[2]||(s[2]=a("div",{class:"input-wrapper",style:{"margin-top":"10px"}},[a("div",{class:"range-slider-container"},[a("input",{type:"range",id:"WebtoonsBorderSizeSlider",min:"1",max:"10",value:"4",class:"range-slider"}),a("span",{id:"WebtoonsBorderSizeValue",class:"range-value"},"4px")])],-1))]),_:1})]),_(re,{title:"Custom Markers",icon:"üé®","guide-target":"guide-markers"},{default:W(()=>[...s[3]||(s[3]=[a("div",{class:"feature-toggle-header"},[a("span",{class:"description",style:{margin:"0"}},"Add custom statuses beyond the defaults."),a("label",{class:"switch small-switch",title:"Enable Custom Markers"},[a("input",{type:"checkbox",id:"CustomBookmarks"}),a("span",{class:"slider round"})])],-1),a("div",{style:{"margin-top":"15px"}},null,-1),a("div",{class:"input-group-row"},[a("div",{class:"input-wrapper flex-grow"},[a("label",{for:"bookmarkName"},"Marker Name"),a("input",{type:"text",id:"bookmarkName",placeholder:"e.g. Re-reading",class:"input-field"})]),a("div",{class:"input-wrapper"},[a("label",{for:"colorBookmarks"},"Color"),a("div",{class:"color-picker-wrapper"},[a("input",{type:"color",id:"colorBookmarks",value:"#ff0000"})])]),a("div",{class:"input-wrapper"},[a("label",{for:"customBorderStyleSelect"},"Border Style"),a("select",{id:"customBorderStyleSelect",class:"select-field"},[a("option",{value:"solid"},"Solid"),a("option",{value:"dashed"},"Dashed"),a("option",{value:"dotted"},"Dotted"),a("option",{value:"double"},"Double"),a("option",{value:"groove"},"Groove"),a("option",{value:"ridge"},"Ridge"),a("option",{value:"inset"},"Inset"),a("option",{value:"outset"},"Outset")])]),a("div",{class:"input-wrapper input-button-wrapper"},[a("button",{id:"addBookmarkButton",class:"btn btn-primary btn-input-height"}," + Add ")])],-1),a("div",{class:"active-markers-header"},[a("label",{class:"section-label"},"ACTIVE MARKERS"),a("button",{id:"resetBookmarkButton",class:"btn btn-ghost btn-sm"}," Remove All ")],-1),a("div",{id:"CustomBookmarksContainer",class:"markers-container"},null,-1)])]),_:1}),a("div",Na,[_(re,{title:"Auto Sync",icon:"üîÑ","guide-target":"guide-sync","full-height":""},{default:W(()=>[...s[4]||(s[4]=[a("div",{class:"feature-toggle-header"},[a("span",{class:"description",style:{margin:"0"}},"Automatically update bookmarks on site visit."),a("label",{class:"switch small-switch",title:"Enable Auto Sync"},[a("input",{type:"checkbox",id:"AutoSync"}),a("span",{class:"slider round"})])],-1),a("div",{style:{"margin-top":"15px"}},null,-1),a("div",{class:"input-wrapper"},[a("label",{for:"AutoSyncSetDays"},"Sync Interval (Days)"),a("div",{class:"input-with-button"},[a("input",{type:"number",id:"AutoSyncSetDays",value:"30",class:"input-field"})])],-1),a("p",{id:"logContainerSetDays",class:"status-text"},null,-1),a("div",{class:"button-group bottom-align"},[a("button",{id:"AutoSyncSetDaysButton",class:"btn btn-primary"},"Save Interval"),a("button",{id:"AutoSyncSetDaysButtonReset",class:"btn btn-ghost"},"Reset Default")],-1)])]),_:1}),_(re,{title:"Dashboard Settings",icon:"üìä","guide-target":"guide-personalization","full-height":""},{default:W(()=>[s[5]||(s[5]=a("p",{class:"description compact"},"Configure the appearance and behavior of your Manga Dashboard.",-1)),_(K,{id:"NewTabDashboard",label:"Enable Dashboard","sub-label":"Replace new tab page"}),_(K,{id:"DashboardLayoutStyle",label:"Packed Layout","sub-label":"Show stats and more info","margin-top":""})]),_:1})]),_(re,{title:"Quick Access Shortcuts",icon:"üîó","guide-target":"guide-personalization"},{default:W(()=>[...s[6]||(s[6]=[a("div",{class:"card-body"},[a("p",{class:"description"},"Customize the 5 shortcut circles on your Manga Dashboard."),a("div",{id:"QuickAccessContainer",style:{"margin-top":"15px"}}),a("p",{id:"logContainerQuickAccess",class:"status-text"}),a("div",{class:"button-group",style:{"margin-top":"20px"}},[a("button",{id:"SaveQuickAccessButton",class:"btn btn-primary"},"Save Shortcuts"),a("button",{id:"ResetQuickAccessButton",class:"btn btn-ghost"},"Reset to Defaults")])],-1)])]),_:1}),a("div",Ha,[_(re,{title:"Manual Synchronization",icon:"‚ö†Ô∏è","guide-target":"guide-sync","icon-bg":"rgba(255, 171, 0, 0.1)","icon-color":"var(--warning)",highlight:""},{default:W(()=>[...s[7]||(s[7]=[a("div",{class:"card-body flex-row-center",style:{"padding-top":"0"}},[a("div",{class:"info-section"},[a("ul",{class:"info-list"},[a("li",null,"Requires you to be logged into MangaFire.to"),a("li",null,"Saves your read history and highlights"),a("li",null,"Disabling sync prevents read status saving")])]),a("div",{class:"action-section"},[a("button",{id:"sendMessageBtnSyncBookmarks",class:"btn btn-warning-large"}," ‚ö° Sync Bookmarks Now "),a("p",{class:"tiny-text"},"Last synced: Check logs below")])],-1)])]),_:1}),s[8]||(s[8]=de('<div class="card bg-terminal" style="padding:0;" data-v-3c62252c><div class="card-header" style="padding:12px 20px;margin-bottom:0;border-bottom:1px solid rgba(0, 255, 0, 0.1);" data-v-3c62252c><div class="card-icon" style="background:rgba(0, 255, 0, 0.1);color:#00FF00;width:30px;height:30px;font-size:16px;" data-v-3c62252c> üîç</div><h3 style="font-size:14px;color:#00FF00;margin:0;" data-v-3c62252c>Debug Logs</h3></div><div id="logContainer" class="terminal-log" data-v-3c62252c></div></div>',1))])])]))}},Va=ve(za,[["__scopeId","data-v-3c62252c"]]);const Ua={id:"tab-appearance",class:"tab-pane fade-in"},ja={class:"content-grid"},qa={style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"20px","margin-top":"20px"}},Ga={__name:"AppearanceTab",setup(e){return(t,s)=>(C(),x("div",Ua,[s[8]||(s[8]=a("header",{class:"header"},[a("div",{class:"header-text"},[a("h1",null,"Appearance"),a("p",{class:"subtitle"},"Customize the look and feel of your extension and dashboard.")])],-1)),a("div",ja,[_(re,{title:"Preset Themes",icon:"üé≠","guide-target":"guide-personalization"},{default:W(()=>[...s[0]||(s[0]=[a("div",{class:"theme-grid"},[a("div",{class:"theme-preview-card active","data-theme":"dark"},[a("div",{class:"theme-swatch dark-swatch"}),a("span",{class:"theme-label"},"Cloudy Dark")]),a("div",{class:"theme-preview-card","data-theme":"black"},[a("div",{class:"theme-swatch black-swatch"}),a("span",{class:"theme-label"},"Absolute Black")]),a("div",{class:"theme-preview-card","data-theme":"light"},[a("div",{class:"theme-swatch light-swatch"}),a("span",{class:"theme-label"},"Clean Light")]),a("div",{class:"theme-preview-card","data-theme":"neon"},[a("div",{class:"theme-swatch neon-swatch"}),a("span",{class:"theme-label"},"Cyber Neon")]),a("div",{class:"theme-preview-card","data-theme":"glassy"},[a("div",{class:"theme-swatch glassy-swatch"}),a("span",{class:"theme-label"},"Glassy Blue")])],-1)])]),_:1}),_(re,{title:"Theme Creator",icon:"‚ú®","guide-target":"guide-personalization"},{default:W(()=>[...s[1]||(s[1]=[a("div",{class:"card-body"},[a("p",{class:"description"},"Create your own personalized appearance by adjusting the colors below."),a("div",{class:"color-creator-grid"},[a("div",{class:"input-wrapper"},[a("label",null,"Background"),a("input",{type:"color",id:"themeColorBg",value:"#0b1437"})]),a("div",{class:"input-wrapper"},[a("label",null,"Sidebar"),a("input",{type:"color",id:"themeColorSidebar",value:"#111c44"})]),a("div",{class:"input-wrapper"},[a("label",null,"Accent"),a("input",{type:"color",id:"themeColorAccent",value:"#7551FF"})]),a("div",{class:"input-wrapper"},[a("label",null,"Text"),a("input",{type:"color",id:"themeColorText",value:"#ffffff"})])]),a("div",{class:"button-group",style:{"margin-top":"20px"}},[a("button",{id:"ApplyCustomThemeBtn",class:"btn btn-primary"},"Apply Custom Theme"),a("button",{id:"ResetThemeBtn",class:"btn btn-ghost"},"Reset to Default")])],-1)])]),_:1}),a("div",qa,[_(re,{title:"Highlight Styles",icon:"üñºÔ∏è","guide-target":"guide-personalization","full-height":""},{default:W(()=>[...s[2]||(s[2]=[a("div",{class:"feature-toggle-wrapper"},[a("div",{class:"toggle-label-group"},[a("label",{for:"CustomBorderSize",class:"toggle-main-label"},"Custom Borders"),a("span",{class:"toggle-sub-label"},"Enable highlighting on sites")]),a("label",{class:"switch small-switch"},[a("input",{type:"checkbox",id:"CustomBorderSize"}),a("span",{class:"slider round"})])],-1),a("div",{class:"divider"},null,-1),a("div",{class:"feature-toggle-wrapper"},[a("label",{class:"feature-label"},[U(" Border Style "),a("span",{class:"feature-subtitle"},"Choose line style")]),a("select",{id:"GlobalBorderStyle",class:"select-field"},[a("option",{value:"solid"},"Solid"),a("option",{value:"dashed"},"Dashed"),a("option",{value:"dotted"},"Dotted")])],-1),a("div",{class:"divider"},null,-1),a("div",{class:"range-header"},[a("label",null,"Highlight Thickness"),a("span",{id:"globalRangeValue",style:{color:"var(--primary)","font-weight":"bold"}},"4px")],-1),a("input",{type:"range",id:"GlobalBorderSize",min:"1",max:"10",value:"4",class:"range-slider"},null,-1)])]),_:1}),_(re,{title:"Library Styles",icon:"üìö","guide-target":"guide-personalization","full-height":""},{default:W(()=>[_(K,{id:"LibraryCardBordersEnabled",label:"Show Status Borders","sub-label":"Color borders in library"}),_(K,{id:"LibraryHideNoHistory",label:"Only Show with History","sub-label":"Hide entries with no progress"}),s[3]||(s[3]=a("div",{class:"divider"},null,-1)),s[4]||(s[4]=a("div",{class:"range-header"},[a("label",null,"Border Thickness"),a("span",{id:"libraryBorderValue",style:{color:"var(--primary)","font-weight":"bold"}},"2px")],-1)),s[5]||(s[5]=a("input",{type:"range",id:"LibraryCardBorderThickness",min:"1",max:"10",value:"2",class:"range-slider"},null,-1)),s[6]||(s[6]=a("div",{class:"divider"},null,-1)),s[7]||(s[7]=a("p",{class:"section-label"},"‚ú® Visual Effects",-1)),_(K,{id:"LibraryGlowEffect",label:"Glow Effect","sub-label":"Use glow instead of solid borders"}),_(K,{id:"LibraryAnimatedBorders",label:"Animated Borders","sub-label":"Pulse animation for 'Reading' status"}),_(K,{id:"LibraryStatusIcons",label:"Status Icons","sub-label":"Show emoji overlay on cards"}),_(K,{id:"LibraryProgressBars",label:"Progress Bars","sub-label":"Reading progress on card covers"})]),_:1})])])]))}},Wa=ve(Ga,[["__scopeId","data-v-68f54b9a"]]);const Ka={key:0,class:"filter-label"},Qa={__name:"FilterGroup",props:{label:{type:String,default:""},customClass:{type:String,default:""}},setup(e){return(t,s)=>(C(),x("div",{class:ie(["advanced-filter-group",e.customClass])},[e.label?(C(),x("label",Ka,E(e.label),1)):Z("",!0),Qe(t.$slots,"default",{},void 0,!0)],2))}},je=ve(Qa,[["__scopeId","data-v-0a553249"]]);const Ya={class:"stats-grid-compact"},Za={class:"stats-row stats-row-main"},Ja={class:"stat-item-compact",style:{"--stat-color":"var(--primary)"}},Xa={class:"stat-value-large"},es={class:"stat-item-compact",style:{"--stat-color":"#00BCD4"}},ts={class:"stat-value-large"},as={class:"stat-item-compact",style:{"--stat-color":"#4CAF50"}},ss={class:"stat-value-large"},ns={class:"stat-item-compact",style:{"--stat-color":"#2196F3"}},rs={class:"stat-value-large"},os={class:"stat-item-compact",style:{"--stat-color":"#9C27B0"}},is={class:"stat-value-large"},ls={class:"stat-item-compact",style:{"--stat-color":"#FFC107"}},cs={class:"stat-value-large"},ds={class:"stat-item-compact",style:{"--stat-color":"#F44336"}},us={class:"stat-value-large"},gs={class:"stats-row stats-row-charts"},ps={class:"chart-container"},ms={class:"pie-chart-svg",viewBox:"0 0 180 180"},vs=["data-status","stroke","stroke-dasharray"],fs={class:"pie-center-text",x:"90",y:"85","text-anchor":"middle","dominant-baseline":"middle"},hs={class:"pie-legend"},ys={class:"bar-chart-container"},bs={key:0,class:"bar-chart"},ws={class:"bar-label"},ks={class:"bar-track"},Ss=["data-target-width"],Cs={class:"bar-value"},xs={key:1,style:{color:"var(--text-secondary)","font-size":"0.8rem"}},Es={class:"stats-row stats-row-secondary"},Ms={class:"stat-group"},Bs={class:"stat-mini-grid"},_s={class:"stat-mini"},Ls={class:"stat-mini-value"},Ds={class:"stat-mini"},As={class:"stat-mini-value"},Is={class:"stat-mini"},Ts={class:"stat-mini-value"},$s={class:"stat-mini"},Rs={class:"stat-mini-value"},Ps={class:"stat-group"},Fs={class:"stat-mini-grid"},Os={class:"stat-mini"},Ns={class:"stat-mini-value",style:{color:"#02A9FF"}},Hs={class:"stat-mini"},zs={class:"stat-mini-value",style:{color:"#FF6740"}},Vs={class:"stat-mini"},Us={class:"stat-mini-value",style:{color:"#888"}},js={class:"stat-group"},qs={class:"stat-mini-grid"},Gs={class:"stat-mini"},Ws={class:"stat-mini-value"},Ks={class:"stat-mini"},Qs={class:"stat-mini-value"},Ys={class:"stat-mini"},Zs={class:"stat-mini-value"},Js={class:"progress-ring-container"},Xs={class:"progress-ring-info"},en={class:"progress-ring-value"},tn={class:"stats-row stats-row-bar"},an={class:"stat-bar-item"},sn={class:"stat-bar-item"},nn={class:"stat-bar-item"},rn={__name:"LibraryStatistics",props:{entries:{type:Array,required:!0},isVisible:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const s=e,n=X(!1),r=X(null),i=2*Math.PI*70,l=2*Math.PI*24,p=["#7551FF","#6B46C1","#805AD5","#9F7AEA","#B794F4","#D6BCFA"],o=V(()=>{const h=s.entries.length;if(h===0)return{total:0,totalChapters:0,reading:0,completed:0,planning:0,onhold:0,dropped:0,avgScore:0,completionRate:0};const g=s.entries.filter(c=>c.status==="Reading").length,f=s.entries.filter(c=>c.status==="Completed").length,y=s.entries.filter(c=>c.status==="Plan to Read").length,T=s.entries.filter(c=>c.status==="On Hold").length,j=s.entries.filter(c=>c.status==="Dropped").length,N=s.entries.reduce((c,d)=>c+(parseInt(d.readChapters)||0),0),Q=s.entries.filter(c=>{var d;return(d=c.anilistData)==null?void 0:d.averageScore}),te=Q.length>0?Math.round(Q.reduce((c,d)=>c+d.anilistData.averageScore,0)/Q.length):0,M=Math.round(f/h*100);return{total:h,totalChapters:N,reading:g,completed:f,planning:y,onhold:T,dropped:j,avgScore:te,completionRate:M}}),m=V(()=>{if(o.value.total===0)return[];const h=[{label:"Reading",value:o.value.reading,color:"#4CAF50"},{label:"Completed",value:o.value.completed,color:"#2196F3"},{label:"Planning",value:o.value.planning,color:"#9C27B0"},{label:"On Hold",value:o.value.onhold,color:"#FFC107"},{label:"Dropped",value:o.value.dropped,color:"#F44336"}].filter(f=>f.value>0);let g=0;return h.map(f=>{const y=f.value/o.value.total,T=i*y,j=g;return g+=T,{...f,dashLen:T,offset:j}})}),v=V(()=>{const h={};s.entries.forEach(y=>{var T;(((T=y.anilistData)==null?void 0:T.genres)||[]).forEach(j=>{h[j]=(h[j]||0)+1})});const g=Object.entries(h).sort((y,T)=>T[1]-y[1]).slice(0,6),f=g.length>0?g[0][1]:1;return g.map(([y,T])=>({name:y,count:T,percent:Math.round(T/f*100)}))}),u=V(()=>{const h=Date.now(),g=7*24*60*60*1e3,f=30*24*60*60*1e3;return{readThisWeek:s.entries.filter(y=>y.lastRead&&h-y.lastRead<g).length,readThisMonth:s.entries.filter(y=>y.lastRead&&h-y.lastRead<f).length,addedThisWeek:s.entries.filter(y=>y.lastUpdated&&h-y.lastUpdated<g).length,withHistory:s.entries.filter(y=>y.readChapters&&y.readChapters>0).length}}),I=V(()=>({anilist:s.entries.filter(h=>h.anilistData&&!h.anilistData.source).length,mangadex:s.entries.filter(h=>{var g;return((g=h.anilistData)==null?void 0:g.source)==="MANGADEX"}).length,noData:s.entries.filter(h=>!h.anilistData||h.anilistData.status==="NOT_FOUND").length})),O=V(()=>({manga:s.entries.filter(h=>{var g,f;return((g=h.anilistData)==null?void 0:g.format)==="MANGA"||!((f=h.anilistData)!=null&&f.format)}).length,manhwa:s.entries.filter(h=>{var g,f;return((g=h.anilistData)==null?void 0:g.format)==="Manhwa"||((f=h.anilistData)==null?void 0:f.countryOfOrigin)==="KR"}).length,manhua:s.entries.filter(h=>{var g,f;return((g=h.anilistData)==null?void 0:g.format)==="Manhua"||((f=h.anilistData)==null?void 0:f.countryOfOrigin)==="CN"}).length})),S=async()=>{const h=typeof anime<"u"?anime:window.anime;if(console.log("[Stats] Animation trigger - anime available:",!!h),!h){console.warn("[Stats] anime.js not found, skipping animations");return}if(await Gt(),console.log("[Stats] After nextTick - root.value:",!!r.value),!r.value){console.warn("[Stats] root ref is null after nextTick");return}const g=r.value.querySelectorAll(".pie-slice"),f=r.value.querySelectorAll(".bar-fill"),y=r.value.querySelector(".progress-ring-fill");console.log("[Stats] Found elements - pieSlices:",g.length,"barFills:",f.length,"ring:",!!y),g.forEach(T=>{T.setAttribute("stroke-dasharray",`0 ${i}`)}),f.forEach(T=>{T.style.width="0%"}),y&&y.setAttribute("stroke-dashoffset",l),h({targets:r.value.querySelectorAll(".stat-item-compact, .stat-group, .stat-bar-item, .chart-container, .bar-chart-container, .progress-ring-container"),opacity:[0,1],translateY:[15,0],delay:h.stagger(40),duration:600,easing:"easeOutQuart"}),setTimeout(()=>{const T=typeof anime<"u"?anime:window.anime;T&&m.value.forEach((j,N)=>{const Q=g[N];Q&&T({targets:Q,strokeDasharray:[`0 ${i}`,`${j.dashLen} ${i-j.dashLen}`],duration:1e3,delay:N*100,easing:"easeOutQuart"})})},300),setTimeout(()=>{const T=typeof anime<"u"?anime:window.anime;T&&v.value.forEach((j,N)=>{const Q=f[N];Q&&T({targets:Q,width:["0%",j.percent+"%"],duration:800,delay:N*80,easing:"easeOutQuart"})})},500),setTimeout(()=>{if(y){const T=typeof anime<"u"?anime:window.anime;if(!T)return;const j=l-l*o.value.completionRate/100;T({targets:y,strokeDashoffset:[l,j],duration:1200,easing:"easeOutQuart"})}},400)},w=()=>{const h=typeof anime<"u"?anime:window.anime;if(!h||!r.value){n.value=!1;return}const g=r.value.querySelectorAll(".pie-slice"),f=r.value.querySelectorAll(".bar-fill"),y=r.value.querySelector(".progress-ring-fill");h({targets:f,width:"0%",duration:300,easing:"easeInQuart"}),h({targets:g,strokeDasharray:`0 ${i}`,duration:400,easing:"easeInQuart"}),y&&h({targets:y,strokeDashoffset:l,duration:400,easing:"easeInQuart"}),h({targets:r.value.querySelectorAll(".stat-item-compact, .stat-group, .stat-bar-item, .chart-container, .bar-chart-container, .progress-ring-container"),opacity:[1,0],translateY:[0,-10],delay:h.stagger(20,{direction:"reverse"}),duration:300,easing:"easeInQuart",complete:()=>{n.value=!1}})};return jt(()=>s.isVisible,(h,g)=>{console.log("[Stats] Watch triggered - isVisible changed:",g,"->",h),h?(n.value=!1,requestAnimationFrame(()=>{setTimeout(()=>{console.log("[Stats] Starting entrance animations after delay"),S()},50)})):(n.value=!0,w())}),Pe(()=>{console.log("[Stats] Component MOUNTED - isVisible:",s.isVisible),s.isVisible&&S()}),(h,g)=>le((C(),x("div",{ref_key:"root",ref:r,class:ie(["stats-dashboard-card glass-card",{visible:e.isVisible,closing:n.value}])},[g[27]||(g[27]=a("div",{class:"stats-header"},[a("h3",null,"Library Statistics")],-1)),a("div",Ya,[a("div",Za,[a("div",Ja,[a("span",Xa,E(o.value.total),1),g[0]||(g[0]=a("span",{class:"stat-label-small"},"Total",-1))]),a("div",es,[a("span",ts,E(o.value.totalChapters.toLocaleString()),1),g[1]||(g[1]=a("span",{class:"stat-label-small"},"Chapters Read",-1))]),a("div",as,[a("span",ss,E(o.value.reading),1),g[2]||(g[2]=a("span",{class:"stat-label-small"},"Reading",-1))]),a("div",ns,[a("span",rs,E(o.value.completed),1),g[3]||(g[3]=a("span",{class:"stat-label-small"},"Completed",-1))]),a("div",os,[a("span",is,E(o.value.planning),1),g[4]||(g[4]=a("span",{class:"stat-label-small"},"Plan to Read",-1))]),a("div",ls,[a("span",cs,E(o.value.onhold),1),g[5]||(g[5]=a("span",{class:"stat-label-small"},"On Hold",-1))]),a("div",ds,[a("span",us,E(o.value.dropped),1),g[6]||(g[6]=a("span",{class:"stat-label-small"},"Dropped",-1))])]),a("div",gs,[a("div",ps,[g[9]||(g[9]=a("span",{class:"chart-title"},"üìä Status Distribution",-1)),(C(),x("svg",ms,[(C(!0),x(ee,null,oe(m.value,(f,y)=>(C(),x("circle",{key:f.label,class:"pie-slice","data-status":f.label,cx:"90",cy:"90",r:"70",stroke:f.color,"stroke-dasharray":`0 ${i}`,style:ce({strokeDashoffset:`-${f.offset}`})},null,12,vs))),128)),g[7]||(g[7]=a("circle",{class:"pie-center",cx:"90",cy:"90",r:"45"},null,-1)),a("text",fs,E(o.value.total),1),g[8]||(g[8]=a("text",{class:"pie-center-label",x:"90",y:"105","text-anchor":"middle"},"TOTAL",-1))])),a("div",hs,[(C(!0),x(ee,null,oe(m.value,f=>(C(),x("div",{key:f.label,class:"legend-item"},[a("span",{class:"legend-dot",style:ce({background:f.color})},null,4),a("span",null,E(f.label)+" ("+E(f.value)+")",1)]))),128))])]),a("div",ys,[g[10]||(g[10]=a("span",{class:"chart-title"},"üè∑Ô∏è Top Genres",-1)),v.value.length>0?(C(),x("div",bs,[(C(!0),x(ee,null,oe(v.value,(f,y)=>(C(),x("div",{key:f.name,class:"bar-item"},[a("span",ws,E(f.name),1),a("div",ks,[a("div",{class:"bar-fill",style:ce({width:"0%",background:p[y%p.length]}),"data-target-width":f.percent+"%"},[a("span",Cs,E(f.count),1)],12,Ss)])]))),128))])):(C(),x("p",xs,"No genre data available"))])]),a("div",Es,[a("div",Ms,[g[15]||(g[15]=a("h4",{class:"stat-group-title"},"üìÖ Activity",-1)),a("div",Bs,[a("div",_s,[a("span",Ls,E(u.value.readThisWeek),1),g[11]||(g[11]=a("span",{class:"stat-mini-label"},"Read This Week",-1))]),a("div",Ds,[a("span",As,E(u.value.readThisMonth),1),g[12]||(g[12]=a("span",{class:"stat-mini-label"},"Read This Month",-1))]),a("div",Is,[a("span",Ts,E(u.value.addedThisWeek),1),g[13]||(g[13]=a("span",{class:"stat-mini-label"},"Added This Week",-1))]),a("div",$s,[a("span",Rs,E(u.value.withHistory),1),g[14]||(g[14]=a("span",{class:"stat-mini-label"},"With History",-1))])])]),a("div",Ps,[g[19]||(g[19]=a("h4",{class:"stat-group-title"},"üåê Data Sources",-1)),a("div",Fs,[a("div",Os,[a("span",Ns,E(I.value.anilist),1),g[16]||(g[16]=a("span",{class:"stat-mini-label"},"AniList",-1))]),a("div",Hs,[a("span",zs,E(I.value.mangadex),1),g[17]||(g[17]=a("span",{class:"stat-mini-label"},"MangaDex",-1))]),a("div",Vs,[a("span",Us,E(I.value.noData),1),g[18]||(g[18]=a("span",{class:"stat-mini-label"},"No Data",-1))])])]),a("div",js,[g[23]||(g[23]=a("h4",{class:"stat-group-title"},"üìö Format",-1)),a("div",qs,[a("div",Gs,[a("span",Ws,E(O.value.manga),1),g[20]||(g[20]=a("span",{class:"stat-mini-label"},"Manga",-1))]),a("div",Ks,[a("span",Qs,E(O.value.manhwa),1),g[21]||(g[21]=a("span",{class:"stat-mini-label"},"Manhwa",-1))]),a("div",Ys,[a("span",Zs,E(O.value.manhua),1),g[22]||(g[22]=a("span",{class:"stat-mini-label"},"Manhua",-1))])])]),a("div",Js,[a("svg",{class:"progress-ring-svg",viewBox:"0 0 60 60"},[g[24]||(g[24]=a("circle",{class:"progress-ring-bg",cx:"30",cy:"30",r:"24"},null,-1)),a("circle",{class:"progress-ring-fill",cx:"30",cy:"30",r:"24","stroke-dasharray":l,"stroke-dashoffset":l})]),a("div",Xs,[a("span",en,E(o.value.completionRate)+"%",1),g[25]||(g[25]=a("span",{class:"progress-ring-label"},"Completion Rate",-1))])])]),a("div",tn,[a("div",an,[g[26]||(g[26]=U("‚≠ê Avg Score: ",-1)),a("strong",null,E(o.value.avgScore>0?o.value.avgScore+"%":"N/A"),1)]),a("div",sn,"üìñ "+E(Math.round(o.value.totalChapters/Math.max(o.value.completed,1)))+" ch/completed manga",1),a("div",nn,"üìà "+E(o.value.completionRate)+"% completion rate",1)])])],2)),[[qt,e.isVisible||n.value]])}},on=ve(rn,[["__scopeId","data-v-13735889"]]);function Mt(e,t,s){const n=e.toLowerCase();let r=s.find(o=>o.name.toLowerCase()===n);if(!r&&t&&(r=s.find(o=>o.name===t)),r)return{borderColor:r.color,borderStyle:r.style||"solid",badgeBg:`${r.color}26`,badgeText:r.color};const i={reading:{color:"#4CAF50",bg:"rgba(76, 175, 80, 0.15)"},read:{color:"#9f9f9f",bg:"rgba(159, 159, 159, 0.15)"},completed:{color:"#2196F3",bg:"rgba(33, 150, 243, 0.15)"},dropped:{color:"#F44336",bg:"rgba(244, 67, 54, 0.15)"},onhold:{color:"#FFC107",bg:"rgba(255, 193, 7, 0.15)"},planning:{color:"#9C27B0",bg:"rgba(156, 39, 176, 0.15)"},default:{color:"#8B95A5",bg:"rgba(139, 149, 165, 0.15)"}};let l="default";n.includes("reading")?l="reading":n==="read"?l="read":n.includes("completed")?l="completed":n.includes("dropped")?l="dropped":n.includes("hold")?l="onhold":n.includes("plan")&&(l="planning");const p=i[l];return{borderColor:p.color,borderStyle:"solid",badgeBg:p.bg,badgeText:p.color}}function Je(e,t){return t==="KR"&&e==="MANGA"?"Manhwa":t==="CN"&&e==="MANGA"?"Manhua":{MANGA:"Manga",ONE_SHOT:"One Shot",NOVEL:"Light Novel"}[e]||"Manga"}const ln=["title"],cn={key:1,class:"manga-card-progress-bar"},dn={class:"manga-card-actions"},un=["href","title"],gn=["href"],pn={class:"manga-card-body"},mn=["title"],vn={class:"manga-card-meta"},fn={key:0,class:"manga-card-info"},hn={key:0,class:"info-item format-badge"},yn={class:"info-item"},bn={key:1,class:"info-item",style:{opacity:"0.6"}},wn="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzY2NiI+PHBhdGggZD0iTTIxIDR2MTJIMy4wMVYySDFWMTZoMjBWNGgtMlptLTEuOTEgMTMuNUw0IDE4djJoMTIuMTdsLjg0LS44NCAxLjA4IDEuNi42Ni0uMjItLjk3LTEuNDNjLjEyLS4xNi4yMi0uMzUuMzEtLjU1eiIvPjwvc3ZnPg==",kn={__name:"MangaCard",props:{entry:{type:Object,required:!0},customMarkers:{type:Array,default:()=>[]},librarySettings:{type:Object,default:()=>({bordersEnabled:!0,borderThickness:2,useGlowEffect:!1,animatedBorders:!1,showStatusIcon:!1,showProgressBar:!1,smartInactivity:!1})}},emits:["click","marker-click"],setup(e){Wt(S=>({v31f18884:s.value.borderColor}));const t=e,s=V(()=>Mt(t.entry.status,t.entry.customMarker,t.customMarkers)),n=V(()=>t.librarySettings.bordersEnabled&&t.librarySettings.useGlowEffect),r=V(()=>t.librarySettings.bordersEnabled?n.value?{"--glow-color":`${s.value.borderColor}80`,border:"none"}:{border:`${`${t.librarySettings.borderThickness||2}px`} ${s.value.borderStyle||"solid"} ${s.value.borderColor}`}:{border:"none"}),i=V(()=>t.librarySettings.animatedBorders&&t.entry.status==="Reading"),l=V(()=>t.librarySettings.smartInactivity&&t.entry.status==="Reading"&&t.entry.lastRead?(Date.now()-t.entry.lastRead)/(1e3*60*60*24)>30:!1),p=V(()=>{var S,w,h,g;return(w=(S=t.entry.anilistData)==null?void 0:S.coverImage)!=null&&w.large||(g=(h=t.entry.anilistData)==null?void 0:h.coverImage)!=null&&g.medium?t.entry.anilistData.coverImage.large||t.entry.anilistData.coverImage.medium:wn}),o=V(()=>{const S=(t.entry.status||"").toLowerCase();return S.includes("reading")?"üìñ":S==="read"||S.includes("completed")?"‚úÖ":S.includes("dropped")?"‚ùå":S.includes("hold")?"‚è∏Ô∏è":S.includes("plan")?"üìã":"üìö"}),m=V(()=>{var S;return t.librarySettings.showProgressBar&&((S=t.entry.anilistData)==null?void 0:S.chapters)&&t.entry.readChapters}),v=V(()=>{if(!m.value)return 0;const S=t.entry.anilistData.chapters,w=parseInt(t.entry.readChapters)||0;return Math.min(100,Math.round(w/S*100))}),u=V(()=>{var S,w,h,g;return((w=(S=t.entry.anilistData)==null?void 0:S.title)==null?void 0:w.english)||((g=(h=t.entry.anilistData)==null?void 0:h.title)==null?void 0:g.romaji)||t.entry.title}),I=V(()=>t.entry.anilistData?Je(t.entry.anilistData.format,t.entry.anilistData.countryOfOrigin):null),O=V(()=>{var h;const S=(h=t.entry.anilistData)==null?void 0:h.tags;if(!S||!Array.isArray(S))return null;const w=S.map(g=>g.name.toLowerCase());return w.includes("seinen")?"Seinen":w.includes("josei")?"Josei":w.includes("shounen")?"Shonen":w.includes("shoujo")?"Shoujo":null});return(S,w)=>{var h;return C(),x("div",{class:ie(["manga-card",{"glow-effect":n.value,"reading-pulse":i.value,"has-custom-marker":!!e.entry.customMarker,"stale-entry":l.value}]),style:ce(r.value),onClick:w[3]||(w[3]=g=>S.$emit("click",e.entry))},[a("div",{class:"manga-card-cover",style:ce({backgroundImage:`url('${p.value}')`})},[a("div",{class:"card-status-dot",style:ce({backgroundColor:s.value.borderColor})},null,4),e.librarySettings.showStatusIcon?(C(),x("div",{key:0,class:"manga-card-status-icon",title:e.entry.status},E(o.value),9,ln)):Z("",!0),m.value?(C(),x("div",cn,[a("div",{class:"manga-card-progress-fill",style:ce({width:v.value+"%"})},null,4)])):Z("",!0),a("div",dn,[e.entry.lastMangafireUrl?(C(),x("a",{key:0,href:e.entry.lastMangafireUrl,target:"_blank",class:"card-action-btn card-action-continue",onClick:w[0]||(w[0]=Te(()=>{},["stop"])),title:"Continue reading Ch."+(e.entry.lastChapterRead||"?")}," ‚ñ∂ Ch."+E(e.entry.lastChapterRead||"?"),9,un)):Z("",!0),(h=e.entry.anilistData)!=null&&h.siteUrl?(C(),x("a",{key:1,href:e.entry.anilistData.siteUrl,target:"_blank",class:"card-action-btn",onClick:w[1]||(w[1]=Te(()=>{},["stop"]))}," View ",8,gn)):Z("",!0),a("button",{class:"card-action-btn",onClick:w[2]||(w[2]=Te(g=>S.$emit("marker-click",e.entry),["stop"]))},E(e.entry.customMarker?"‚úì "+e.entry.customMarker:"+ Marker"),1)])],4),a("div",pn,[a("h3",{class:"manga-card-title",title:u.value},E(u.value),9,mn),a("div",vn,[a("span",{class:"manga-card-status",style:ce({backgroundColor:s.value.badgeBg,color:s.value.badgeText})},E(e.entry.status),5),e.entry.anilistData?(C(),x("div",fn,[I.value?(C(),x("div",hn,E(I.value),1)):Z("",!0),O.value?(C(),x("div",{key:1,class:ie(["info-item","format-badge",`demo-${O.value.toLowerCase()}`]),style:{"margin-left":"4px"}},E(O.value),3)):Z("",!0),a("div",yn,[e.entry.anilistData.chapters?(C(),x(ee,{key:0},[w[4]||(w[4]=a("span",{class:"info-label"},"Read:",-1)),U(E(e.entry.readChapters||0)+" / ",1),w[5]||(w[5]=a("span",{class:"info-label"},"Total:",-1)),U(E(e.entry.anilistData.chapters),1)],64)):(C(),x(ee,{key:1},[w[6]||(w[6]=a("span",{class:"info-label"},"Read:",-1)),U(E(e.entry.readChapters||0)+" ",1),w[7]||(w[7]=a("span",{class:"info-label ongoing-tag"},"Ongoing",-1))],64))])])):(C(),x("div",bn," Loading info... "))])])],6)}}},Sn=ve(kn,[["__scopeId","data-v-4dc50140"]]),Ee={PERSONAL_DATA:"libraryPersonalData",USER_TAGS:"libraryUserTags",FILTER_PRESETS:"libraryFilterPresets"};function xe(e){var t;return(t=e.anilistData)!=null&&t.id?`anilist:${e.anilistData.id}`:e.mangadexId?`mangadex:${e.mangadexId}`:`title:${Cn(e.title)}`}function Cn(e){return e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}let Be=null,_e=null;async function Xe(){return Be||new Promise(e=>{chrome.storage.local.get([Ee.PERSONAL_DATA],t=>{Be=t[Ee.PERSONAL_DATA]||{},e(Be)})})}async function et(e){const t=await Xe(),s=xe(e);return t[s]||{tags:[],notes:"",rating:0}}async function Fe(e,t){const s=await Xe(),n=xe(e);return s[n]={...s[n]||{tags:[],notes:"",rating:0},...t,lastModified:Date.now()},Be=s,new Promise(r=>{chrome.storage.local.set({[Ee.PERSONAL_DATA]:s},r)})}async function Ge(){return _e||new Promise(e=>{chrome.storage.local.get([Ee.USER_TAGS],t=>{_e=t[Ee.USER_TAGS]||[],e(_e)})})}async function xn(e){const t=await Ge(),s=e.trim();return!s||t.includes(s)?t:(t.push(s),_e=t,new Promise(n=>{chrome.storage.local.set({[Ee.USER_TAGS]:t},()=>n(t))}))}async function En(e,t){const s=await et(e);return s.tags.includes(t)||(s.tags.push(t),await Fe(e,{tags:s.tags})),await xn(t),s.tags}async function Mn(e,t){const s=await et(e);return s.tags=s.tags.filter(n=>n!==t),await Fe(e,{tags:s.tags}),s.tags}async function Bn(e,t){await Fe(e,{notes:t.trim()})}async function _n(e,t){const s=Math.max(0,Math.min(10,parseInt(t)||0));return await Fe(e,{rating:s}),s}function Ie(e,t){if(!e||!t)return!1;const s=e.toLowerCase(),n=t.toLowerCase();if(n.includes(s))return!0;let r=0;for(let i=0;i<n.length&&r<s.length;i++)n[i]===s[r]&&r++;return r===s.length}const Ln={id:"tab-saved-entries",class:"tab-pane fade-in",style:{display:"none"}},Dn={class:"content-grid",style:{"max-width":"100%"}},An={key:0,class:"bulk-ops-bar glass-card",style:{display:"flex"}},In={class:"bulk-info"},Tn={class:"bulk-actions"},$n={class:"library-header"},Rn={class:"library-title-section"},Pn={class:"library-title-text"},Fn={style:{display:"flex","align-items":"center",gap:"8px"}},On={class:"info-redirect-btn","data-target":"guide-entries",title:"How to use"},Nn={class:"icon-svg icon-info",style:{width:"16px",height:"16px"}},Hn={class:"library-subtitle"},zn={class:"library-controls"},Vn=["value"],Un=["value"],jn={class:"view-toggle-group"},qn={class:"library-controls-advanced"},Gn={class:"chapter-range-wrapper"},Wn={key:1,class:"sync-progress-container fade-in"},Kn={class:"sync-info"},Qn={class:"sync-count"},Yn={class:"progress-bar-bg"},Zn={class:"sync-details"},Jn={key:0,class:"empty-library"},Xn={__name:"SavedEntriesTab",setup(e){const t=X(!1),s=X(!1),n=X("Reading"),r=X([]),i=X([]),l=X({}),p=X("large"),o=X(!1),m=ze({isSyncing:!1,current:0,total:0,percentage:0,currentTitle:""}),v=ze({bordersEnabled:!0,borderThickness:2,hideNoHistory:!1,useGlowEffect:!1,animatedBorders:!1,showStatusIcon:!1,showProgressBar:!1,smartInactivity:!1}),u=ze({sort:"title-asc",demographic:"All",status:"All",genre:"All",format:"All",search:"",chapterMin:null,chapterMax:null,lastUpdated:"all",newChaptersOnly:!1}),I=V(()=>{const M=new Set;return r.value.forEach(c=>{var d;(d=c.anilistData)!=null&&d.genres&&c.anilistData.genres.forEach(B=>M.add(B))}),Array.from(M).sort()}),O=V(()=>r.value.filter(M=>{var R,A,$,k,b,F;const c=M.anilistData;if(o.value&&(c!=null&&c.genres)&&c.genres.some(L=>["Ecchi","Hentai"].includes(L)))return!1;if(u.status!=="All"){if(u.status.startsWith("marker:")){const L=u.status.substring(7);if(M.customMarker!==L&&M.status!==L)return!1}else if(u.status==="HasHistory"){if(!(M.lastRead||M.lastChapterRead||M.readChapters>0))return!1}else if(M.status!==u.status)return!1}if(v.hideNoHistory&&!(M.lastRead||M.lastChapterRead||M.readChapters>0)||u.format!=="All"&&(!c||Je(c.format,c.countryOfOrigin)!==u.format)||u.genre!=="All"&&!((R=c==null?void 0:c.genres)!=null&&R.includes(u.genre)))return!1;if(u.search!==""){const L=Ie(u.search,M.title)||Ie(u.search,((A=c==null?void 0:c.title)==null?void 0:A.english)||"")||Ie(u.search,(($=c==null?void 0:c.title)==null?void 0:$.romaji)||""),P=((b=(k=c==null?void 0:c.staff)==null?void 0:k.edges)==null?void 0:b.some(z=>{var G,q;return Ie(u.search,((q=(G=z.node)==null?void 0:G.name)==null?void 0:q.full)||"")}))||!1;if(!L&&!P)return!1}if(u.demographic!=="All"){const L=u.demographic.toLowerCase();if(!((F=c==null?void 0:c.tags)!=null&&F.some(P=>P.name.toLowerCase()===L)))return!1}const d=u.chapterMin||0,B=u.chapterMax||1/0;if(d>0||B<1/0){const L=(c==null?void 0:c.chapters)||M.readChapters||0;if(L<d||L>B)return!1}if(u.lastUpdated!=="all"){const L=Date.now(),P=M.lastRead||M.lastUpdated||0;let z=0;switch(u.lastUpdated){case"7d":z=L-7*24*60*60*1e3;break;case"30d":z=L-30*24*60*60*1e3;break;case"90d":z=L-90*24*60*60*1e3;break;case"year":z=L-365*24*60*60*1e3;break}if(P<z)return!1}if(u.newChaptersOnly){const L=(c==null?void 0:c.chapters)||0,P=M.readChapters||0;if(!(L>0&&P<L))return!1}return!0})),S=V(()=>{const M=[...O.value];return M.sort((c,d)=>{var A,$,k,b,F,L,P,z,G,q,J,se,ne,ge;const B=((($=(A=c.anilistData)==null?void 0:A.title)==null?void 0:$.english)||c.title).toLowerCase(),R=(((b=(k=d.anilistData)==null?void 0:k.title)==null?void 0:b.english)||d.title).toLowerCase();switch(u.sort){case"title-asc":return B.localeCompare(R);case"title-desc":return R.localeCompare(B);case"pop-desc":return(((F=d.anilistData)==null?void 0:F.popularity)||0)-(((L=c.anilistData)==null?void 0:L.popularity)||0);case"pop-asc":return(((P=c.anilistData)==null?void 0:P.popularity)||0)-(((z=d.anilistData)==null?void 0:z.popularity)||0);case"score-desc":return(((G=d.anilistData)==null?void 0:G.averageScore)||0)-(((q=c.anilistData)==null?void 0:q.averageScore)||0);case"added-desc":return(d.lastUpdated||0)-(c.lastUpdated||0);case"last-read-desc":return(d.lastRead||0)-(c.lastRead||0);case"rating-desc":{const fe=((J=l.value[xe(c)])==null?void 0:J.rating)||0;return(((se=l.value[xe(d)])==null?void 0:se.rating)||0)-fe}case"rating-asc":{const fe=((ne=l.value[xe(c)])==null?void 0:ne.rating)||0,be=((ge=l.value[xe(d)])==null?void 0:ge.rating)||0;return fe-be}default:return 0}}),M}),w=()=>{t.value=!t.value},h=M=>{window.showMangaDetails&&window.showMangaDetails(M)},g=M=>{p.value=M,chrome.storage.local.set({cardViewSize:M})},f=()=>{u.chapterMin=null,u.chapterMax=null,u.lastUpdated="all",u.newChaptersOnly=!1,u.status="All",u.genre="All",u.format="All",u.demographic="All"},y=()=>{u.chapterMin=u.chapterMin>=100?null:100},T=M=>{window.showMarkerPicker&&window.showMarkerPicker(M)},j=()=>{confirm("Remove duplicate entries?")&&(window.cleanLibraryDuplicates?window.cleanLibraryDuplicates():console.error("Library cleaning function not found"))},N=()=>{confirm("Reset library cache and force fresh sync of all entries?")&&(window.forceSyncLibrary?window.forceSyncLibrary():console.error("Library sync function not found"))},Q=async()=>{const M=S.value.length;if(M!==0&&confirm(`Update all ${M} filtered items to "${n.value}"?`)){const c=r.value.map(d=>S.value.some(R=>R.title===d.title)?{...d,status:n.value,customMarker:null}:d);chrome.storage.local.set({savedEntriesMerged:c},()=>{alert(`Updated ${M} items.`),s.value=!1})}},te=()=>{var M;if(!((M=chrome.runtime)!=null&&M.id)){console.error("Extension context invalidated. Please refresh the page.");return}chrome.storage.local.get(["savedEntriesMerged","customBookmarks","cardViewSize","FamilyFriendlyfeatureEnabled","LibraryCardBordersEnabled","LibraryCardBorderThickness","LibraryHideNoHistory","LibraryGlowEffect","LibraryAnimatedBorders","LibraryStatusIcons","LibraryProgressBars"],async c=>{r.value=c.savedEntriesMerged||[],i.value=c.customBookmarks||[],p.value=c.cardViewSize||"large",o.value=c.FamilyFriendlyfeatureEnabled||!1,v.bordersEnabled=c.LibraryCardBordersEnabled!==!1,v.borderThickness=c.LibraryCardBorderThickness||2,v.hideNoHistory=c.LibraryHideNoHistory===!0,v.useGlowEffect=c.LibraryGlowEffect===!0,v.animatedBorders=c.LibraryAnimatedBorders===!0,v.showStatusIcon=c.LibraryStatusIcons===!0,v.showProgressBar=c.LibraryProgressBars===!0,l.value=await Xe()})};return Pe(()=>{console.log("[SavedEntriesTab] Component MOUNTED"),te(),chrome.storage.onChanged.addListener((M,c)=>{c==="local"&&(M.savedEntriesMerged&&(r.value=M.savedEntriesMerged.newValue||[]),M.customBookmarks&&(i.value=M.customBookmarks.newValue||[]),M.LibraryCardBordersEnabled&&(v.bordersEnabled=M.LibraryCardBordersEnabled.newValue))}),window.refreshLibraryData=te,window.addEventListener("library-sync-start",M=>{var c;m.isSyncing=!0,m.total=((c=M.detail)==null?void 0:c.total)||0,m.current=0,m.percentage=0,m.currentTitle="Starting..."}),window.addEventListener("library-sync-progress",M=>{const{current:c,total:d,title:B}=M.detail;m.isSyncing=!0,m.current=c,m.total=d,m.currentTitle=B||"Processing...",d>0&&(m.percentage=Math.round(c/d*100))}),window.addEventListener("library-sync-complete",()=>{m.isSyncing=!1,te()})}),(M,c)=>(C(),x("div",Ln,[a("header",{class:"header"},[c[15]||(c[15]=a("div",{class:"header-text"},[a("h1",null,"Saved Entries"),a("p",{class:"subtitle"},"Browse and manage your manga library")],-1)),a("div",{class:"header-actions"},[a("button",{id:"BtnShowStats",class:"btn btn-ghost btn-sm",onClick:w},"üìä Stats"),a("button",{onClick:j,class:"btn btn-ghost btn-sm",title:"Remove Duplicates"},"üßπ Clean"),a("button",{onClick:N,class:"btn btn-warning-large"},"‚ö°Fresh Sync Entries")])]),a("div",Dn,[_(on,{entries:r.value,"is-visible":t.value},null,8,["entries","is-visible"]),s.value?(C(),x("div",An,[a("div",In,[a("span",null,E(S.value.length)+" items filtered",1)]),a("div",Tn,[c[17]||(c[17]=a("span",null,"Update All Filtered to:",-1)),le(a("select",{"onUpdate:modelValue":c[0]||(c[0]=d=>n.value=d),class:"select-field sm"},[...c[16]||(c[16]=[de('<option value="Reading" data-v-9de6ce4e>Reading</option><option value="Completed" data-v-9de6ce4e>Completed</option><option value="On Hold" data-v-9de6ce4e>On Hold</option><option value="Plan to Read" data-v-9de6ce4e>Plan to Read</option><option value="Dropped" data-v-9de6ce4e>Dropped</option>',5)])],512),[[we,n.value]]),a("button",{onClick:Q,class:"btn btn-primary btn-sm"},"Apply Update"),a("button",{onClick:c[1]||(c[1]=d=>s.value=!1),class:"btn btn-ghost btn-sm"},"√ó")])])):Z("",!0),a("div",$n,[a("div",Rn,[c[19]||(c[19]=a("div",{class:"library-icon"},"üìö",-1)),a("div",Pn,[a("div",Fn,[c[18]||(c[18]=a("h2",null,"Your Library",-1)),a("button",{onClick:c[2]||(c[2]=d=>s.value=!s.value),class:ie(["btn btn-ghost btn-sm",{active:s.value}])},"Bulk",2),a("button",On,[(C(),x("svg",Nn))])]),a("p",Hn,E(S.value.length)+" item"+E(S.value.length!==1?"s":""),1)])]),a("div",zn,[le(a("select",{"onUpdate:modelValue":c[3]||(c[3]=d=>u.sort=d),class:"select-field",style:{width:"140px"}},[...c[20]||(c[20]=[de('<option value="title-asc" data-v-9de6ce4e>A-Z</option><option value="title-desc" data-v-9de6ce4e>Z-A</option><option value="pop-desc" data-v-9de6ce4e>Most Popular</option><option value="pop-asc" data-v-9de6ce4e>Least Popular</option><option value="score-desc" data-v-9de6ce4e>Highest Score</option><option value="rating-desc" data-v-9de6ce4e>My Rating ‚Üì</option><option value="rating-asc" data-v-9de6ce4e>My Rating ‚Üë</option><option value="added-desc" data-v-9de6ce4e>Recently Added</option><option value="last-read-desc" data-v-9de6ce4e>Recently Read</option>',9)])],512),[[we,u.sort]]),le(a("select",{"onUpdate:modelValue":c[4]||(c[4]=d=>u.demographic=d),class:"select-field"},[...c[21]||(c[21]=[de('<option value="All" data-v-9de6ce4e>All Demographics</option><option value="Shonen" data-v-9de6ce4e>Shonen</option><option value="Seinen" data-v-9de6ce4e>Seinen</option><option value="Shoujo" data-v-9de6ce4e>Shoujo</option><option value="Josei" data-v-9de6ce4e>Josei</option>',5)])],512),[[we,u.demographic]]),le(a("select",{"onUpdate:modelValue":c[5]||(c[5]=d=>u.status=d),class:"select-field"},[c[23]||(c[23]=de('<option value="All" data-v-9de6ce4e>All Statuses</option><option value="Reading" data-v-9de6ce4e>Reading</option><option value="Completed" data-v-9de6ce4e>Completed</option><option value="On Hold" data-v-9de6ce4e>On Hold</option><option value="Plan to Read" data-v-9de6ce4e>Plan to Read</option><option value="Dropped" data-v-9de6ce4e>Dropped</option><option value="HasHistory" data-v-9de6ce4e>Has History</option>',7)),i.value.length>0?(C(),x(ee,{key:0},[c[22]||(c[22]=a("option",{disabled:""},"‚îÄ‚îÄ Custom Markers ‚îÄ‚îÄ",-1)),(C(!0),x(ee,null,oe(i.value,d=>(C(),x("option",{key:d.name,value:"marker:"+d.name}," üìå "+E(d.name),9,Vn))),128))],64)):Z("",!0)],512),[[we,u.status]]),le(a("select",{"onUpdate:modelValue":c[6]||(c[6]=d=>u.genre=d),class:"select-field"},[c[24]||(c[24]=a("option",{value:"All"},"All Genres",-1)),(C(!0),x(ee,null,oe(I.value,d=>(C(),x("option",{key:d,value:d},E(d),9,Un))),128))],512),[[we,u.genre]]),le(a("select",{"onUpdate:modelValue":c[7]||(c[7]=d=>u.format=d),class:"select-field"},[...c[25]||(c[25]=[de('<option value="All" data-v-9de6ce4e>All Formats</option><option value="Manga" data-v-9de6ce4e>Manga</option><option value="Manhwa" data-v-9de6ce4e>Manhwa</option><option value="Manhua" data-v-9de6ce4e>Manhua</option><option value="One Shot" data-v-9de6ce4e>One Shot</option><option value="Light Novel" data-v-9de6ce4e>Light Novel</option>',6)])],512),[[we,u.format]]),le(a("input",{type:"text","onUpdate:modelValue":c[8]||(c[8]=d=>u.search=d),placeholder:"Search titles...",class:"input-field"},null,512),[[Le,u.search]]),a("div",jn,[a("button",{onClick:c[9]||(c[9]=d=>g("compact")),class:ie(["view-toggle-btn",{active:p.value==="compact"}])},[...c[26]||(c[26]=[a("svg",{class:"icon-svg icon-view-compact"},null,-1)])],2),a("button",{onClick:c[10]||(c[10]=d=>g("large")),class:ie(["view-toggle-btn",{active:p.value==="large"}])},[...c[27]||(c[27]=[a("svg",{class:"icon-svg icon-view-large"},null,-1)])],2)])]),a("div",qn,[_(je,{label:"Chapters:"},{default:W(()=>[a("div",Gn,[le(a("input",{type:"number","onUpdate:modelValue":c[11]||(c[11]=d=>u.chapterMin=d),class:"input-field input-sm",placeholder:"Min",style:{width:"70px"}},null,512),[[Le,u.chapterMin,void 0,{number:!0}]]),c[28]||(c[28]=a("span",{class:"range-separator"},"‚Äì",-1)),le(a("input",{type:"number","onUpdate:modelValue":c[12]||(c[12]=d=>u.chapterMax=d),class:"input-field input-sm",placeholder:"Max",style:{width:"70px"}},null,512),[[Le,u.chapterMax,void 0,{number:!0}]])])]),_:1}),_(je,{label:"Updated:"},{default:W(()=>[le(a("select",{"onUpdate:modelValue":c[13]||(c[13]=d=>u.lastUpdated=d),class:"select-field select-sm"},[...c[29]||(c[29]=[a("option",{value:"all"},"Any Time",-1),a("option",{value:"7d"},"Last 7 Days",-1),a("option",{value:"30d"},"Last 30 Days",-1),a("option",{value:"90d"},"Last 90 Days",-1),a("option",{value:"year"},"Last Year",-1)])],512),[[we,u.lastUpdated]])]),_:1}),_(je,{"custom-class":"quick-filters"},{default:W(()=>[a("button",{onClick:y,class:ie(["btn btn-ghost btn-sm filter-preset-btn",{active:u.chapterMin>=100}])},"üî• Binge-worthy",2),a("button",{onClick:c[14]||(c[14]=d=>u.newChaptersOnly=!u.newChaptersOnly),class:ie(["btn btn-ghost btn-sm filter-preset-btn",{active:u.newChaptersOnly}])},"‚ú® New Chapters",2),a("button",{onClick:f,class:"btn btn-ghost btn-sm filter-preset-btn"},"‚úï Clear")]),_:1})])]),m.isSyncing?(C(),x("div",Wn,[a("div",Kn,[c[30]||(c[30]=a("span",{class:"sync-label"},[a("span",{class:"sync-spinner"}),U(" Updating Library... ")],-1)),a("span",Qn,E(m.current)+" / "+E(m.total),1)]),a("div",Yn,[a("div",{class:"progress-bar-fill",style:ce({width:m.percentage+"%"})},null,4)]),a("div",Zn,E(m.currentTitle),1)])):Z("",!0),a("div",{class:ie(["manga-grid",{compact:p.value==="compact"}])},[(C(!0),x(ee,null,oe(S.value,d=>{var B;return C(),Kt(Sn,{key:d.title+(((B=d.anilistData)==null?void 0:B.id)||""),entry:d,"custom-markers":i.value,"library-settings":v,onClick:h,onMarkerClick:T},null,8,["entry","custom-markers","library-settings"])}),128)),S.value.length===0?(C(),x("div",Jn," No matches found. ")):Z("",!0)],2)])]))}},er=ve(Xn,[["__scopeId","data-v-9de6ce4e"]]);const tr={},ar={id:"tab-import-export",class:"tab-pane fade-in",style:{display:"none"}},sr={class:"content-grid export-import-grid"},nr={class:"card secondary-bg-card"},rr={class:"card-header"},or={class:"card-icon blue-icon"},ir={class:"icon-svg icon-export",style:{width:"20px",height:"20px"}},lr={class:"inner-info-card"},cr={id:"exportDataBtn",class:"btn btn-primary btn-with-icon"},dr={class:"icon-svg icon-export",style:{width:"16px",height:"16px"}},ur={class:"card secondary-bg-card"},gr={class:"card-header"},pr={class:"card-icon purple-icon"},mr={class:"icon-svg icon-import",style:{width:"20px",height:"20px"}},vr={class:"card-title-group"},fr={style:{display:"flex","align-items":"center",gap:"8px"}},hr={class:"info-redirect-btn","data-target":"guide-backup",title:"About Backup & Restore"},yr={class:"icon-svg icon-info",style:{width:"16px",height:"16px"}},br={class:"drop-zone-container",id:"dropZone"},wr={class:"drop-zone-content"},kr={class:"drop-zone-icon"},Sr={class:"icon-svg icon-file",style:{width:"24px",height:"24px"}},Cr={class:"import-actions-row"},xr={id:"startImportBtn",class:"btn btn-primary btn-with-icon"},Er={class:"icon-svg icon-plus",style:{width:"16px",height:"16px"}},Mr={class:"card secondary-bg-card",style:{"grid-column":"1 / -1"}},Br={class:"card-header"},_r={class:"card-icon",style:{background:"rgba(255, 103, 64, 0.1)"}},Lr={style:{width:"20px",height:"20px"},viewBox:"0 0 24 24",fill:"none",stroke:"#FF6740","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Dr={class:"inner-info-card",style:{"flex-direction":"column",gap:"12px"}},Ar={style:{display:"flex",gap:"10px",width:"100%","align-items":"center"}},Ir={id:"mdlistImportBtn",class:"btn btn-primary btn-with-icon"},Tr={style:{width:"16px",height:"16px"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"};function $r(e,t){return C(),x("div",ar,[t[20]||(t[20]=a("header",{class:"header"},[a("div",{class:"header-text"},[a("h1",null,"Import & Export"),a("p",{class:"subtitle"},"Manage your manga bookmarks and reading history. Keep your data safe or transfer it to another machine.")])],-1)),a("div",sr,[a("div",nr,[a("div",rr,[a("div",or,[(C(),x("svg",ir))]),t[0]||(t[0]=de('<div class="card-title-group" data-v-2081d4e6><div style="display:flex;align-items:center;gap:8px;" data-v-2081d4e6><h3 data-v-2081d4e6>Export Data</h3><button class="info-redirect-btn" data-target="guide-backup" title="About Backup &amp; Restore" data-v-2081d4e6><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-2081d4e6><circle cx="12" cy="12" r="10" data-v-2081d4e6></circle><line x1="12" y1="16" x2="12" y2="12" data-v-2081d4e6></line><line x1="12" y1="8" x2="12.01" y2="8" data-v-2081d4e6></line></svg></button></div><p class="description compact" data-v-2081d4e6>Generate a backup of your library and settings.</p></div>',1))]),t[3]||(t[3]=de('<div class="export-options" data-v-2081d4e6><p class="section-label" data-v-2081d4e6>Include in export:</p><div class="export-checkboxes" data-v-2081d4e6><label class="export-option" data-v-2081d4e6><input type="checkbox" id="exportLibrary" checked data-v-2081d4e6><span data-v-2081d4e6>üìö Library Entries</span><span class="export-count" id="exportLibraryCount" data-v-2081d4e6>(0)</span></label><label class="export-option" data-v-2081d4e6><input type="checkbox" id="exportHistory" checked data-v-2081d4e6><span data-v-2081d4e6>üìñ Reading History</span><span class="export-count" id="exportHistoryCount" data-v-2081d4e6>(0)</span></label><label class="export-option" data-v-2081d4e6><input type="checkbox" id="exportSettings" checked data-v-2081d4e6><span data-v-2081d4e6>‚öôÔ∏è Settings</span></label><label class="export-option" data-v-2081d4e6><input type="checkbox" id="exportPersonalData" checked data-v-2081d4e6><span data-v-2081d4e6>üè∑Ô∏è Tags, Notes &amp; Ratings</span><span class="export-count" id="exportPersonalCount" data-v-2081d4e6>(0)</span></label><label class="export-option" data-v-2081d4e6><input type="checkbox" id="exportCache" data-v-2081d4e6><span data-v-2081d4e6>üíæ AniList Cache</span><span class="export-count" id="exportCacheCount" data-v-2081d4e6>(0 KB)</span></label></div></div>',1)),a("div",lr,[t[2]||(t[2]=a("div",{class:"format-info"},[a("span",{class:"label-info"},[U("Format: "),a("span",{class:"highlight-text"},"JSON")])],-1)),a("button",cr,[(C(),x("svg",dr)),t[1]||(t[1]=U(" Export Selected ",-1))])]),t[4]||(t[4]=a("div",{class:"card-footer-info"},[a("span",{class:"status-icon"},"‚ÑπÔ∏è"),a("span",{class:"status-text-muted"},[U("Last backup: "),a("span",{id:"lastBackupDisplay"},"Never")])],-1))]),a("div",ur,[a("div",gr,[a("div",pr,[(C(),x("svg",mr))]),a("div",vr,[a("div",fr,[t[5]||(t[5]=a("h3",null,"Import Data",-1)),a("button",hr,[(C(),x("svg",yr))])]),t[6]||(t[6]=a("p",{class:"description compact"},"Restore your data from a previously exported file. ",-1))])]),a("div",br,[t[9]||(t[9]=a("input",{type:"file",id:"importDataInput",accept:".json,.xml",style:{display:"none"}},null,-1)),a("div",wr,[a("div",kr,[(C(),x("svg",Sr))]),t[7]||(t[7]=a("span",{class:"drop-zone-text"},"Click to upload or drag and drop",-1)),t[8]||(t[8]=a("span",{class:"drop-zone-subtext"},"Supports .json or .xml files (max 10MB)",-1))])]),a("div",Cr,[t[11]||(t[11]=de('<div class="feature-toggle-wrapper" data-v-2081d4e6><div class="toggle-label-group" data-v-2081d4e6><span class="toggle-main-label" data-v-2081d4e6>Merge with current data</span></div><label class="switch" data-v-2081d4e6><input type="checkbox" id="mergeImportToggle" checked data-v-2081d4e6><span class="slider round" data-v-2081d4e6></span></label></div>',1)),a("button",xr,[(C(),x("svg",Er)),t[10]||(t[10]=U(" Start Import ",-1))])]),t[12]||(t[12]=a("div",{class:"caution-banner"},[a("div",{class:"caution-icon"},"‚ö†Ô∏è"),a("div",{class:"caution-text"},[a("strong",null,"Caution:"),U(' If "Merge with current data" is disabled, all existing bookmarks will be overwritten by the imported file. This action cannot be undone. ')])],-1))]),a("div",Mr,[a("div",Br,[a("div",_r,[(C(),x("svg",Lr,[...t[13]||(t[13]=[a("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},null,-1),a("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},null,-1)])]))]),t[14]||(t[14]=a("div",{class:"card-title-group"},[a("div",{style:{display:"flex","align-items":"center",gap:"8px"}},[a("h3",null,"Import from MangaDex List")]),a("p",{class:"description compact"},"Import manga from a public MangaDex reading list (MDList).")],-1))]),a("div",Dr,[t[18]||(t[18]=a("div",{class:"format-info",style:{width:"100%"}},[a("span",{class:"label-info"},"Paste MDList URL or ID:"),a("p",{class:"sub-description"},"Example: https://mangadex.org/list/abc123... or just the UUID ")],-1)),a("div",Ar,[t[17]||(t[17]=a("input",{type:"text",id:"mdlistInput",placeholder:"https://mangadex.org/list/...",class:"input-field",style:{flex:"1"}},null,-1)),a("button",Ir,[(C(),x("svg",Tr,[...t[15]||(t[15]=[a("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},null,-1),a("polyline",{points:"7 10 12 15 17 10"},null,-1),a("line",{x1:"12",y1:"15",x2:"12",y2:"3"},null,-1)])])),t[16]||(t[16]=U(" Import ",-1))])])]),t[19]||(t[19]=a("div",{class:"card-footer-info"},[a("span",{class:"status-icon"},"üìã"),a("span",{class:"status-text-muted"},'Imported manga will be added with "Plan to Read" status')],-1))])])])}const Rr=ve(tr,[["render",$r],["__scopeId","data-v-2081d4e6"]]),Pr=["id"],Fr={class:"card-header"},Or={key:0,class:"card-icon"},Nr={class:"card-body"},Hr={class:"guide-text"},he={__name:"GuideCard",props:{id:{type:String,default:""},icon:{type:String,default:""},title:{type:String,required:!0}},setup(e){return(t,s)=>(C(),x("div",{id:e.id,class:"card guide-card"},[a("div",Fr,[e.icon?(C(),x("div",Or,E(e.icon),1)):Z("",!0),a("h3",null,E(e.title),1)]),a("div",Nr,[a("p",Hr,[Qe(t.$slots,"default")])])],8,Pr))}};const zr={id:"tab-about",class:"tab-pane fade-in"},Vr={class:"content-grid"},Ur={class:"guide-grid"},jr={__name:"AboutTab",setup(e){return(t,s)=>(C(),x("div",zr,[s[11]||(s[11]=a("header",{class:"header"},[a("div",{class:"header-text"},[a("h1",null,"About"),a("p",{class:"subtitle"},"Information, usage guide, and credits.")])],-1)),a("div",Vr,[s[9]||(s[9]=de('<div class="card" data-v-f4c87268><div class="card-body prose" data-v-f4c87268><h2 data-v-f4c87268>MangaFire Bookmark Color Marker</h2><p data-v-f4c87268>A powerful Chrome Extension for <a href="https://mangafire.to/home" target="_blank" data-v-f4c87268>MangaFire.to</a> that enhances your browsing experience by automatically highlighting manga based on your bookmarks and reading history.</p><h3 data-v-f4c87268>üöÄ Why Use This?</h3><p data-v-f4c87268>Finding new manga to read can be frustrating when you can&#39;t instantly see what you&#39;ve already read or saved. MangaFire&#39;s default interface doesn&#39;t always make this clear at a glance.</p><p data-v-f4c87268><strong data-v-f4c87268>Bookmark Color Marker</strong> solves this by visually tagging manga covers with colored borders corresponding to their status (e.g., Reading, Completed, Plan to Read) directly on the browsing pages.</p><hr class="divider" data-v-f4c87268><h3 data-v-f4c87268>‚ú® Features</h3><ul class="feature-list" data-v-f4c87268><li data-v-f4c87268><strong data-v-f4c87268>Automatic Highlighting</strong>: Instantly spot your saved manga with custom colored borders.</li><li data-v-f4c87268><strong data-v-f4c87268>Custom Statuses</strong>: Create your own bookmark categories with unique names, colors, and border styles.</li><li data-v-f4c87268><strong data-v-f4c87268>History Sync</strong>: Optionally highlight manga that are in your reading history but not bookmarked.</li><li data-v-f4c87268><strong data-v-f4c87268>Visual Customization</strong>: Adjust border thickness and style (Solid, Dashed, Dotted, etc.).</li></ul><hr class="divider" data-v-f4c87268><h3 data-v-f4c87268>üìñ How to Use</h3><ol class="usage-list" data-v-f4c87268><li data-v-f4c87268><strong data-v-f4c87268>Sync Data</strong>: Click &#39;Sync Bookmarks Now&#39; in the Settings tab (requires login to MangaFire).</li><li data-v-f4c87268><strong data-v-f4c87268>Browse</strong>: Visit MangaFire.to. Your lists will be highlighted! </li><li data-v-f4c87268><strong data-v-f4c87268>Customize</strong>: Use the Settings tab to add new markers (e.g. &quot;Favorites&quot; in Gold).</li></ol><hr class="divider" data-v-f4c87268><div class="alert-box" data-v-f4c87268><p data-v-f4c87268><strong data-v-f4c87268>Disclaimer:</strong> This is an unofficial extension and is not affiliated with MangaFire.to.</p></div><hr class="divider" data-v-f4c87268><h3 data-v-f4c87268>üîí Privacy &amp; Security</h3><p data-v-f4c87268>Your privacy is our priority. This extension is designed with a **privacy-first** approach:</p><ul class="feature-list" data-v-f4c87268><li data-v-f4c87268><strong data-v-f4c87268>Local Storage</strong>: All bookmarked manga, reading history, and settings are stored locally on your device using `chrome.storage.local`.</li><li data-v-f4c87268><strong data-v-f4c87268>No External Servers</strong>: We do not maintain any external servers. Your data never leaves your browser, except when you manually export it or sync with AniList (which goes directly to AniList APIs).</li><li data-v-f4c87268><strong data-v-f4c87268>No Tracking</strong>: There are no trackers, analytics, or behavioral monitoring scripts in this extension.</li><li data-v-f4c87268><strong data-v-f4c87268>Open Permissions</strong>: We only request permissions necessary for the extension to function (e.g., access to `mangafire.to` for highlighting).</li></ul></div></div><div class="section-title-full" data-v-f4c87268><h2 class="section-label" data-v-f4c87268>User Guide &amp; Feature Help</h2></div>',2)),a("div",Ur,[_(he,{id:"guide-sync",title:"Auto Sync",icon:"üîÑ"},{default:W(()=>[...s[0]||(s[0]=[U(" Automatically retrieves your latest bookmarks from MangaFire. You can set the interval (in days) for how often the background sync should trigger. Requires you to be logged into the site. ",-1)])]),_:1}),_(he,{id:"guide-markers",title:"Custom Markers",icon:"üé®"},{default:W(()=>[...s[1]||(s[1]=[U(' Go beyond default statuses! Create markers like "Favorite", "Top Tier", or "To-Read". You can customize the color and border style (dashed, double, etc.) for each marker. ',-1)])]),_:1}),_(he,{id:"guide-general",title:"General Preferences",icon:"‚öôÔ∏è"},{default:W(()=>[...s[2]||(s[2]=[U(" Toggle ",-1),a("b",null,"Mark Homepage",-1),U(" to see highlights on the front page. Use ",-1),a("b",null,"Sync & Mark Read",-1),U(" to track history. ",-1),a("b",null,"Family Friendly",-1),U(" mode hides entries with adult-only tags. ",-1)])]),_:1}),_(he,{id:"guide-entries",title:"Saved Entries",icon:"üìö"},{default:W(()=>[...s[3]||(s[3]=[U(" Your local manga library. Synchronize with AniList to get cover images and metadata. Use filters to browse your collection by status, format, or name. ",-1)])]),_:1}),_(he,{id:"guide-backup",title:"Backup & Restore",icon:"üíæ"},{default:W(()=>[...s[4]||(s[4]=[U(" Always keep a backup! ",-1),a("b",null,"Export",-1),U(" saves your bookmarks, settings, and cache. ",-1),a("b",null,"Import",-1),U(" allows you to restore data or merge backups from different devices. ",-1)])]),_:1}),_(he,{id:"guide-personalization",title:"Personalization",icon:"üåô"},{default:W(()=>[...s[5]||(s[5]=[U(" Switch between light and dark modes in the sidebar. You can also adjust the thickness of the manga highlight borders to suit your visual preference. ",-1)])]),_:1}),_(he,{id:"guide-dashboard",title:"Dashboard Settings",icon:"üìä"},{default:W(()=>[...s[6]||(s[6]=[U(" Enable or disable the ",-1),a("b",null,"Manga Dashboard",-1),U(" new tab page. Use ",-1),a("b",null,"Packed Layout",-1),U(" to show more detailed statistics if you have many entries. ",-1)])]),_:1}),_(he,{id:"guide-styles",title:"Highlight Styles",icon:"üñºÔ∏è"},{default:W(()=>[...s[7]||(s[7]=[U(" Customize the default appearance of highlights. Choose between ",-1),a("b",null,"Solid, Dashed, Dotted",-1),U(" styles and adjust the ",-1),a("b",null,"Border Thickness",-1),U(" for better visibility. ",-1)])]),_:1}),_(he,{id:"guide-fresh-sync",title:"Fresh Sync",icon:"‚ö°"},{default:W(()=>[...s[8]||(s[8]=[U(" Use the ",-1),a("b",null,"Fresh Sync Entries",-1),U(" button in the Saved Entries tab to completely rebuild your library metadata and covers from AniList. ",-1),a("i",null,"Note: This clears the local library cache first.",-1)])]),_:1})]),s[10]||(s[10]=de('<div class="support-dev-card glass-card" data-v-f4c87268><div class="card-body" data-v-f4c87268><div class="support-header" data-v-f4c87268><div class="support-icon" data-v-f4c87268>‚òï</div><h2 data-v-f4c87268>Support the Development</h2></div><p class="description" data-v-f4c87268>If you enjoy using this extension and want to support its further development, consider buying me a coffee! Your support helps keep the project alive, ad-free, and always evolving with new requested features.</p><div class="support-links-group" data-v-f4c87268><a href="https://www.buymeacoffee.com" target="_blank" class="btn btn-primary support-btn" data-v-f4c87268><span class="btn-icon" data-v-f4c87268>‚òï</span> Buy me a Coffee </a><a href="https://github.com/sponsors/yourprofile" target="_blank" class="btn btn-ghost support-btn" data-v-f4c87268><span class="btn-icon" data-v-f4c87268>üíñ</span> GitHub Sponsor </a></div></div></div>',1))])]))}},qr=ve(jr,[["__scopeId","data-v-f4c87268"]]);function tt(){return typeof anime<"u"}function Gr(e,t={}){if(!tt())return null;const s={targets:e,strokeDashoffset:[anime.setDashoffset,0],easing:"easeInOutSine",duration:1500,direction:"alternate",loop:!1};return anime({...s,...t})}function Wr(e){if(!tt())return Promise.resolve();const t=e.querySelector(".anime-success-checkmark");t&&t.remove(),e.style.position="relative";const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("anime-success-checkmark"),s.setAttribute("width","40"),s.setAttribute("height","40"),s.setAttribute("viewBox","0 0 52 52"),s.style.position="absolute",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)",s.style.zIndex="100",s.style.pointerEvents="none";const n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M14.1 27.2l7.1 7.2 16.7-16.8"),n.setAttribute("fill","none"),n.setAttribute("stroke","#4CAF50"),n.setAttribute("stroke-width","4"),n.setAttribute("stroke-linecap","round"),n.setAttribute("stroke-linejoin","round"),s.appendChild(n),e.appendChild(s),Gr(n,{duration:800,easing:"easeInOutQuad",complete:()=>{anime({targets:s,opacity:0,delay:1e3,duration:500,easing:"linear",complete:()=>s.remove()})}}).finished}function Kr(e){tt()&&(anime.set(e,{scale:.8,opacity:0,rotateX:10}),anime({targets:e,scale:1,opacity:1,rotateX:0,duration:800,easing:"easeOutElastic(1, .6)"}))}const Qr={class:"modal-content fade-in"},Yr={class:"modal-layout"},Zr={class:"modal-sidebar"},Jr=["src"],Xr={class:"modal-sidebar-info"},eo={class:"modal-meta-row"},to={class:"modal-meta-row"},ao={id:"modalFormatBadge",class:"format-badge"},so={class:"modal-meta-row"},no={class:"modal-meta-value",id:"modalPopularity"},ro={class:"modal-meta-row"},oo={class:"modal-score"},io={class:"score-value",id:"modalScoreValue"},lo={class:"modal-meta-row"},co={class:"modal-meta-value",id:"modalReleased"},uo={class:"modal-meta-row",id:"modalHistoryRow"},go={class:"modal-history-actions"},po={key:0,id:"modalReadChaptersList",class:"modal-chapters-list"},mo={key:0,style:{color:"var(--text-secondary)","font-style":"italic"}},vo={class:"modal-main"},fo={id:"modalTitle"},ho={id:"modalSynonyms",class:"modal-synonyms"},yo={id:"modalGenres",class:"modal-genres"},bo={id:"modalTags",class:"modal-tags"},wo={class:"modal-personal-section",id:"modalPersonalSection"},ko={class:"modal-personal-row"},So={class:"modal-personal-content"},Co={class:"star-rating-container"},xo=["onClick","onMouseenter"],Eo={class:"star-rating-value"},Mo={class:"modal-personal-row"},Bo={class:"modal-personal-content"},_o={class:"tag-input-container"},Lo={class:"tag-list"},Do={class:"tag-pill-text"},Ao=["onClick"],Io={class:"tag-input-wrapper"},To={key:0,class:"tag-suggestions"},$o=["onClick"],Ro={class:"modal-personal-row"},Po={class:"modal-personal-content"},Fo={class:"notes-editor-container"},Oo={class:"notes-char-count"},No={class:"modal-description"},Ho=["innerHTML"],zo={id:"modalExternalLinks",class:"modal-external-links"},Vo=["href"],Uo=["href"],jo={__name:"MangaDetailsModal",setup(e){const t=X(!1),s=X({}),n=V(()=>s.value.anilistData),r=X(!1),i=X([]),l=X({tags:[],notes:"",rating:0}),p=X([]),o=X(""),m=X(0),v=X(null),u=V(()=>n.value?Je(n.value.format,n.value.countryOfOrigin):"Manga"),I=V(()=>{if(!s.value.status)return{};const k=Mt(s.value.status,s.value.customMarker,[]);return{backgroundColor:k.badgeBg,color:k.badgeText}}),O=V(()=>{var k,b;return n.value?n.value.bannerImage||((k=n.value.coverImage)==null?void 0:k.extraLarge)||((b=n.value.coverImage)==null?void 0:b.large):null}),S=V(()=>{var k;return O.value?{backgroundImage:`url('${O.value}')`,display:"block",filter:(k=n.value)!=null&&k.bannerImage?"none":"blur(4px) brightness(0.7)"}:{}}),w=V(()=>{var k,b;return n.value&&(((k=n.value.coverImage)==null?void 0:k.large)||((b=n.value.coverImage)==null?void 0:b.medium))||"https://mangadex.org/img/avatar.png"}),h=V(()=>{var b,F;if(!((F=(b=n.value)==null?void 0:b.startDate)!=null&&F.year))return"Unknown";const k=n.value.startDate;return`${k.year}${k.month?"-"+k.month:""}${k.day?"-"+k.day:""}`}),g=V(()=>{var L;if(!((L=n.value)!=null&&L.externalLinks))return[];const k=n.value.externalLinks,b=new Map;k.forEach(P=>{b.has(P.site)||b.set(P.site,[]),b.get(P.site).push(P)});const F=[];return b.forEach(P=>{if(P.length>1){const z=P.find(G=>{const q=(G.language||"").toLowerCase(),J=(G.url||"").toLowerCase();return q==="english"||J.includes("/en/")||J.includes("/english")||J.includes("language=en")});F.push(z||P[0])}else F.push(P[0])}),F}),f=V(()=>[...i.value].sort((k,b)=>{const F=parseFloat(k.replace(/[^\d.]/g,""))||0;return(parseFloat(b.replace(/[^\d.]/g,""))||0)-F})),y=V(()=>{const k=o.value.toLowerCase().trim();return k?p.value.filter(b=>b.toLowerCase().includes(k)&&!l.value.tags.includes(b)).slice(0,5):[]}),T=async k=>{s.value=k,r.value=!1,t.value=!0,Q(),l.value=await et(k),p.value=await Ge(),setTimeout(()=>{v.value&&(v.value.scrollTop=0);const b=document.querySelector("#mangaDetailsModal .modal-content");b&&Kr(b)},0)},j=()=>{t.value=!1},N=()=>{r.value=!r.value},Q=()=>{var k;(k=chrome.runtime)!=null&&k.id&&chrome.storage.local.get(["savedReadChapters"],b=>{const F=b.savedReadChapters||{},L=s.value.title.toLowerCase(),P=s.value.title.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),z=s.value.mangaSlug?s.value.mangaSlug.split(".")[0]:null,G=Object.keys(F).find(q=>{const J=q.toLowerCase(),se=J.replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");if(q.startsWith("webtoon:")){const ne=q.replace("webtoon:","").replace(/-/g," ").toLowerCase(),ge=q.replace("webtoon:","").toLowerCase();if(L.includes(ne)||P===ge||ne.includes(L))return!0}return J===L||se===P||z&&se===z||z&&J===z});i.value=G?F[G]:[]})},te=async()=>{var P,z;const k=(P=n.value)==null?void 0:P.chapters;if(!k||k<=0){alert("Unable to mark all as read: Total chapter count is unknown.");return}if(!confirm(`Mark all ${k} chapters as read?`))return;const b=Array.from({length:k},(G,q)=>String(q+1)),F=G=>G.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),L=((z=s.value.mangaSlug)==null?void 0:z.split(".")[0])||F(s.value.title);chrome.storage.local.get(["savedReadChapters"],G=>{const q=G.savedReadChapters||{};q[L]=b,chrome.storage.local.set({savedReadChapters:q},()=>{i.value=b,s.value.readChapters=k,s.value.lastChapterRead=String(k),s.value.lastRead=Date.now(),chrome.storage.local.get(["savedEntriesMerged"],se=>{const ne=se.savedEntriesMerged||[],ge=ne.findIndex(fe=>{var be,Me;return((be=fe.anilistData)==null?void 0:be.id)===((Me=n.value)==null?void 0:Me.id)||fe.mangaSlug===s.value.mangaSlug});ge!==-1&&(ne[ge]={...s.value},chrome.storage.local.set({savedEntriesMerged:ne},()=>{window.refreshLibraryData&&window.refreshLibraryData()}))});const J=document.querySelector(".btn-primary.btn-sm");J&&Wr(J)})})},M=async k=>{l.value.rating=k,await _n(s.value,k)},c=async()=>{await Bn(s.value,l.value.notes)},d=async()=>{const k=o.value.trim();k&&!l.value.tags.includes(k)&&(l.value.tags.push(k),await En(s.value,k),p.value=await Ge()),o.value=""},B=k=>{o.value=k,d()},R=async k=>{l.value.tags=l.value.tags.filter(b=>b!==k),await Mn(s.value,k)},A=k=>{const b=k*2,F=m.value||l.value.rating;return F>=b?"full":F>=b-1?"half":""},$=k=>{const b=k*2;return(m.value||l.value.rating)>=b-1?"‚òÖ":"‚òÜ"};return Pe(()=>{window.showMangaDetails=T}),(k,b)=>{var F,L,P,z,G,q,J,se,ne,ge,fe,be,Me,gt,pt;return t.value?(C(),x("div",{key:0,id:"mangaDetailsModal",class:"modal-overlay",onClick:Te(j,["self"])},[a("div",Qr,[a("button",{class:"modal-close",id:"closeMangaDetails",onClick:j},"√ó"),O.value?(C(),x("div",{key:0,id:"modalBanner",class:"modal-banner",style:ce(S.value)},null,4)):Z("",!0),a("div",{class:"modal-body",ref_key:"modalBodyRef",ref:v},[a("div",Yr,[a("div",Zr,[a("img",{id:"modalCover",src:w.value,alt:"Cover",class:"modal-cover"},null,8,Jr),a("div",Xr,[a("div",eo,[b[3]||(b[3]=a("span",{class:"modal-meta-label"},"Status",-1)),a("div",{id:"modalStatusBadge",class:"manga-card-status",style:ce(I.value)},E(s.value.status),5)]),a("div",to,[b[4]||(b[4]=a("span",{class:"modal-meta-label"},"Format",-1)),a("div",ao,E(u.value),1)]),a("div",so,[b[5]||(b[5]=a("span",{class:"modal-meta-label"},"Popularity",-1)),a("div",no,E(((L=(F=n.value)==null?void 0:F.popularity)==null?void 0:L.toLocaleString())||"-"),1)]),a("div",ro,[b[6]||(b[6]=a("span",{class:"modal-meta-label"},"Average Score",-1)),a("div",oo,[a("span",io,E((P=n.value)!=null&&P.averageScore?n.value.averageScore+"%":"-"),1)])]),a("div",lo,[b[7]||(b[7]=a("span",{class:"modal-meta-label"},"Released",-1)),a("div",co,E(h.value),1)]),a("div",uo,[b[8]||(b[8]=a("span",{class:"modal-meta-label"},"History",-1)),a("div",go,[a("button",{class:"btn btn-ghost btn-sm",onClick:N,style:{padding:"2px 8px","font-size":"11px"}},E(r.value?"Hide Chapters":"Show Chapters"),1),a("button",{class:"btn btn-primary btn-sm",onClick:te,style:{padding:"2px 8px","font-size":"11px"},title:"Mark all chapters as read up to total"},"‚úì Mark All Read")]),r.value?(C(),x("div",po,[(C(!0),x(ee,null,oe(f.value,H=>(C(),x("span",{key:H,class:"chapter-pill"},E(H),1))),128)),f.value.length===0?(C(),x("span",mo," No history found ")):Z("",!0)])):Z("",!0)])])]),a("div",vo,[a("h2",fo,E(((G=(z=n.value)==null?void 0:z.title)==null?void 0:G.english)||((J=(q=n.value)==null?void 0:q.title)==null?void 0:J.romaji)||s.value.title),1),a("div",ho,[(C(!0),x(ee,null,oe((ne=(se=n.value)==null?void 0:se.synonyms)==null?void 0:ne.slice(0,5),H=>(C(),x("span",{key:H,class:"modal-synonym-item"},E(H),1))),128))]),a("div",yo,[(C(!0),x(ee,null,oe((ge=n.value)==null?void 0:ge.genres,H=>(C(),x("span",{key:H,class:"modal-genre-tag"},E(H),1))),128))]),a("div",bo,[(C(!0),x(ee,null,oe((be=(fe=n.value)==null?void 0:fe.tags)==null?void 0:be.slice(0,10),H=>(C(),x("span",{key:H.name,class:"modal-tag"},E(H.name),1))),128))]),a("div",wo,[b[12]||(b[12]=a("h4",null,"üìù Your Data",-1)),a("div",ko,[b[9]||(b[9]=a("span",{class:"modal-personal-label"},"Rating",-1)),a("div",So,[a("div",Co,[(C(),x(ee,null,oe(5,H=>a("span",{key:H,class:ie(["star-rating-star",A(H)]),onClick:Ae=>M(H*2),onMouseenter:Ae=>m.value=H*2,onMouseleave:b[0]||(b[0]=Ae=>m.value=0)},E($(H)),43,xo)),64)),a("span",Eo,E(l.value.rating>0?l.value.rating+"/10":""),1)])])]),a("div",Mo,[b[10]||(b[10]=a("span",{class:"modal-personal-label"},"Tags",-1)),a("div",Bo,[a("div",_o,[a("div",Lo,[(C(!0),x(ee,null,oe(l.value.tags,H=>(C(),x("span",{key:H,class:"tag-pill"},[a("span",Do,E(H),1),a("button",{class:"tag-pill-remove",onClick:Ae=>R(H)},"√ó",8,Ao)]))),128))]),a("div",Io,[le(a("input",{type:"text","onUpdate:modelValue":b[1]||(b[1]=H=>o.value=H),class:"tag-input",placeholder:"Add tag...",onKeydown:Qt(d,["enter"])},null,544),[[Le,o.value]]),y.value.length>0?(C(),x("div",To,[(C(!0),x(ee,null,oe(y.value,H=>(C(),x("div",{key:H,class:"tag-suggestion-item",onClick:Ae=>B(H)},E(H),9,$o))),128))])):Z("",!0)])])])]),a("div",Ro,[b[11]||(b[11]=a("span",{class:"modal-personal-label"},"Notes",-1)),a("div",Po,[a("div",Fo,[le(a("textarea",{"onUpdate:modelValue":b[2]||(b[2]=H=>l.value.notes=H),class:"notes-textarea",placeholder:"Add personal notes...",rows:"3",onBlur:c},null,544),[[Le,l.value.notes]]),a("span",Oo,E(((Me=l.value.notes)==null?void 0:Me.length)||0)+"/500",1)])])])]),a("div",No,[b[13]||(b[13]=a("h3",null,"Synopsis",-1)),a("p",{id:"modalDescriptionText",innerHTML:((gt=n.value)==null?void 0:gt.description)||"No description available."},null,8,Ho)]),a("div",zo,[(pt=n.value)!=null&&pt.siteUrl?(C(),x("a",{key:0,class:"external-link-btn primary",href:n.value.siteUrl,target:"_blank"},[...b[14]||(b[14]=[a("span",null,"AniList",-1)])],8,Vo)):Z("",!0),(C(!0),x(ee,null,oe(g.value,H=>(C(),x("a",{key:H.url,class:"external-link-btn",href:H.url,target:"_blank"},E(H.site),9,Uo))),128))])])])],512)])])):Z("",!0)}}},qo=ve(jo,[["__scopeId","data-v-6e0f71b5"]]);const Go={class:"app-container"},Wo={class:"main-content"},Ko={__name:"App",setup(e){return Pe(()=>{xa()}),(t,s)=>(C(),x(ee,null,[a("div",Go,[s[0]||(s[0]=de('<aside class="sidebar"><div class="brand"><div class="brand-icon"><span class="icon-svg icon-brand"></span></div><span class="brand-name header-text-gradient">Color Marker</span></div><nav class="nav-menu"><a href="#" class="nav-item active" data-tab="settings"><span class="nav-icon">‚öôÔ∏è</span> General Settings </a><a href="#" class="nav-item" data-tab="saved-entries"><span class="nav-icon">üìö</span> Saved Entries </a><a href="#" class="nav-item" data-tab="import-export"><span class="nav-icon">üìÇ</span> Import &amp; Export </a><a href="#" class="nav-item" data-tab="appearance"><span class="nav-icon">üé®</span> Appearance </a><a href="#" class="nav-item" data-tab="about"><span class="nav-icon">‚ÑπÔ∏è</span> About </a><div class="nav-indicator"></div></nav><div class="sidebar-footer"><a href="https://www.buymeacoffee.com" target="_blank" class="sidebar-btn support-sidebar-btn" title="Support Developer"><span class="icon">‚òï</span><span class="label">Support Dev</span></a><div class="version-info">Version 3.7.0</div></div></aside>',1)),a("main",Wo,[_(Va),_(Wa),_(er),_(Rr),_(qr)])]),s[1]||(s[1]=a("button",{id:"scrollToTopBtn",class:"scroll-to-top",title:"Go to top"},[a("svg",{class:"icon-svg icon-arrow-up"})],-1)),_(qo)],64))}};(function(){try{const e=localStorage.getItem("theme"),t=document.documentElement;t.classList.remove("dark-mode","black-mode","neon-mode","light-mode"),e==="light"?t.classList.add("light-mode"):e==="black"?t.classList.add("black-mode"):e==="neon"?t.classList.add("neon-mode"):t.classList.add("dark-mode")}catch(e){console.error("Preloader error:",e)}})();var Bt={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},at={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Qo=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Re={CSS:{},springs:{}};function pe(e,t,s){return Math.min(Math.max(e,t),s)}function De(e,t){return e.indexOf(t)>-1}function qe(e,t){return e.apply(null,t)}var D={arr:function(e){return Array.isArray(e)},obj:function(e){return De(Object.prototype.toString.call(e),"Object")},pth:function(e){return D.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||D.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return D.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return D.hex(e)||D.rgb(e)||D.hsl(e)},key:function(e){return!Bt.hasOwnProperty(e)&&!at.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function _t(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(s){return parseFloat(s)}):[]}function Lt(e,t){var s=_t(e),n=pe(D.und(s[0])?1:s[0],.1,100),r=pe(D.und(s[1])?100:s[1],.1,100),i=pe(D.und(s[2])?10:s[2],.1,100),l=pe(D.und(s[3])?0:s[3],.1,100),p=Math.sqrt(r/n),o=i/(2*Math.sqrt(r*n)),m=o<1?p*Math.sqrt(1-o*o):0,v=1,u=o<1?(o*p+-l)/m:-l+p;function I(S){var w=t?t*S/1e3:S;return o<1?w=Math.exp(-w*o*p)*(v*Math.cos(m*w)+u*Math.sin(m*w)):w=(v+u*w)*Math.exp(-w*p),S===0||S===1?S:1-w}function O(){var S=Re.springs[e];if(S)return S;for(var w=1/6,h=0,g=0;;)if(h+=w,I(h)===1){if(g++,g>=16)break}else g=0;var f=h*w*1e3;return Re.springs[e]=f,f}return t?I:O}function Yo(e){return e===void 0&&(e=10),function(t){return Math.ceil(pe(t,1e-6,1)*e)*(1/e)}}var Zo=function(){var e=11,t=1/(e-1);function s(v,u){return 1-3*u+3*v}function n(v,u){return 3*u-6*v}function r(v){return 3*v}function i(v,u,I){return((s(u,I)*v+n(u,I))*v+r(u))*v}function l(v,u,I){return 3*s(u,I)*v*v+2*n(u,I)*v+r(u)}function p(v,u,I,O,S){var w,h,g=0;do h=u+(I-u)/2,w=i(h,O,S)-v,w>0?I=h:u=h;while(Math.abs(w)>1e-7&&++g<10);return h}function o(v,u,I,O){for(var S=0;S<4;++S){var w=l(u,I,O);if(w===0)return u;var h=i(u,I,O)-v;u-=h/w}return u}function m(v,u,I,O){if(!(0<=v&&v<=1&&0<=I&&I<=1))return;var S=new Float32Array(e);if(v!==u||I!==O)for(var w=0;w<e;++w)S[w]=i(w*t,v,I);function h(g){for(var f=0,y=1,T=e-1;y!==T&&S[y]<=g;++y)f+=t;--y;var j=(g-S[y])/(S[y+1]-S[y]),N=f+j*t,Q=l(N,v,I);return Q>=.001?o(g,N,v,I):Q===0?N:p(g,f,f+t,v,I)}return function(g){return v===u&&I===O||g===0||g===1?g:i(h(g),u,O)}}return m}(),Dt=function(){var e={linear:function(){return function(n){return n}}},t={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var r,i=4;n<((r=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((r*3-2)/22-n,2)}},Elastic:function(n,r){n===void 0&&(n=1),r===void 0&&(r=.5);var i=pe(n,1,10),l=pe(r,.1,2);return function(p){return p===0||p===1?p:-i*Math.pow(2,10*(p-1))*Math.sin((p-1-l/(Math.PI*2)*Math.asin(1/i))*(Math.PI*2)/l)}}},s=["Quad","Cubic","Quart","Quint","Expo"];return s.forEach(function(n,r){t[n]=function(){return function(i){return Math.pow(i,r+2)}}}),Object.keys(t).forEach(function(n){var r=t[n];e["easeIn"+n]=r,e["easeOut"+n]=function(i,l){return function(p){return 1-r(i,l)(1-p)}},e["easeInOut"+n]=function(i,l){return function(p){return p<.5?r(i,l)(p*2)/2:1-r(i,l)(p*-2+2)/2}},e["easeOutIn"+n]=function(i,l){return function(p){return p<.5?(1-r(i,l)(1-p*2))/2:(r(i,l)(p*2-1)+1)/2}}}),e}();function st(e,t){if(D.fnc(e))return e;var s=e.split("(")[0],n=Dt[s],r=_t(e);switch(s){case"spring":return Lt(e,t);case"cubicBezier":return qe(Zo,r);case"steps":return qe(Yo,r);default:return qe(n,r)}}function At(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function Oe(e,t){for(var s=e.length,n=arguments.length>=2?arguments[1]:void 0,r=[],i=0;i<s;i++)if(i in e){var l=e[i];t.call(n,l,i,e)&&r.push(l)}return r}function Ne(e){return e.reduce(function(t,s){return t.concat(D.arr(s)?Ne(s):s)},[])}function bt(e){return D.arr(e)?e:(D.str(e)&&(e=At(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function nt(e,t){return e.some(function(s){return s===t})}function rt(e){var t={};for(var s in e)t[s]=e[s];return t}function We(e,t){var s=rt(e);for(var n in e)s[n]=t.hasOwnProperty(n)?t[n]:e[n];return s}function He(e,t){var s=rt(e);for(var n in t)s[n]=D.und(e[n])?t[n]:e[n];return s}function Jo(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function Xo(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,s=e.replace(t,function(p,o,m,v){return o+o+m+m+v+v}),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s),r=parseInt(n[1],16),i=parseInt(n[2],16),l=parseInt(n[3],16);return"rgba("+r+","+i+","+l+",1)"}function ei(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),s=parseInt(t[1],10)/360,n=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100,i=t[4]||1;function l(I,O,S){return S<0&&(S+=1),S>1&&(S-=1),S<1/6?I+(O-I)*6*S:S<1/2?O:S<2/3?I+(O-I)*(2/3-S)*6:I}var p,o,m;if(n==0)p=o=m=r;else{var v=r<.5?r*(1+n):r+n-r*n,u=2*r-v;p=l(u,v,s+1/3),o=l(u,v,s),m=l(u,v,s-1/3)}return"rgba("+p*255+","+o*255+","+m*255+","+i+")"}function ti(e){if(D.rgb(e))return Jo(e);if(D.hex(e))return Xo(e);if(D.hsl(e))return ei(e)}function ye(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function ai(e){if(De(e,"translate")||e==="perspective")return"px";if(De(e,"rotate")||De(e,"skew"))return"deg"}function Ke(e,t){return D.fnc(e)?e(t.target,t.id,t.total):e}function me(e,t){return e.getAttribute(t)}function ot(e,t,s){var n=ye(t);if(nt([s,"deg","rad","turn"],n))return t;var r=Re.CSS[t+s];if(!D.und(r))return r;var i=100,l=document.createElement(e.tagName),p=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;p.appendChild(l),l.style.position="absolute",l.style.width=i+s;var o=i/l.offsetWidth;p.removeChild(l);var m=o*parseFloat(t);return Re.CSS[t+s]=m,m}function It(e,t,s){if(t in e.style){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=e.style[t]||getComputedStyle(e).getPropertyValue(n)||"0";return s?ot(e,r,s):r}}function it(e,t){if(D.dom(e)&&!D.inp(e)&&(!D.nil(me(e,t))||D.svg(e)&&e[t]))return"attribute";if(D.dom(e)&&nt(Qo,t))return"transform";if(D.dom(e)&&t!=="transform"&&It(e,t))return"css";if(e[t]!=null)return"object"}function Tt(e){if(D.dom(e)){for(var t=e.style.transform||"",s=/(\w+)\(([^)]*)\)/g,n=new Map,r;r=s.exec(t);)n.set(r[1],r[2]);return n}}function si(e,t,s,n){var r=De(t,"scale")?1:0+ai(t),i=Tt(e).get(t)||r;return s&&(s.transforms.list.set(t,i),s.transforms.last=t),n?ot(e,i,n):i}function lt(e,t,s,n){switch(it(e,t)){case"transform":return si(e,t,n,s);case"css":return It(e,t,s);case"attribute":return me(e,t);default:return e[t]||0}}function ct(e,t){var s=/^(\*=|\+=|-=)/.exec(e);if(!s)return e;var n=ye(e)||0,r=parseFloat(t),i=parseFloat(e.replace(s[0],""));switch(s[0][0]){case"+":return r+i+n;case"-":return r-i+n;case"*":return r*i+n}}function $t(e,t){if(D.col(e))return ti(e);if(/\s/g.test(e))return e;var s=ye(e),n=s?e.substr(0,e.length-s.length):e;return t?n+t:n}function dt(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ni(e){return Math.PI*2*me(e,"r")}function ri(e){return me(e,"width")*2+me(e,"height")*2}function oi(e){return dt({x:me(e,"x1"),y:me(e,"y1")},{x:me(e,"x2"),y:me(e,"y2")})}function Rt(e){for(var t=e.points,s=0,n,r=0;r<t.numberOfItems;r++){var i=t.getItem(r);r>0&&(s+=dt(n,i)),n=i}return s}function ii(e){var t=e.points;return Rt(e)+dt(t.getItem(t.numberOfItems-1),t.getItem(0))}function Pt(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return ni(e);case"rect":return ri(e);case"line":return oi(e);case"polyline":return Rt(e);case"polygon":return ii(e)}}function li(e){var t=Pt(e);return e.setAttribute("stroke-dasharray",t),t}function ci(e){for(var t=e.parentNode;D.svg(t)&&D.svg(t.parentNode);)t=t.parentNode;return t}function Ft(e,t){var s=t||{},n=s.el||ci(e),r=n.getBoundingClientRect(),i=me(n,"viewBox"),l=r.width,p=r.height,o=s.viewBox||(i?i.split(" "):[0,0,l,p]);return{el:n,viewBox:o,x:o[0]/1,y:o[1]/1,w:l,h:p,vW:o[2],vH:o[3]}}function di(e,t){var s=D.str(e)?At(e)[0]:e,n=t||100;return function(r){return{property:r,el:s,svg:Ft(s),totalLength:Pt(s)*(n/100)}}}function ui(e,t,s){function n(v){v===void 0&&(v=0);var u=t+v>=1?t+v:0;return e.el.getPointAtLength(u)}var r=Ft(e.el,e.svg),i=n(),l=n(-1),p=n(1),o=s?1:r.w/r.vW,m=s?1:r.h/r.vH;switch(e.property){case"x":return(i.x-r.x)*o;case"y":return(i.y-r.y)*m;case"angle":return Math.atan2(p.y-l.y,p.x-l.x)*180/Math.PI}}function wt(e,t){var s=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=$t(D.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(s)?n.match(s).map(Number):[0],strings:D.str(e)||t?n.split(s):[]}}function ut(e){var t=e?Ne(D.arr(e)?e.map(bt):bt(e)):[];return Oe(t,function(s,n,r){return r.indexOf(s)===n})}function Ot(e){var t=ut(e);return t.map(function(s,n){return{target:s,id:n,total:t.length,transforms:{list:Tt(s)}}})}function gi(e,t){var s=rt(t);if(/^spring/.test(s.easing)&&(s.duration=Lt(s.easing)),D.arr(e)){var n=e.length,r=n===2&&!D.obj(e[0]);r?e={value:e}:D.fnc(t.duration)||(s.duration=t.duration/n)}var i=D.arr(e)?e:[e];return i.map(function(l,p){var o=D.obj(l)&&!D.pth(l)?l:{value:l};return D.und(o.delay)&&(o.delay=p?0:t.delay),D.und(o.endDelay)&&(o.endDelay=p===i.length-1?t.endDelay:0),o}).map(function(l){return He(l,s)})}function pi(e){for(var t=Oe(Ne(e.map(function(i){return Object.keys(i)})),function(i){return D.key(i)}).reduce(function(i,l){return i.indexOf(l)<0&&i.push(l),i},[]),s={},n=function(i){var l=t[i];s[l]=e.map(function(p){var o={};for(var m in p)D.key(m)?m==l&&(o.value=p[m]):o[m]=p[m];return o})},r=0;r<t.length;r++)n(r);return s}function mi(e,t){var s=[],n=t.keyframes;n&&(t=He(pi(n),t));for(var r in t)D.key(r)&&s.push({name:r,tweens:gi(t[r],e)});return s}function vi(e,t){var s={};for(var n in e){var r=Ke(e[n],t);D.arr(r)&&(r=r.map(function(i){return Ke(i,t)}),r.length===1&&(r=r[0])),s[n]=r}return s.duration=parseFloat(s.duration),s.delay=parseFloat(s.delay),s}function fi(e,t){var s;return e.tweens.map(function(n){var r=vi(n,t),i=r.value,l=D.arr(i)?i[1]:i,p=ye(l),o=lt(t.target,e.name,p,t),m=s?s.to.original:o,v=D.arr(i)?i[0]:m,u=ye(v)||ye(o),I=p||u;return D.und(l)&&(l=m),r.from=wt(v,I),r.to=wt(ct(l,v),I),r.start=s?s.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=st(r.easing,r.duration),r.isPath=D.pth(i),r.isPathTargetInsideSVG=r.isPath&&D.svg(t.target),r.isColor=D.col(r.from.original),r.isColor&&(r.round=1),s=r,r})}var Nt={css:function(e,t,s){return e.style[t]=s},attribute:function(e,t,s){return e.setAttribute(t,s)},object:function(e,t,s){return e[t]=s},transform:function(e,t,s,n,r){if(n.list.set(t,s),t===n.last||r){var i="";n.list.forEach(function(l,p){i+=p+"("+l+") "}),e.style.transform=i}}};function Ht(e,t){var s=Ot(e);s.forEach(function(n){for(var r in t){var i=Ke(t[r],n),l=n.target,p=ye(i),o=lt(l,r,p,n),m=p||ye(o),v=ct($t(i,m),o),u=it(l,r);Nt[u](l,r,v,n.transforms,!0)}})}function hi(e,t){var s=it(e.target,t.name);if(s){var n=fi(t,e),r=n[n.length-1];return{type:s,property:t.name,animatable:e,tweens:n,duration:r.end,delay:n[0].delay,endDelay:r.endDelay}}}function yi(e,t){return Oe(Ne(e.map(function(s){return t.map(function(n){return hi(s,n)})})),function(s){return!D.und(s)})}function zt(e,t){var s=e.length,n=function(i){return i.timelineOffset?i.timelineOffset:0},r={};return r.duration=s?Math.max.apply(Math,e.map(function(i){return n(i)+i.duration})):t.duration,r.delay=s?Math.min.apply(Math,e.map(function(i){return n(i)+i.delay})):t.delay,r.endDelay=s?r.duration-Math.max.apply(Math,e.map(function(i){return n(i)+i.duration-i.endDelay})):t.endDelay,r}var kt=0;function bi(e){var t=We(Bt,e),s=We(at,e),n=mi(s,e),r=Ot(e.targets),i=yi(r,n),l=zt(i,s),p=kt;return kt++,He(t,{id:p,children:[],animatables:r,animations:i,duration:l.duration,delay:l.delay,endDelay:l.endDelay})}var ue=[],Vt=function(){var e;function t(){!e&&(!St()||!Y.suspendWhenDocumentHidden)&&ue.length>0&&(e=requestAnimationFrame(s))}function s(r){for(var i=ue.length,l=0;l<i;){var p=ue[l];p.paused?(ue.splice(l,1),i--):(p.tick(r),l++)}e=l>0?requestAnimationFrame(s):void 0}function n(){Y.suspendWhenDocumentHidden&&(St()?e=cancelAnimationFrame(e):(ue.forEach(function(r){return r._onDocumentVisibility()}),Vt()))}return typeof document<"u"&&document.addEventListener("visibilitychange",n),t}();function St(){return!!document&&document.hidden}function Y(e){e===void 0&&(e={});var t=0,s=0,n=0,r,i=0,l=null;function p(f){var y=window.Promise&&new Promise(function(T){return l=T});return f.finished=y,y}var o=bi(e);p(o);function m(){var f=o.direction;f!=="alternate"&&(o.direction=f!=="normal"?"normal":"reverse"),o.reversed=!o.reversed,r.forEach(function(y){return y.reversed=o.reversed})}function v(f){return o.reversed?o.duration-f:f}function u(){t=0,s=v(o.currentTime)*(1/Y.speed)}function I(f,y){y&&y.seek(f-y.timelineOffset)}function O(f){if(o.reversePlayback)for(var T=i;T--;)I(f,r[T]);else for(var y=0;y<i;y++)I(f,r[y])}function S(f){for(var y=0,T=o.animations,j=T.length;y<j;){var N=T[y],Q=N.animatable,te=N.tweens,M=te.length-1,c=te[M];M&&(c=Oe(te,function(ne){return f<ne.end})[0]||c);for(var d=pe(f-c.start-c.delay,0,c.duration)/c.duration,B=isNaN(d)?1:c.easing(d),R=c.to.strings,A=c.round,$=[],k=c.to.numbers.length,b=void 0,F=0;F<k;F++){var L=void 0,P=c.to.numbers[F],z=c.from.numbers[F]||0;c.isPath?L=ui(c.value,B*P,c.isPathTargetInsideSVG):L=z+B*(P-z),A&&(c.isColor&&F>2||(L=Math.round(L*A)/A)),$.push(L)}var G=R.length;if(!G)b=$[0];else{b=R[0];for(var q=0;q<G;q++){R[q];var J=R[q+1],se=$[q];isNaN(se)||(J?b+=se+J:b+=se+" ")}}Nt[N.type](Q.target,N.property,b,Q.transforms),N.currentValue=b,y++}}function w(f){o[f]&&!o.passThrough&&o[f](o)}function h(){o.remaining&&o.remaining!==!0&&o.remaining--}function g(f){var y=o.duration,T=o.delay,j=y-o.endDelay,N=v(f);o.progress=pe(N/y*100,0,100),o.reversePlayback=N<o.currentTime,r&&O(N),!o.began&&o.currentTime>0&&(o.began=!0,w("begin")),!o.loopBegan&&o.currentTime>0&&(o.loopBegan=!0,w("loopBegin")),N<=T&&o.currentTime!==0&&S(0),(N>=j&&o.currentTime!==y||!y)&&S(y),N>T&&N<j?(o.changeBegan||(o.changeBegan=!0,o.changeCompleted=!1,w("changeBegin")),w("change"),S(N)):o.changeBegan&&(o.changeCompleted=!0,o.changeBegan=!1,w("changeComplete")),o.currentTime=pe(N,0,y),o.began&&w("update"),f>=y&&(s=0,h(),o.remaining?(t=n,w("loopComplete"),o.loopBegan=!1,o.direction==="alternate"&&m()):(o.paused=!0,o.completed||(o.completed=!0,w("loopComplete"),w("complete"),!o.passThrough&&"Promise"in window&&(l(),p(o)))))}return o.reset=function(){var f=o.direction;o.passThrough=!1,o.currentTime=0,o.progress=0,o.paused=!0,o.began=!1,o.loopBegan=!1,o.changeBegan=!1,o.completed=!1,o.changeCompleted=!1,o.reversePlayback=!1,o.reversed=f==="reverse",o.remaining=o.loop,r=o.children,i=r.length;for(var y=i;y--;)o.children[y].reset();(o.reversed&&o.loop!==!0||f==="alternate"&&o.loop===1)&&o.remaining++,S(o.reversed?o.duration:0)},o._onDocumentVisibility=u,o.set=function(f,y){return Ht(f,y),o},o.tick=function(f){n=f,t||(t=n),g((n+(s-t))*Y.speed)},o.seek=function(f){g(v(f))},o.pause=function(){o.paused=!0,u()},o.play=function(){o.paused&&(o.completed&&o.reset(),o.paused=!1,ue.push(o),u(),Vt())},o.reverse=function(){m(),o.completed=!o.reversed,u()},o.restart=function(){o.reset(),o.play()},o.remove=function(f){var y=ut(f);Ut(y,o)},o.reset(),o.autoplay&&o.play(),o}function Ct(e,t){for(var s=t.length;s--;)nt(e,t[s].animatable.target)&&t.splice(s,1)}function Ut(e,t){var s=t.animations,n=t.children;Ct(e,s);for(var r=n.length;r--;){var i=n[r],l=i.animations;Ct(e,l),!l.length&&!i.children.length&&n.splice(r,1)}!s.length&&!n.length&&t.pause()}function wi(e){for(var t=ut(e),s=ue.length;s--;){var n=ue[s];Ut(t,n)}}function ki(e,t){t===void 0&&(t={});var s=t.direction||"normal",n=t.easing?st(t.easing):null,r=t.grid,i=t.axis,l=t.from||0,p=l==="first",o=l==="center",m=l==="last",v=D.arr(e),u=parseFloat(v?e[0]:e),I=v?parseFloat(e[1]):0,O=ye(v?e[1]:e)||0,S=t.start||0+(v?u:0),w=[],h=0;return function(g,f,y){if(p&&(l=0),o&&(l=(y-1)/2),m&&(l=y-1),!w.length){for(var T=0;T<y;T++){if(!r)w.push(Math.abs(l-T));else{var j=o?(r[0]-1)/2:l%r[0],N=o?(r[1]-1)/2:Math.floor(l/r[0]),Q=T%r[0],te=Math.floor(T/r[0]),M=j-Q,c=N-te,d=Math.sqrt(M*M+c*c);i==="x"&&(d=-M),i==="y"&&(d=-c),w.push(d)}h=Math.max.apply(Math,w)}n&&(w=w.map(function(R){return n(R/h)*h})),s==="reverse"&&(w=w.map(function(R){return i?R<0?R*-1:-R:Math.abs(h-R)}))}var B=v?(I-u)/h:u;return S+B*(Math.round(w[f]*100)/100)+O}}function Si(e){e===void 0&&(e={});var t=Y(e);return t.duration=0,t.add=function(s,n){var r=ue.indexOf(t),i=t.children;r>-1&&ue.splice(r,1);function l(I){I.passThrough=!0}for(var p=0;p<i.length;p++)l(i[p]);var o=He(s,We(at,e));o.targets=o.targets||e.targets;var m=t.duration;o.autoplay=!1,o.direction=t.direction,o.timelineOffset=D.und(n)?m:ct(n,m),l(t),t.seek(o.timelineOffset);var v=Y(o);l(v),i.push(v);var u=zt(i,e);return t.delay=u.delay,t.endDelay=u.endDelay,t.duration=u.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}Y.version="3.2.1";Y.speed=1;Y.suspendWhenDocumentHidden=!0;Y.running=ue;Y.remove=wi;Y.get=lt;Y.set=Ht;Y.convertPx=ot;Y.path=di;Y.setDashoffset=li;Y.stagger=ki;Y.timeline=Si;Y.easing=st;Y.penner=Dt;Y.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};window.anime=Y;console.log("[Options] anime loaded:",typeof window.anime);Yt(Ko).mount("#app");
