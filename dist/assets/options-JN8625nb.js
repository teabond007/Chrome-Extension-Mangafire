import{c as je}from"./pinia-B2MPvubg.js";import{h as De,r as y,o as be,a as Be,i as ae,c as u,f as p,b as e,j as M,w as N,n as R,e as x,d as r,k as Q,u as n,v,l as P,t as b,m as ee,p as te,F as ce,q as ve,s as Se,x as Ce,g as Ge}from"./runtime-dom.esm-bundler-Drjs8M-n.js";import{F as ge,S as Ee,B as Me,T as me,C as Re}from"./config-sTLp4FTN.js";import{S as C}from"./storage-schema-ZmkWod5v.js";import{u as We}from"./useLibrary-9nf_fl4j.js";function Je(){const le=y(!1),k=y(!0),o=y("cloudy-dark"),V=y({...Ee}),$=y({...Me}),i=y({...ge}),D=y("medium"),F=y([]),g=y({}),A=ae(()=>me[o.value]||me["cloudy-dark"]),K=ae(()=>Re[D.value]||Re.medium),oe=ae(()=>Object.entries(me).map(([l,m])=>({id:l,name:m.name}))),c=y({general:{markHomePage:!1,syncAndMarkRead:!1,familyFriendly:!1},automation:{smartAutoComplete:!1,smartInactivityFade:!1,smartResumeLink:!1,notificationsEnabled:!1},reader:{enhancements:!0,autoScrollEnabled:!1,keybindsEnabled:!1,progressTrackingEnabled:!1,widthFix:!1,nextChapter:!0},highlights:{mangadex:!0,webtoons:!0},platforms:{mangadex:{highlight:!0,showProgress:!0},webtoons:{highlight:!0,showProgress:!0}},appearance:{theme:"cloudy-dark",accentColor:"",libraryData:{progressBars:!0}},dates:{}});async function O(){k.value=!0;try{const l=await chrome.storage.local.get([C.THEME,C.STATUS_COLORS,C.BORDER_STYLE,C.BORDER_SIZE,C.CUSTOM_MARKERS,"features","cardSize","platformSettings"]);l[C.THEME]&&(o.value=l[C.THEME]),l.features&&(i.value={...ge,...l.features}),l.platformSettings&&(g.value=l.platformSettings||{}),c.value.general.markHomePage=i.value.markHomePage,c.value.general.syncAndMarkRead=i.value.syncAndMarkRead,c.value.general.familyFriendly=i.value.familyFriendly,c.value.automation.smartAutoComplete=i.value.smartAutoComplete,c.value.automation.smartInactivityFade=i.value.smartInactivityDim,c.value.automation.smartResumeLink=i.value.smartResume,c.value.automation.notificationsEnabled=i.value.notifications,c.value.reader.enhancements=i.value.readerEnhancements,c.value.reader.widthFix=i.value.readerWidthFix,c.value.reader.nextChapter=i.value.readerNextChapter,c.value.reader.autoScrollEnabled=i.value.autoScroll,c.value.reader.keybindsEnabled=i.value.keyboardShortcuts,c.value.reader.progressTrackingEnabled=i.value.progressBadges,c.value.highlights.mangadex=i.value.mangadexHighlight,c.value.highlights.webtoons=i.value.webtoonsHighlight,g.value.mangadex||(g.value.mangadex={highlight:i.value.mangadexHighlight,showProgress:!0}),g.value.webtoons||(g.value.webtoons={highlight:i.value.webtoonsHighlight,showProgress:!0}),c.value.platforms=JSON.parse(JSON.stringify(g.value)),c.value.platforms.mangadex.highlight=g.value.mangadex.highlight??!0,c.value.platforms.mangadex.showProgress=g.value.mangadex.showProgress??!0,c.value.platforms.webtoons.highlight=g.value.webtoons.highlight??!0,c.value.platforms.webtoons.showProgress=g.value.webtoons.showProgress??!0,c.value.appearance.theme=o.value,c.value.appearance.libraryData.progressBars=i.value.progressBadges,le.value=!0,console.log("[useSettings] ‚úì Settings loaded")}catch(l){console.error("[useSettings] Failed to load settings:",l)}finally{k.value=!1}}async function I(l){i.value.markHomePage=l.general.markHomePage,i.value.syncAndMarkRead=l.general.syncAndMarkRead,i.value.familyFriendly=l.general.familyFriendly,i.value.smartAutoComplete=l.automation.smartAutoComplete,i.value.smartInactivityDim=l.automation.smartInactivityFade,i.value.smartResume=l.automation.smartResumeLink,i.value.notifications=l.automation.notificationsEnabled,i.value.readerEnhancements=l.reader.enhancements,i.value.readerWidthFix=l.reader.widthFix,i.value.readerNextChapter=l.reader.nextChapter,i.value.autoScroll=l.reader.autoScrollEnabled,i.value.keyboardShortcuts=l.reader.keybindsEnabled,i.value.mangadexHighlight=l.highlights.mangadex,i.value.webtoonsHighlight=l.highlights.webtoons,i.value.progressBadges=l.appearance.libraryData.progressBars,g.value.mangadex=l.platforms.mangadex,g.value.webtoons=l.platforms.webtoons,i.value.mangadexHighlight=l.platforms.mangadex.highlight,i.value.webtoonsHighlight=l.platforms.webtoons.highlight,o.value=l.appearance.theme,await L()}async function L(){try{await chrome.storage.local.set({[C.THEME]:o.value,[C.STATUS_COLORS]:V.value,[C.BORDER_STYLE]:$.value.style,[C.BORDER_SIZE]:$.value.size,[C.CUSTOM_MARKERS]:F.value,features:i.value,cardSize:D.value,platformSettings:g.value}),console.log("[useSettings] ‚úì Settings saved")}catch(l){console.error("[useSettings] Failed to save settings:",l)}}async function ne(l,m){const E=l.split(".");E.length===1?l==="theme"?o.value=m:l==="cardSize"&&(D.value=m):E[0]==="border"?$.value[E[1]]=m:E[0]==="features"?i.value[E[1]]=m:E[0]==="statusColors"?V.value[E[1]]=m:E[0]==="platforms"&&E.length===3&&(g.value[E[1]]||(g.value[E[1]]={}),g.value[E[1]][E[2]]=m),await L()}function se(l){return V.value[l]||"transparent"}function ie(l){return i.value[l]??!1}async function re(l){i.value[l]=!i.value[l],await L()}async function de(l,m){F.value.push({name:l,color:m}),await L()}async function T(l){F.value=F.value.filter(m=>m.name!==l),await L()}function H(){const l=A.value,m=document.documentElement;m.style.setProperty("--color-bg-body",l.bgBody),m.style.setProperty("--color-bg-sidebar",l.bgSidebar),m.style.setProperty("--color-bg-surface",l.bgSurface),m.style.setProperty("--color-bg-elevated",l.bgElevated),m.style.setProperty("--color-primary",l.accentPrimary),m.style.setProperty("--color-accent",l.accentSecondary),m.style.setProperty("--color-text-primary",l.textPrimary),m.style.setProperty("--color-text-secondary",l.textSecondary),m.style.setProperty("--color-text-muted",l.textMuted),m.style.setProperty("--color-border",l.border)}async function Y(){o.value="cloudy-dark",V.value={...Ee},$.value={...Me},i.value={...ge},D.value="medium",F.value=[],await L(),H()}function j(l,m){m==="local"&&(l[C.THEME]&&(o.value=l[C.THEME].newValue,H()),l[C.STATUS_COLORS]&&(V.value=l[C.STATUS_COLORS].newValue),l.features&&(i.value=l.features.newValue))}return De(o,()=>{H()}),be(async()=>{await O(),H(),chrome.storage.onChanged.addListener(j)}),Be(()=>{chrome.storage.onChanged.removeListener(j)}),{settings:c,isLoaded:le,isLoading:k,theme:o,statusColors:V,border:$,features:i,cardSize:D,customMarkers:F,platforms:g,themeConfig:A,cardDimensions:K,availableThemes:oe,loadSettings:O,saveSettings:L,updateSettings:I,updateSetting:ne,getStatusColor:se,isFeatureEnabled:ie,toggleFeature:re,addCustomMarker:de,removeCustomMarker:T,applyTheme:H,resetToDefaults:Y}}const Ke={class:"app-container"},Ye={class:"sidebar"},Xe={class:"nav-menu"},qe={class:"main-content"},Ze={class:"tab-pane active fade-in"},Qe={class:"content-grid"},es={class:"card"},ss={class:"card-body"},ts={class:"input-group-row"},as={class:"feature-toggle-wrapper"},ls={class:"switch"},os={class:"feature-toggle-wrapper"},ns={class:"switch"},is={class:"feature-toggle-wrapper"},rs={class:"switch"},ds={class:"card"},us={class:"card-body"},ps={class:"feature-toggle-wrapper"},cs={class:"switch"},vs={class:"sync-actions"},gs={class:"sync-buttons-row"},ms=["disabled"],bs={key:0},ys={key:1},hs=["disabled"],fs={key:0,class:"sync-status"},ks={class:"card"},ws={class:"card-body"},xs={class:"feature-toggle-wrapper"},Ss={class:"switch"},Cs={key:0,class:"marker-creator"},Es={class:"marker-input-row"},Ms={class:"active-markers"},Rs={key:0,class:"markers-container"},Ds=["onClick","title"],Bs={key:1,class:"description",style:{margin:"0"}},As={class:"card"},Ts={class:"card-body"},Ls={class:"feature-toggle-wrapper"},Hs={class:"switch"},Ps={class:"feature-toggle-wrapper",style:{"margin-top":"10px"}},Fs={class:"switch"},Os={class:"feature-toggle-wrapper",style:{"margin-top":"10px"}},Us={class:"switch"},Vs={class:"feature-toggle-wrapper",style:{"margin-top":"10px"}},Is={class:"switch"},_s={class:"card"},Ns={class:"card-body"},$s={class:"feature-toggle-wrapper"},zs={class:"switch"},js={class:"feature-toggle-wrapper",style:{"margin-top":"10px"}},Gs={class:"switch"},Ws={class:"feature-toggle-wrapper",style:{"margin-top":"10px"}},Js={class:"switch"},Ks={class:"card"},Ys={class:"card-body"},Xs={class:"feature-toggle-wrapper"},qs={class:"switch"},Zs={class:"feature-toggle-wrapper",style:{"margin-top":"10px"}},Qs={class:"switch"},et={class:"card"},st={class:"card-body"},tt={class:"feature-toggle-wrapper"},at={class:"switch"},lt={class:"feature-toggle-wrapper",style:{"margin-top":"10px"}},ot={class:"switch"},nt={class:"tab-pane active fade-in"},it={class:"content-grid",style:{"max-width":"100%"}},rt={id:"library-stats-container",class:"stats-dashboard-card glass-card"},dt={class:"stats-grid-compact",id:"stats-dashboard-grid"},ut={class:"stat-info"},pt={class:"stat-value"},ct={class:"stat-info"},vt={class:"stat-value"},gt={class:"stat-info"},mt={class:"stat-value"},bt={class:"stat-info"},yt={class:"stat-value"},ht={class:"stat-info"},ft={class:"stat-value"},kt={class:"stat-info"},wt={class:"stat-value"},xt={class:"library-header"},St={class:"library-title-section"},Ct={class:"library-title-text"},Et={style:{display:"flex","align-items":"center",gap:"8px"}},Mt={class:"info-redirect-btn","data-target":"guide-entries",title:"How to use Saved Entries"},Rt={class:"icon-svg icon-info",style:{width:"16px",height:"16px"}},Dt={class:"library-controls"},Bt={class:"manga-grid",id:"manga-grid"},At=["data-id","onClick"],Tt={class:"manga-card-cover-container"},Lt=["src"],Ht={class:"manga-card-overlay"},Pt=["onClick"],Ft={class:"icon-svg icon-info",style:{filter:"invert(1)",width:"20px",height:"20px"}},Ot=["onClick"],Ut={class:"icon-svg icon-trash",style:{filter:"invert(1)",width:"20px",height:"20px"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Vt={key:0,class:"manga-card-progress-bar"},It={class:"manga-card-info"},_t={class:"manga-card-header"},Nt={key:0,class:"format-badge"},$t=["title"],zt={class:"manga-card-meta"},jt={class:"chapter-info"},Gt={key:0,class:"total-chapters"},Wt={key:0,class:"empty-state",style:{"grid-column":"1/-1","text-align":"center",padding:"40px"}},Jt={class:"tab-pane active fade-in"},Kt={class:"content-grid export-import-grid"},Yt={class:"card secondary-bg-card"},Xt={class:"card-header"},qt={class:"card-icon blue-icon"},Zt={class:"icon-svg icon-export",style:{width:"20px",height:"20px"}},Qt={class:"export-options"},ea={class:"export-checkboxes"},sa={class:"export-option"},ta={class:"export-count",id:"exportLibraryCount"},aa={class:"export-option"},la={class:"export-option"},oa={class:"export-option"},na={class:"export-option"},ia={class:"inner-info-card"},ra={class:"icon-svg icon-export",style:{width:"16px",height:"16px"}},da={class:"card secondary-bg-card"},ua={class:"card-header"},pa={class:"card-icon purple-icon"},ca={class:"icon-svg icon-import",style:{width:"20px",height:"20px"}},va={class:"card-title-group"},ga={style:{display:"flex","align-items":"center",gap:"8px"}},ma={class:"info-redirect-btn","data-target":"guide-backup",title:"About Backup & Restore"},ba={class:"icon-svg icon-info",style:{width:"16px",height:"16px"}},ya={class:"drop-zone-content"},ha={class:"drop-zone-icon"},fa={class:"icon-svg icon-file",style:{width:"24px",height:"24px"}},ka={key:0,class:"drop-zone-text"},wa={key:1,class:"drop-zone-text"},xa={class:"import-actions-row"},Sa={class:"feature-toggle-wrapper"},Ca={class:"switch"},Ea=["disabled"],Ma={class:"icon-svg icon-plus",style:{width:"16px",height:"16px"}},Ra={class:"tab-pane active fade-in"},Da={class:"content-grid"},Ba={class:"card"},Aa={class:"card-header"},Ta={class:"info-redirect-btn","data-target":"guide-personalization",title:"About Themes"},La={class:"icon-svg icon-info",style:{width:"16px",height:"16px"}},Ha={class:"card-body"},Pa={class:"theme-grid"},Fa={style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"20px","margin-top":"20px"}},Oa={class:"card full-height"},Ua={class:"card-body"},Va={class:"feature-toggle-wrapper"},Ia={class:"range-header"},_a={id:"rangeValue",style:{color:"var(--primary)","font-weight":"bold"}},Na={class:"card full-height"},$a={class:"card-body"},za={class:"feature-toggle-wrapper"},ja={class:"switch"},Ga={class:"feature-toggle-wrapper"},Wa={class:"switch"},Ja={class:"range-header"},Ka={id:"libraryBorderValue",style:{color:"var(--primary)","font-weight":"bold"}},Ya={class:"feature-toggle-wrapper"},Xa={class:"switch"},qa={class:"feature-toggle-wrapper"},Za={class:"switch"},Qa={class:"feature-toggle-wrapper"},el={class:"switch"},sl={class:"feature-toggle-wrapper"},tl={class:"switch"},al={class:"tab-pane active fade-in"},ll={class:"icon-svg icon-arrow-up",style:{width:"20px",height:"20px"}},ol={key:0,class:"modal-container"},nl={class:"modal-layout"},il={class:"modal-sidebar"},rl=["src"],dl={class:"modal-sidebar-info"},ul={class:"modal-meta-row"},pl={class:"modal-meta-row"},cl={class:"format-badge"},vl={class:"modal-meta-row"},gl={class:"modal-meta-value"},ml={class:"modal-meta-row"},bl={class:"modal-score"},yl={class:"score-value"},hl={class:"modal-meta-row"},fl={class:"modal-meta-value"},kl={class:"modal-main"},wl={key:0,class:"modal-synonyms"},xl={class:"modal-genres"},Sl={class:"modal-description"},Cl=["innerHTML"],El={class:"modal-external-links"},Ml=["href"],Rl=["href"],Dl={__name:"App",setup(le){const k=y("settings"),{settings:o,updateSettings:V,loadSettings:$}=Je(),{filteredEntries:i,stats:D,searchQuery:F,statusFilter:g,sortBy:A,sortDesc:K,removeEntry:oe}=We(),c=y({autoSync:!1,customBookmarks:!1,customBorderSize:!1,markHomePage:!1}),O=y(!1),I=y(null),L={autoSync:"AutoSyncfeatureEnabled",customBookmarks:"CustomBookmarksfeatureEnabled",customBorderSize:"CustomBorderSizefeatureEnabled",markHomePage:"MarkHomePagefeatureEnabled"};async function ne(){const a=[...Object.values(L),"SyncLastDate","customBookmarks"],s=await chrome.storage.local.get(a);Object.entries(L).forEach(([w,t])=>{c.value[w]=s[t]??!1}),I.value=s.SyncLastDate||null,T.value=s.customBookmarks||[]}function se(a){const s=L[a];s&&chrome.storage.local.set({[s]:c.value[a]})}function ie(){O.value=!0,chrome.runtime.sendMessage({type:"scrapeBookmarks",value:1}),setTimeout(()=>{O.value=!1,I.value=Date.now(),chrome.storage.local.set({SyncLastDate:I.value})},3e3)}function re(){confirm("This will clear your library and rebuild from MangaFire bookmarks. Continue?")&&(O.value=!0,chrome.runtime.sendMessage({type:"freshSync",value:!0}),setTimeout(()=>{O.value=!1,I.value=Date.now()},5e3))}function de(a){if(!a)return"Never";const s=new Date(a);return s.toLocaleDateString()+" "+s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}const T=y([]),H=y(""),Y=y("#a855f7"),j=y("solid");async function l(){if(!H.value.trim()){alert("Please enter a marker name.");return}const a={name:H.value.trim(),color:Y.value,style:j.value};T.value.push(a),await chrome.storage.local.set({customBookmarks:T.value}),H.value="",console.log("[Options] Added custom marker:",a.name)}async function m(a){if(confirm(`Remove marker "${T.value[a].name}"?`)){const s=T.value.splice(a,1);await chrome.storage.local.set({customBookmarks:T.value}),console.log("[Options] Removed marker:",s[0].name)}}async function E(){confirm("Remove all custom markers?")&&(T.value=[],await chrome.storage.local.remove("customBookmarks"),console.log("[Options] All markers removed"))}const z=y("dark");function X(a){z.value=a,ye(a),localStorage.setItem("theme",a),chrome.storage.local.set({theme:a,isCustomTheme:!1}),console.log("[Options] Theme switched to:",a)}function ye(a){const s=document.documentElement;s.classList.remove("dark-mode","black-mode","neon-mode","light-mode","glassy-mode"),a==="light"?s.classList.add("light-mode"):a==="glassy"?s.classList.add("glassy-mode"):s.classList.add(`${a}-mode`)}async function Te(){const a=await chrome.storage.local.get(["theme","isCustomTheme"]);!a.isCustomTheme&&a.theme&&(z.value=a.theme,ye(a.theme))}be(async()=>{await $(),await ne(),await Te(),console.log("Settings loaded:",o.value),he(),window.addEventListener("scroll",pe)}),De(o,async a=>{await V(a),he()},{deep:!0});function he(){const a=o.value.appearance.theme||"dark";document.documentElement.setAttribute("data-theme",a),o.value.appearance.accentColor&&document.documentElement.style.setProperty("--primary",o.value.appearance.accentColor)}const fe=ae({get:()=>A.value==="title"?K.value?"title-desc":"title-asc":A.value==="popularity"?K.value?"pop-desc":"pop-asc":A.value==="averageScore"?"score-desc":"lastReadDate-desc",set:a=>{const[s,w]=a.split("-");s==="title"?A.value="title":s==="pop"?A.value="popularity":s==="score"?A.value="averageScore":s==="rating"?A.value="personalData.rating":s==="added"?A.value="createdAt":s==="last"&&(A.value="lastReadDate"),K.value=w==="desc"}});function ke(a){return a.coverImage||a.cover||"assets/images/placeholder.jpg"}function Le(a){a&&window.open(a,"_blank")}const h=y(null),ue=y(!1);function He(a){h.value=a,ue.value=!0}function we(){ue.value=!1,h.value=null}const G={library:{keys:["savedEntriesMerged","userBookmarks"],label:"Library Entries"},history:{keys:["savedReadChapters"],label:"Reading History"},settings:{keys:["CustomBorderSize","MarkHomePagefeatureEnabled","SyncandMarkReadfeatureEnabled","CustomBookmarksfeatureEnabled","AutoSyncfeatureEnabled","CustomBorderSizefeatureEnabled","FamilyFriendlyfeatureEnabled","SmartAutoCompletefeatureEnabled","MangaDexHighlightEnabled","WebtoonsHighlightfeatureEnabled","theme","customBookmarks","NewTabDashboardfeatureEnabled"],label:"Settings"},personalData:{keys:["libraryPersonalData","libraryUserTags"],label:"Tags, Notes & Ratings"},cache:{keys:["anilistCache","mangadexCache"],label:"API Cache"}},f=y({library:!0,history:!0,settings:!0,personal:!0,cache:!1}),q=y(!0),W=y(null);async function Pe(){const a=["LastBackupDate"];if(f.value.library&&a.push(...G.library.keys),f.value.history&&a.push(...G.history.keys),f.value.settings&&a.push(...G.settings.keys),f.value.personal&&a.push(...G.personalData.keys),f.value.cache&&a.push(...G.cache.keys),a.length===1){alert("Please select at least one data category to export.");return}const s=await chrome.storage.local.get(a);s._exportMeta={version:"4.0.0",exportDate:new Date().toISOString(),categories:{library:f.value.library,history:f.value.history,settings:f.value.settings,personalData:f.value.personal,cache:f.value.cache}};const w=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),t=URL.createObjectURL(w),d=document.createElement("a");d.href=t,d.download=`mangafire_backup_${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(t),await chrome.storage.local.set({LastBackupDate:Date.now()}),console.log("[Options] Data exported successfully")}function Fe(a){const s=a.target.files[0];s&&(W.value=s)}function Oe(){const a=document.getElementById("importDataInput");a&&a.click()}function Ue(a){const s=document.createElement("textarea");return s.innerHTML=a,s.value}function Ve(a){const t=new DOMParser().parseFromString(a,"text/xml").querySelectorAll("manga");if(t.length===0)throw new Error("No manga entries found in XML.");return{userBookmarks:Array.from(t).map(B=>{const Z=B.querySelector("manga_title"),S=B.querySelector("my_status"),J=B.querySelector("my_read_chapters");let _=Z?Ue(Z.textContent.trim()):"Unknown Title",U=S?S.textContent.trim():"Reading",ze=J&&parseInt(J.textContent.trim())||0;return U==="On-Hold"&&(U="On Hold"),U==="Plan to Read"&&(U="Plan to Read"),U==="Completed"&&(U="Completed"),{title:_,status:U,readChapters:ze}})}}async function Ie(){if(!W.value)return;const a=W.value,s=a.type==="application/json"||a.name.endsWith(".json"),w=a.type==="text/xml"||a.type==="application/xml"||a.name.endsWith(".xml");if(!s&&!w){alert("Please select a valid JSON or XML file.");return}const t=new FileReader;t.onload=async d=>{var B,Z;try{let S;if(s?S=JSON.parse(d.target.result):w&&(S=Ve(d.target.result)),!S)throw new Error("Failed to parse data");const J={libraryEntries:(((B=S.savedEntriesMerged)==null?void 0:B.length)||0)+(((Z=S.userBookmarks)==null?void 0:Z.length)||0),historyTitles:S.savedReadChapters?Object.keys(S.savedReadChapters).length:0,hasSettings:Object.keys(S).some(U=>G.settings.keys.includes(U))};let _=`üìÅ Import Preview

`;_+=`üìö Library: ${J.libraryEntries} entries
`,_+=`üìñ History: ${J.historyTitles} titles
`,_+=`‚öôÔ∏è Settings: ${J.hasSettings?"Included":"Not included"}

`,_+=`Mode: ${q.value?"MERGE (keeps existing data)":"OVERWRITE (replaces all data)"}`,q.value||(_+=`

‚ö†Ô∏è WARNING: This will delete all your current data!`),confirm(_+`

Proceed with import?`)&&(delete S._exportMeta,q.value?await Ne(S):await _e(S),alert("‚úÖ Import successful! The page will now reload."),location.reload())}catch(S){console.error("Import failed:",S),alert("Failed to import data: "+S.message)}},t.readAsText(a)}async function _e(a){await chrome.storage.local.clear(),await chrome.storage.local.set(a),console.log("[Options] Data imported (Overwrite) successfully")}async function Ne(a){const s=await chrome.storage.local.get(null),w={...s,...a};if(a.userBookmarks&&s.userBookmarks){const t=new Map;s.userBookmarks.forEach(d=>t.set(d.title.toLowerCase(),d)),a.userBookmarks.forEach(d=>t.set(d.title.toLowerCase(),d)),w.userBookmarks=Array.from(t.values())}if(a.savedEntriesMerged&&s.savedEntriesMerged){const t=new Map;s.savedEntriesMerged.forEach(d=>t.set(d.title.toLowerCase(),d)),a.savedEntriesMerged.forEach(d=>t.set(d.title.toLowerCase(),d)),w.savedEntriesMerged=Array.from(t.values())}if(a.customBookmarks&&s.customBookmarks){const t=new Map;s.customBookmarks.forEach(d=>t.set(d.name.toLowerCase(),d)),a.customBookmarks.forEach(d=>t.set(d.name.toLowerCase(),d)),w.customBookmarks=Array.from(t.values())}if(a.savedReadChapters&&s.savedReadChapters){const t={...s.savedReadChapters};Object.entries(a.savedReadChapters).forEach(([d,B])=>{t[d]?t[d]=[...new Set([...t[d],...B])]:t[d]=B}),w.savedReadChapters=t}await chrome.storage.local.set(w),console.log("[Options] Data imported (Merge) successfully")}const xe=y(!1);function pe(){xe.value=window.scrollY>300}function $e(){window.scrollTo({top:0,behavior:"smooth"})}return be(()=>{window.addEventListener("scroll",pe)}),Be(()=>{window.removeEventListener("scroll",pe)}),(a,s)=>{var w;return p(),u("div",Ke,[e("aside",Ye,[s[61]||(s[61]=e("div",{class:"brand"},[e("div",{class:"brand-icon"},[e("span",{class:"icon-svg icon-brand"})]),e("span",{class:"brand-name header-text-gradient"},"Color Marker")],-1)),e("nav",Xe,[e("a",{href:"#",class:R(["nav-item",{active:k.value==="settings"}]),onClick:s[0]||(s[0]=N(t=>k.value="settings",["prevent"]))},[...s[55]||(s[55]=[e("span",{class:"nav-icon"},"‚öôÔ∏è",-1),x(" General Settings ",-1)])],2),e("a",{href:"#",class:R(["nav-item",{active:k.value==="saved-entries"}]),onClick:s[1]||(s[1]=N(t=>k.value="saved-entries",["prevent"]))},[...s[56]||(s[56]=[e("span",{class:"nav-icon"},"üìö",-1),x(" Saved Entries ",-1)])],2),e("a",{href:"#",class:R(["nav-item",{active:k.value==="import-export"}]),onClick:s[2]||(s[2]=N(t=>k.value="import-export",["prevent"]))},[...s[57]||(s[57]=[e("span",{class:"nav-icon"},"üìÇ",-1),x(" Import & Export ",-1)])],2),e("a",{href:"#",class:R(["nav-item",{active:k.value==="appearance"}]),onClick:s[3]||(s[3]=N(t=>k.value="appearance",["prevent"]))},[...s[58]||(s[58]=[e("span",{class:"nav-icon"},"üé®",-1),x(" Appearance ",-1)])],2),e("a",{href:"#",class:R(["nav-item",{active:k.value==="about"}]),onClick:s[4]||(s[4]=N(t=>k.value="about",["prevent"]))},[...s[59]||(s[59]=[e("span",{class:"nav-icon"},"‚ÑπÔ∏è",-1),x(" About ",-1)])],2),s[60]||(s[60]=e("div",{class:"nav-indicator"},null,-1))]),s[62]||(s[62]=M('<div class="sidebar-footer"><a href="https://www.buymeacoffee.com" target="_blank" class="sidebar-btn support-sidebar-btn" title="Support Developer"><span class="icon">‚òï</span><span class="label">Support Dev</span></a><div class="version-info">Version 4.0.0 (Vue)</div></div>',1))]),e("main",qe,[r(e("div",Ze,[s[108]||(s[108]=e("header",{class:"header"},[e("div",{class:"header-text"},[e("h1",null,"Settings"),e("p",{class:"subtitle"},"Configure your custom bookmarks for MangaFire.to, manage sync, and display preferences.")])],-1)),e("div",Qe,[e("div",es,[s[69]||(s[69]=e("div",{class:"card-header"},[e("div",{class:"card-icon"},"‚öôÔ∏è"),e("h3",null,"General Preferences")],-1)),e("div",ss,[e("div",ts,[e("div",as,[s[64]||(s[64]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"Mark Homepage"),e("span",{class:"toggle-sub-label"},"Highlight manga on the homepage")],-1)),e("label",ls,[r(e("input",{type:"checkbox",id:"MarkHomePage","onUpdate:modelValue":s[5]||(s[5]=t=>n(o).general.markHomePage=t)},null,512),[[v,n(o).general.markHomePage]]),s[63]||(s[63]=e("span",{class:"slider round"},null,-1))])]),e("div",os,[s[66]||(s[66]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"Sync & Mark Read"),e("span",{class:"toggle-sub-label"},"Sync history and mark as read")],-1)),e("label",ns,[r(e("input",{type:"checkbox",id:"SyncandMarkRead","onUpdate:modelValue":s[6]||(s[6]=t=>n(o).general.syncAndMarkRead=t)},null,512),[[v,n(o).general.syncAndMarkRead]]),s[65]||(s[65]=e("span",{class:"slider round"},null,-1))])]),e("div",is,[s[68]||(s[68]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"Family Friendly"),e("span",{class:"toggle-sub-label"},"Hide Ecchi/Adult content")],-1)),e("label",rs,[r(e("input",{type:"checkbox",id:"FamilyFriendly","onUpdate:modelValue":s[7]||(s[7]=t=>n(o).general.familyFriendly=t)},null,512),[[v,n(o).general.familyFriendly]]),s[67]||(s[67]=e("span",{class:"slider round"},null,-1))])])])])]),e("div",ds,[s[74]||(s[74]=e("div",{class:"card-header"},[e("div",{class:"card-icon",style:{background:"rgba(34, 197, 94, 0.1)",color:"#22c55e"}},"üîÑ"),e("h3",null,"Sync & Bookmarks")],-1)),e("div",us,[e("div",ps,[s[71]||(s[71]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"Auto Sync"),e("span",{class:"toggle-sub-label"},"Automatically sync when reading chapters")],-1)),e("label",cs,[r(e("input",{type:"checkbox",id:"AutoSync","onUpdate:modelValue":s[8]||(s[8]=t=>c.value.autoSync=t),onChange:s[9]||(s[9]=t=>se("autoSync"))},null,544),[[v,c.value.autoSync]]),s[70]||(s[70]=e("span",{class:"slider round"},null,-1))])]),s[73]||(s[73]=e("div",{class:"divider"},null,-1)),e("div",vs,[s[72]||(s[72]=e("p",{class:"section-label"},"Manual Sync",-1)),e("div",gs,[e("button",{class:"btn btn-primary",disabled:O.value,onClick:ie},[O.value?(p(),u("span",ys,"‚è≥ Syncing...")):(p(),u("span",bs,"üîÑ Sync Bookmarks"))],8,ms),e("button",{class:"btn btn-ghost",disabled:O.value,onClick:re}," ‚ö° Fresh Sync ",8,hs)]),I.value?(p(),u("p",fs,"Last synced: "+b(de(I.value)),1)):P("",!0)])])]),e("div",ks,[s[81]||(s[81]=e("div",{class:"card-header"},[e("div",{class:"card-icon",style:{background:"rgba(168, 85, 247, 0.1)",color:"#a855f7"}},"üè∑Ô∏è"),e("h3",null,"Custom Markers")],-1)),e("div",ws,[e("div",xs,[s[76]||(s[76]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"Enable Custom Markers"),e("span",{class:"toggle-sub-label"},"Create personalized status categories")],-1)),e("label",Ss,[r(e("input",{type:"checkbox",id:"CustomBookmarks","onUpdate:modelValue":s[10]||(s[10]=t=>c.value.customBookmarks=t),onChange:s[11]||(s[11]=t=>se("customBookmarks"))},null,544),[[v,c.value.customBookmarks]]),s[75]||(s[75]=e("span",{class:"slider round"},null,-1))])]),s[80]||(s[80]=e("div",{class:"divider"},null,-1)),c.value.customBookmarks?(p(),u("div",Cs,[s[79]||(s[79]=e("p",{class:"section-label"},"Create New Marker",-1)),e("div",Es,[r(e("input",{type:"text","onUpdate:modelValue":s[12]||(s[12]=t=>H.value=t),placeholder:"Marker name...",class:"input-field",style:{flex:"1"}},null,512),[[ee,H.value]]),r(e("input",{type:"color","onUpdate:modelValue":s[13]||(s[13]=t=>Y.value=t),class:"color-picker-sm"},null,512),[[ee,Y.value]]),r(e("select",{"onUpdate:modelValue":s[14]||(s[14]=t=>j.value=t),class:"select-field",style:{width:"100px"}},[...s[77]||(s[77]=[e("option",{value:"solid"},"Solid",-1),e("option",{value:"dashed"},"Dashed",-1),e("option",{value:"dotted"},"Dotted",-1)])],512),[[te,j.value]]),e("button",{class:"btn btn-primary btn-sm",onClick:l},"+ Add")]),e("div",Ms,[s[78]||(s[78]=e("p",{class:"section-label",style:{"margin-top":"16px"}},"Active Markers",-1)),T.value.length>0?(p(),u("div",Rs,[(p(!0),u(ce,null,ve(T.value,(t,d)=>(p(),u("div",{key:d,class:"marker-pill",style:Ce({backgroundColor:t.color+"33",border:"2px "+t.style+" "+t.color+"CC"}),onClick:B=>m(d),title:"Click to remove: "+t.name},b(t.name),13,Ds))),128))])):(p(),u("p",Bs,"No active markers."))]),T.value.length>0?(p(),u("button",{key:0,class:"btn btn-ghost btn-sm",style:{"margin-top":"12px"},onClick:E}," üóëÔ∏è Reset All Markers ")):P("",!0)])):P("",!0)])]),e("div",As,[s[90]||(s[90]=e("div",{class:"card-header"},[e("div",{class:"card-icon",style:{background:"rgba(79, 70, 229, 0.1)",color:"var(--primary)"}},"‚ö°"),e("h3",null,"Smart Automation")],-1)),e("div",Ts,[e("div",Ls,[s[83]||(s[83]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"Smart Auto-Complete"),e("span",{class:"toggle-sub-label"},"Mark as 'Completed' when reaching last chapter")],-1)),e("label",Hs,[r(e("input",{type:"checkbox",id:"SmartAutoComplete","onUpdate:modelValue":s[15]||(s[15]=t=>n(o).automation.smartAutoComplete=t)},null,512),[[v,n(o).automation.smartAutoComplete]]),s[82]||(s[82]=e("span",{class:"slider round"},null,-1))])]),e("div",Ps,[s[85]||(s[85]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"Inactivity Dimming"),e("span",{class:"toggle-sub-label"},"Dim 'Reading' manga untouched for 30+ days")],-1)),e("label",Fs,[r(e("input",{type:"checkbox",id:"SmartInactivityFade","onUpdate:modelValue":s[16]||(s[16]=t=>n(o).automation.smartInactivityFade=t)},null,512),[[v,n(o).automation.smartInactivityFade]]),s[84]||(s[84]=e("span",{class:"slider round"},null,-1))])]),e("div",Os,[s[87]||(s[87]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"Smart Resume"),e("span",{class:"toggle-sub-label"},"Dashboard opens next chapter (Predictive)")],-1)),e("label",Us,[r(e("input",{type:"checkbox",id:"SmartResumeLink","onUpdate:modelValue":s[17]||(s[17]=t=>n(o).automation.smartResumeLink=t)},null,512),[[v,n(o).automation.smartResumeLink]]),s[86]||(s[86]=e("span",{class:"slider round"},null,-1))])]),e("div",Vs,[s[89]||(s[89]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"New Chapter Alerts"),e("span",{class:"toggle-sub-label"},"Browser notifications for new releases")],-1)),e("label",Is,[r(e("input",{type:"checkbox",id:"NotificationsEnabled","onUpdate:modelValue":s[18]||(s[18]=t=>n(o).automation.notificationsEnabled=t)},null,512),[[v,n(o).automation.notificationsEnabled]]),s[88]||(s[88]=e("span",{class:"slider round"},null,-1))])])])]),e("div",_s,[s[97]||(s[97]=e("div",{class:"card-header"},[e("div",{class:"card-icon",style:{background:"rgba(16, 185, 129, 0.1)",color:"#10b981"}},"üìö"),e("h3",null,"Reader Enhancements")],-1)),e("div",Ns,[e("div",$s,[s[92]||(s[92]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"Auto-Scroll Panel"),e("span",{class:"toggle-sub-label"},"Show floating auto-scroll controls on reader pages")],-1)),e("label",zs,[r(e("input",{type:"checkbox",id:"AutoScrollEnabled","onUpdate:modelValue":s[19]||(s[19]=t=>n(o).reader.autoScrollEnabled=t)},null,512),[[v,n(o).reader.autoScrollEnabled]]),s[91]||(s[91]=e("span",{class:"slider round"},null,-1))])]),e("div",js,[s[94]||(s[94]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"Keyboard Shortcuts"),e("span",{class:"toggle-sub-label"},"Arrow keys, Space (auto-scroll), F (fullscreen)")],-1)),e("label",Gs,[r(e("input",{type:"checkbox",id:"KeybindsEnabled","onUpdate:modelValue":s[20]||(s[20]=t=>n(o).reader.keybindsEnabled=t)},null,512),[[v,n(o).reader.keybindsEnabled]]),s[93]||(s[93]=e("span",{class:"slider round"},null,-1))])]),e("div",Ws,[s[96]||(s[96]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"Auto-Save Progress"),e("span",{class:"toggle-sub-label"},"Automatically save chapter progress while reading")],-1)),e("label",Js,[r(e("input",{type:"checkbox",id:"ProgressTrackingEnabled","onUpdate:modelValue":s[21]||(s[21]=t=>n(o).reader.progressTrackingEnabled=t)},null,512),[[v,n(o).reader.progressTrackingEnabled]]),s[95]||(s[95]=e("span",{class:"slider round"},null,-1))])])])]),e("div",Ks,[s[102]||(s[102]=e("div",{class:"card-header"},[e("div",{class:"card-icon",style:{background:"rgba(255, 103, 64, 0.1)",color:"#FF6740"}},"üìñ"),e("h3",null,"MangaDex Highlighting")],-1)),e("div",Ys,[e("div",Xs,[s[99]||(s[99]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"Enable MangaDex Highlighting"),e("span",{class:"toggle-sub-label"},"Show colored borders on mangadex.org")],-1)),e("label",qs,[r(e("input",{type:"checkbox",id:"MangaDexHighlightEnabled","onUpdate:modelValue":s[22]||(s[22]=t=>n(o).platforms.mangadex.highlight=t)},null,512),[[v,n(o).platforms.mangadex.highlight]]),s[98]||(s[98]=e("span",{class:"slider round"},null,-1))])]),e("div",Zs,[s[101]||(s[101]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"Show Reading Progress"),e("span",{class:"toggle-sub-label"},'Display "Ch. X/Y" on saved manga cards')],-1)),e("label",Qs,[r(e("input",{type:"checkbox",id:"MangaDexShowProgress","onUpdate:modelValue":s[23]||(s[23]=t=>n(o).platforms.mangadex.showProgress=t)},null,512),[[v,n(o).platforms.mangadex.showProgress]]),s[100]||(s[100]=e("span",{class:"slider round"},null,-1))])])])]),e("div",et,[s[107]||(s[107]=e("div",{class:"card-header"},[e("div",{class:"card-icon",style:{background:"rgba(0, 220, 100, 0.1)",color:"#00DC64"}},"üì∫"),e("h3",null,"Webtoons Highlighting")],-1)),e("div",st,[e("div",tt,[s[104]||(s[104]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"Enable Webtoons Highlighting"),e("span",{class:"toggle-sub-label"},"Show colored borders on webtoons.com")],-1)),e("label",at,[r(e("input",{type:"checkbox",id:"WebtoonsHighlightEnabled","onUpdate:modelValue":s[24]||(s[24]=t=>n(o).platforms.webtoons.highlight=t)},null,512),[[v,n(o).platforms.webtoons.highlight]]),s[103]||(s[103]=e("span",{class:"slider round"},null,-1))])]),e("div",lt,[s[106]||(s[106]=e("div",{class:"toggle-label-group"},[e("label",{class:"toggle-main-label"},"Show Reading Progress"),e("span",{class:"toggle-sub-label"},'Display "Ep. X/Y" on saved webtoon cards')],-1)),e("label",ot,[r(e("input",{type:"checkbox",id:"WebtoonsShowProgress","onUpdate:modelValue":s[25]||(s[25]=t=>n(o).platforms.webtoons.showProgress=t)},null,512),[[v,n(o).platforms.webtoons.showProgress]]),s[105]||(s[105]=e("span",{class:"slider round"},null,-1))])])])])])],512),[[Q,k.value==="settings"]]),r(e("div",nt,[s[136]||(s[136]=M('<header class="header"><div class="header-text"><h1>Saved Entries</h1><p class="subtitle">Browse and manage your manga library</p></div><div class="header-actions"><button id="BtnShowStats" class="btn btn-ghost btn-sm">üìä Stats</button><button id="BtnCleanLibrary" class="btn btn-ghost btn-sm" title="Remove Duplicates">üßπ Clean</button><button id="BtnTrashAndSyncEntries" class="btn btn-warning-large">‚ö°Fresh Sync Entries</button></div></header>',1)),e("div",it,[e("div",rt,[s[121]||(s[121]=e("div",{class:"stats-header"},[e("h3",null,"Library Statistics")],-1)),e("div",dt,[e("div",{class:"stat-card blue",onClick:s[26]||(s[26]=t=>g.value="ALL")},[s[110]||(s[110]=e("div",{class:"stat-icon"},"üìö",-1)),e("div",ut,[e("span",pt,b(n(D).total),1),s[109]||(s[109]=e("span",{class:"stat-label"},"Total Manga",-1))])]),e("div",{class:"stat-card green",onClick:s[27]||(s[27]=t=>g.value="Reading")},[s[112]||(s[112]=e("div",{class:"stat-icon"},"üìñ",-1)),e("div",ct,[e("span",vt,b(n(D).reading),1),s[111]||(s[111]=e("span",{class:"stat-label"},"Reading",-1))])]),e("div",{class:"stat-card purple",onClick:s[28]||(s[28]=t=>g.value="Completed")},[s[114]||(s[114]=e("div",{class:"stat-icon"},"‚úÖ",-1)),e("div",gt,[e("span",mt,b(n(D).completed),1),s[113]||(s[113]=e("span",{class:"stat-label"},"Completed",-1))])]),e("div",{class:"stat-card yellow",onClick:s[29]||(s[29]=t=>g.value="Plan to Read")},[s[116]||(s[116]=e("div",{class:"stat-icon"},"üîñ",-1)),e("div",bt,[e("span",yt,b(n(D).planToRead),1),s[115]||(s[115]=e("span",{class:"stat-label"},"Plan to Read",-1))])]),e("div",{class:"stat-card orange",onClick:s[30]||(s[30]=t=>g.value="On Hold")},[s[118]||(s[118]=e("div",{class:"stat-icon"},"‚è∏Ô∏è",-1)),e("div",ht,[e("span",ft,b(n(D).onHold),1),s[117]||(s[117]=e("span",{class:"stat-label"},"On Hold",-1))])]),e("div",{class:"stat-card red",onClick:s[31]||(s[31]=t=>g.value="Dropped")},[s[120]||(s[120]=e("div",{class:"stat-icon"},"üóëÔ∏è",-1)),e("div",kt,[e("span",wt,b(n(D).dropped),1),s[119]||(s[119]=e("span",{class:"stat-label"},"Dropped",-1))])])])]),s[134]||(s[134]=M('<div id="bulk-ops-bar" class="bulk-ops-bar glass-card" style="display:none;"><div class="bulk-info"><span id="bulk-count-label">0 items selected</span></div><div class="bulk-actions"><span>Update All Filtered to:</span><select id="bulkStatusSelect" class="select-field sm"><option value="Reading">Reading</option><option value="Completed">Completed</option><option value="On Hold">On Hold</option><option value="Plan to Read">Plan to Read</option><option value="Dropped">Dropped</option><option value="HasHistory">Has History</option></select><button id="btnApplyBulkUpdate" class="btn btn-primary btn-sm">Apply Update</button><button id="btnCloseBulkOps" class="btn btn-ghost btn-sm">√ó</button></div></div>',1)),e("div",xt,[e("div",St,[s[125]||(s[125]=e("div",{class:"library-icon"},"üìö",-1)),e("div",Ct,[e("div",Et,[s[122]||(s[122]=e("h2",null,"Your Library",-1)),s[123]||(s[123]=e("button",{id:"btnToggleBulk",class:"btn btn-ghost btn-sm",title:"Bulk Selection"},"Bulk",-1)),e("button",Mt,[(p(),u("svg",Rt))])]),s[124]||(s[124]=e("p",{class:"library-subtitle",id:"library-subtitle"},"Loading...",-1))])]),e("div",Dt,[r(e("select",{id:"savedSortFilter",class:"select-field",style:{width:"140px"},"onUpdate:modelValue":s[32]||(s[32]=t=>fe.value=t)},[...s[126]||(s[126]=[M('<option value="title-asc">A-Z</option><option value="title-desc">Z-A</option><option value="pop-desc">Most Popular</option><option value="pop-asc">Least Popular</option><option value="score-desc">Highest Score</option><option value="rating-desc">My Rating ‚Üì</option><option value="rating-asc">My Rating ‚Üë</option><option value="added-desc">Recently Added</option><option value="last-read-desc">Recently Read</option>',9)])],512),[[te,fe.value]]),s[128]||(s[128]=M('<select id="savedDemographicFilter" class="select-field"><option value="All">All Demographics</option><option value="Shonen">Shonen</option><option value="Seinen">Seinen</option><option value="Shoujo">Shoujo</option><option value="Josei">Josei</option></select>',1)),r(e("select",{id:"savedStatusFilter",class:"select-field","onUpdate:modelValue":s[33]||(s[33]=t=>Se(g)?g.value=t:null)},[...s[127]||(s[127]=[M('<option value="ALL">All Statuses</option><option value="Reading">Reading</option><option value="Completed">Completed</option><option value="On Hold">On Hold</option><option value="Plan to Read">Plan to Read</option><option value="Dropped">Dropped</option><option value="HasHistory">Has History</option>',7)])],512),[[te,n(g)]]),s[129]||(s[129]=M('<select id="savedGenreFilter" class="select-field"><option value="All">All Genres</option></select><select id="savedFormatFilter" class="select-field"><option value="All">All Formats</option><option value="Manga">Manga</option><option value="Manhwa">Manhwa</option><option value="Manhua">Manhua</option><option value="One Shot">One Shot</option><option value="Light Novel">Light Novel</option></select>',2)),r(e("input",{type:"text",id:"savedSearchInput",placeholder:"Search titles...",class:"input-field","onUpdate:modelValue":s[34]||(s[34]=t=>Se(F)?F.value=t:null)},null,512),[[ee,n(F)]]),s[130]||(s[130]=M('<div class="view-toggle-group"><button id="view-compact-btn" class="view-toggle-btn" title="Compact View"><svg class="icon-svg icon-view-compact"></svg></button><button id="view-large-btn" class="view-toggle-btn active" title="Large View"><svg class="icon-svg icon-view-large"></svg></button></div>',1))]),s[131]||(s[131]=M('<div class="library-controls-advanced"><div class="advanced-filter-group"><label class="filter-label">Chapters:</label><div class="chapter-range-wrapper"><input type="number" id="chapterMinFilter" class="input-field input-sm" placeholder="Min" min="0" style="width:70px;"><span class="range-separator">‚Äì</span><input type="number" id="chapterMaxFilter" class="input-field input-sm" placeholder="Max" min="0" style="width:70px;"></div></div><div class="advanced-filter-group"><label class="filter-label">Updated:</label><select id="lastUpdatedFilter" class="select-field select-sm"><option value="all">Any Time</option><option value="7d">Last 7 Days</option><option value="30d">Last 30 Days</option><option value="90d">Last 90 Days</option><option value="year">Last Year</option></select></div><div class="advanced-filter-group quick-filters"><button id="filterBingeworthy" class="btn btn-ghost btn-sm filter-preset-btn" title="100+ chapters"> üî• Binge-worthy </button><button id="filterNewChapters" class="btn btn-ghost btn-sm filter-preset-btn" title="Manga with unread chapters"> ‚ú® New Chapters </button><button id="filterClearAdvanced" class="btn btn-ghost btn-sm filter-preset-btn" title="Clear all filters"> ‚úï Clear </button></div></div>',1))]),s[135]||(s[135]=M('<div class="loading-progress" id="loading-progress" style="display:none;"><div class="progress-text"><span id="progress-text">Fetching data...</span><span id="progress-percent">0%</span></div><div class="progress-bar-container"><div class="progress-bar-fill" id="progress-bar-fill" style="width:0%;"></div></div></div>',1)),e("div",Bt,[(p(!0),u(ce,null,ve(n(i),t=>{var d;return p(),u("div",{key:t.id,class:"manga-card","data-id":t.id,onClick:B=>Le(t.url)},[e("div",Tt,[e("img",{src:ke(t),class:"manga-card-cover",loading:"lazy",alt:"Cover"},null,8,Lt),e("div",Ht,[e("button",{class:"icon-btn",title:"View Details",onClick:N(B=>He(t),["stop"])},[(p(),u("svg",Ft))],8,Pt),e("button",{class:"icon-btn delete-btn",title:"Remove from Library",onClick:N(B=>n(oe)(t.id),["stop"]),style:{"margin-left":"8px"}},[(p(),u("svg",Ut,[...s[132]||(s[132]=[e("polyline",{points:"3 6 5 6 21 6"},null,-1),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},null,-1)])]))],8,Ot)]),n(o).appearance.libraryData.progressBars?(p(),u("div",Vt,[e("div",{class:"progress-fill",style:Ce({width:(t.lastReadChapter||0)/(t.totalChapters||1)*100+"%"})},null,4)])):P("",!0)]),e("div",It,[e("div",_t,[e("span",{class:R(["manga-card-status",(d=t.status)==null?void 0:d.toLowerCase().replace(" ","-")])},b(t.status),3),t.format?(p(),u("span",Nt,b(t.format),1)):P("",!0)]),e("h3",{class:"manga-card-title",title:t.title},b(t.title),9,$t),e("div",zt,[e("span",jt,[x(b(t.lastReadChapter?"Ch. "+t.lastReadChapter:"Not started")+" ",1),t.totalChapters?(p(),u("span",Gt,"/ "+b(t.totalChapters),1)):P("",!0)])])])],8,At)}),128)),n(i).length===0?(p(),u("div",Wt,[...s[133]||(s[133]=[e("p",{style:{color:"var(--text-secondary)"}},"No entries found matching your filters.",-1)])])):P("",!0)])])],512),[[Q,k.value==="saved-entries"]]),r(e("div",Jt,[s[154]||(s[154]=e("header",{class:"header"},[e("div",{class:"header-text"},[e("h1",null,"Import & Export"),e("p",{class:"subtitle"},"Manage your manga bookmarks and reading history. Keep your data safe or transfer it to another machine.")])],-1)),e("div",Kt,[e("div",Yt,[e("div",Xt,[e("div",qt,[(p(),u("svg",Zt))]),s[137]||(s[137]=M('<div class="card-title-group"><div style="display:flex;align-items:center;gap:8px;"><h3>Export Data</h3><button class="info-redirect-btn" data-target="guide-backup" title="About Backup &amp; Restore"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></button></div><p class="description compact">Generate a backup of your library and settings.</p></div>',1))]),e("div",Qt,[s[143]||(s[143]=e("p",{class:"section-label"},"Include in export:",-1)),e("div",ea,[e("label",sa,[r(e("input",{type:"checkbox",id:"exportLibrary","onUpdate:modelValue":s[35]||(s[35]=t=>f.value.library=t)},null,512),[[v,f.value.library]]),s[138]||(s[138]=e("span",null,"üìö Library Entries",-1)),e("span",ta,b(n(D).total),1)]),e("label",aa,[r(e("input",{type:"checkbox",id:"exportHistory","onUpdate:modelValue":s[36]||(s[36]=t=>f.value.history=t)},null,512),[[v,f.value.history]]),s[139]||(s[139]=e("span",null,"üìñ Reading History",-1))]),e("label",la,[r(e("input",{type:"checkbox",id:"exportSettings","onUpdate:modelValue":s[37]||(s[37]=t=>f.value.settings=t)},null,512),[[v,f.value.settings]]),s[140]||(s[140]=e("span",null,"‚öôÔ∏è Settings",-1))]),e("label",oa,[r(e("input",{type:"checkbox",id:"exportPersonalData","onUpdate:modelValue":s[38]||(s[38]=t=>f.value.personal=t)},null,512),[[v,f.value.personal]]),s[141]||(s[141]=e("span",null,"üè∑Ô∏è Tags, Notes & Ratings",-1))]),e("label",na,[r(e("input",{type:"checkbox",id:"exportCache","onUpdate:modelValue":s[39]||(s[39]=t=>f.value.cache=t)},null,512),[[v,f.value.cache]]),s[142]||(s[142]=e("span",null,"üíæ AniList Cache",-1))])])]),e("div",ia,[s[145]||(s[145]=e("div",{class:"format-info"},[e("span",{class:"label-info"},[x("Format: "),e("span",{class:"highlight-text"},"JSON")])],-1)),e("button",{id:"exportDataBtn",class:"btn btn-primary btn-with-icon",onClick:Pe},[(p(),u("svg",ra)),s[144]||(s[144]=x(" Export Selected ",-1))])]),s[146]||(s[146]=e("div",{class:"card-footer-info"},[e("span",{class:"status-icon"},"‚ÑπÔ∏è"),e("span",{class:"status-text-muted"},[x("Last backup: "),e("span",{id:"lastBackupDisplay"},"Never")])],-1))]),e("div",da,[e("div",ua,[e("div",pa,[(p(),u("svg",ca))]),e("div",va,[e("div",ga,[s[147]||(s[147]=e("h3",null,"Import Data",-1)),e("button",ma,[(p(),u("svg",ba))])]),s[148]||(s[148]=e("p",{class:"description compact"},"Restore your data from a previously exported file.",-1))])]),e("div",{class:"drop-zone-container",id:"dropZone",onClick:Oe},[e("input",{type:"file",id:"importDataInput",accept:".json,.xml",style:{display:"none"},onChange:Fe},null,32),e("div",ya,[e("div",ha,[(p(),u("svg",fa))]),W.value?(p(),u("span",wa,b(W.value.name),1)):(p(),u("span",ka,"Click to upload or drag and drop")),s[149]||(s[149]=e("span",{class:"drop-zone-subtext"},"Supports .json files",-1))])]),e("div",xa,[e("div",Sa,[s[151]||(s[151]=e("div",{class:"toggle-label-group"},[e("span",{class:"toggle-main-label"},"Merge with current data")],-1)),e("label",Ca,[r(e("input",{type:"checkbox",id:"mergeImportToggle","onUpdate:modelValue":s[40]||(s[40]=t=>q.value=t)},null,512),[[v,q.value]]),s[150]||(s[150]=e("span",{class:"slider round"},null,-1))])]),e("button",{id:"startImportBtn",class:"btn btn-primary btn-with-icon",onClick:Ie,disabled:!W.value},[(p(),u("svg",Ma)),s[152]||(s[152]=x(" Start Import ",-1))],8,Ea)]),s[153]||(s[153]=e("div",{class:"caution-banner"},[e("div",{class:"caution-icon"},"‚ö†Ô∏è"),e("div",{class:"caution-text"},[e("strong",null,"Caution:"),x(' If "Merge with current data" is disabled, all existing bookmarks will be overwritten. ')])],-1))])])],512),[[Q,k.value==="import-export"]]),r(e("div",Ra,[s[185]||(s[185]=e("header",{class:"header"},[e("div",{class:"header-text"},[e("h1",null,"Appearance"),e("p",{class:"subtitle"},"Customize the look and feel of your extension and dashboard.")])],-1)),e("div",Da,[e("div",Ba,[e("div",Aa,[s[155]||(s[155]=e("div",{class:"card-icon"},"üé≠",-1)),s[156]||(s[156]=e("h3",null,"Preset Themes",-1)),e("button",Ta,[(p(),u("svg",La))])]),e("div",Ha,[e("div",Pa,[e("div",{class:R(["theme-preview-card",{active:z.value==="dark"}]),onClick:s[41]||(s[41]=t=>X("dark"))},[...s[157]||(s[157]=[e("div",{class:"theme-swatch dark-swatch"},null,-1),e("span",{class:"theme-label"},"Cloudy Dark",-1)])],2),e("div",{class:R(["theme-preview-card",{active:z.value==="black"}]),onClick:s[42]||(s[42]=t=>X("black"))},[...s[158]||(s[158]=[e("div",{class:"theme-swatch black-swatch"},null,-1),e("span",{class:"theme-label"},"Absolute Black",-1)])],2),e("div",{class:R(["theme-preview-card",{active:z.value==="light"}]),onClick:s[43]||(s[43]=t=>X("light"))},[...s[159]||(s[159]=[e("div",{class:"theme-swatch light-swatch"},null,-1),e("span",{class:"theme-label"},"Clean Light",-1)])],2),e("div",{class:R(["theme-preview-card",{active:z.value==="neon"}]),onClick:s[44]||(s[44]=t=>X("neon"))},[...s[160]||(s[160]=[e("div",{class:"theme-swatch neon-swatch"},null,-1),e("span",{class:"theme-label"},"Cyber Neon",-1)])],2),e("div",{class:R(["theme-preview-card",{active:z.value==="glassy"}]),onClick:s[45]||(s[45]=t=>X("glassy"))},[...s[161]||(s[161]=[e("div",{class:"theme-swatch glassy-swatch"},null,-1),e("span",{class:"theme-label"},"Glassy Blue",-1)])],2)])])]),s[184]||(s[184]=M('<div class="card"><div class="card-header"><div class="card-icon">‚ú®</div><h3>Theme Creator</h3></div><div class="card-body"><p class="description">Create your own personalized appearance by adjusting the colors below.</p><div class="color-creator-grid"><div class="input-wrapper"><label>Background</label><input type="color" id="themeColorBg" value="#0b1437"></div><div class="input-wrapper"><label>Sidebar</label><input type="color" id="themeColorSidebar" value="#111c44"></div><div class="input-wrapper"><label>Accent</label><input type="color" id="themeColorAccent" value="#7551FF"></div><div class="input-wrapper"><label>Text</label><input type="color" id="themeColorText" value="#ffffff"></div></div><div class="button-group" style="margin-top:20px;"><button id="ApplyCustomThemeBtn" class="btn btn-primary">Apply Custom Theme</button><button id="ResetThemeBtn" class="btn btn-ghost">Reset to Default</button></div></div></div>',1)),e("div",Fa,[e("div",Oa,[s[166]||(s[166]=e("div",{class:"card-header"},[e("div",{class:"card-icon"},"üñºÔ∏è"),e("h3",null,"Highlight Styles")],-1)),e("div",Ua,[e("div",Va,[s[163]||(s[163]=e("label",{class:"feature-label"},[x(" Border Style "),e("span",{class:"feature-subtitle"},"Choose line style")],-1)),r(e("select",{id:"borderStyleSelect",class:"select-field","onUpdate:modelValue":s[46]||(s[46]=t=>n(o).appearance.borderStyle=t)},[...s[162]||(s[162]=[e("option",{value:"solid"},"Solid",-1),e("option",{value:"dashed"},"Dashed",-1),e("option",{value:"dotted"},"Dotted",-1)])],512),[[te,n(o).appearance.borderStyle]])]),s[165]||(s[165]=e("div",{class:"divider"},null,-1)),e("div",Ia,[s[164]||(s[164]=e("label",null,"Highlight Thickness",-1)),e("span",_a,b(n(o).appearance.highlightThickness)+"px",1)]),r(e("input",{type:"range",id:"borderThicknessRange",min:"1",max:"10","onUpdate:modelValue":s[47]||(s[47]=t=>n(o).appearance.highlightThickness=t),class:"range-slider"},null,512),[[ee,n(o).appearance.highlightThickness,void 0,{number:!0}]])])]),e("div",Na,[s[183]||(s[183]=e("div",{class:"card-header"},[e("div",{class:"card-icon"},"üìö"),e("h3",null,"Library Styles")],-1)),e("div",$a,[e("div",za,[s[168]||(s[168]=e("label",{class:"feature-label"},[x(" Show Status Borders "),e("span",{class:"feature-subtitle"},"Color borders in library")],-1)),e("label",ja,[r(e("input",{type:"checkbox",id:"LibraryCardBordersEnabled","onUpdate:modelValue":s[48]||(s[48]=t=>n(o).appearance.libraryData.showBorders=t)},null,512),[[v,n(o).appearance.libraryData.showBorders]]),s[167]||(s[167]=e("span",{class:"slider round"},null,-1))])]),e("div",Ga,[s[170]||(s[170]=e("label",{class:"feature-label"},[x(" Only Show with History "),e("span",{class:"feature-subtitle"},"Hide entries with no progress")],-1)),e("label",Wa,[r(e("input",{type:"checkbox",id:"LibraryHideNoHistory","onUpdate:modelValue":s[49]||(s[49]=t=>n(o).appearance.libraryData.hideNoHistory=t)},null,512),[[v,n(o).appearance.libraryData.hideNoHistory]]),s[169]||(s[169]=e("span",{class:"slider round"},null,-1))])]),s[180]||(s[180]=e("div",{class:"divider"},null,-1)),e("div",Ja,[s[171]||(s[171]=e("label",null,"Border Thickness",-1)),e("span",Ka,b(n(o).appearance.libraryData.borderThickness)+"px",1)]),r(e("input",{type:"range",id:"LibraryCardBorderThickness",min:"1",max:"10","onUpdate:modelValue":s[50]||(s[50]=t=>n(o).appearance.libraryData.borderThickness=t),class:"range-slider"},null,512),[[ee,n(o).appearance.libraryData.borderThickness,void 0,{number:!0}]]),s[181]||(s[181]=e("div",{class:"divider"},null,-1)),s[182]||(s[182]=e("p",{class:"section-label"},"‚ú® Visual Effects",-1)),e("div",Ya,[s[173]||(s[173]=e("label",{class:"feature-label"},[x(" Glow Effect "),e("span",{class:"feature-subtitle"},"Use glow instead of solid borders")],-1)),e("label",Xa,[r(e("input",{type:"checkbox",id:"LibraryGlowEffect","onUpdate:modelValue":s[51]||(s[51]=t=>n(o).appearance.libraryData.glowEffect=t)},null,512),[[v,n(o).appearance.libraryData.glowEffect]]),s[172]||(s[172]=e("span",{class:"slider round"},null,-1))])]),e("div",qa,[s[175]||(s[175]=e("label",{class:"feature-label"},[x(" Animated Borders "),e("span",{class:"feature-subtitle"},'Pulse animation for "Reading" status')],-1)),e("label",Za,[r(e("input",{type:"checkbox",id:"LibraryAnimatedBorders","onUpdate:modelValue":s[52]||(s[52]=t=>n(o).appearance.libraryData.animatedBorders=t)},null,512),[[v,n(o).appearance.libraryData.animatedBorders]]),s[174]||(s[174]=e("span",{class:"slider round"},null,-1))])]),e("div",Qa,[s[177]||(s[177]=e("label",{class:"feature-label"},[x(" Status Icons "),e("span",{class:"feature-subtitle"},"Show emoji overlay on cards")],-1)),e("label",el,[r(e("input",{type:"checkbox",id:"LibraryStatusIcons","onUpdate:modelValue":s[53]||(s[53]=t=>n(o).appearance.libraryData.statusIcons=t)},null,512),[[v,n(o).appearance.libraryData.statusIcons]]),s[176]||(s[176]=e("span",{class:"slider round"},null,-1))])]),e("div",sl,[s[179]||(s[179]=e("label",{class:"feature-label"},[x(" Progress Bars "),e("span",{class:"feature-subtitle"},"Reading progress on card covers")],-1)),e("label",tl,[r(e("input",{type:"checkbox",id:"LibraryProgressBars","onUpdate:modelValue":s[54]||(s[54]=t=>n(o).appearance.libraryData.progressBars=t)},null,512),[[v,n(o).appearance.libraryData.progressBars]]),s[178]||(s[178]=e("span",{class:"slider round"},null,-1))])])])])])])],512),[[Q,k.value==="appearance"]]),r(e("div",al,[...s[186]||(s[186]=[M('<header class="header"><div class="header-text"><h1>About</h1><p class="subtitle">Information, usage guide, and credits.</p></div></header><div class="content-grid"><div class="card"><div class="card-body prose"><h2>MangaFire Bookmark Color Marker</h2><p>A powerful Chrome Extension for MangaFire.to.</p></div></div></div>',2)])],512),[[Q,k.value==="about"]]),e("button",{id:"scrollToTopBtn",class:R(["scroll-to-top",{show:xe.value}]),title:"Go to top",onClick:$e},[(p(),u("svg",ll))],2),e("div",{id:"mangaDetailModal",class:R(["modal-overlay",{active:ue.value}]),onClick:N(we,["self"])},[h.value?(p(),u("div",ol,[e("button",{class:"modal-close",id:"modalCloseBtn",onClick:we},"√ó"),e("div",nl,[e("div",il,[e("img",{src:ke(h.value),alt:"Cover",class:"modal-cover"},null,8,rl),e("div",dl,[e("div",ul,[s[187]||(s[187]=e("span",{class:"modal-meta-label"},"Status",-1)),e("div",{class:R(["manga-card-status",(w=h.value.status)==null?void 0:w.toLowerCase().replace(" ","-")])},b(h.value.status),3)]),e("div",pl,[s[188]||(s[188]=e("span",{class:"modal-meta-label"},"Format",-1)),e("div",cl,b(h.value.format||"Unknown"),1)]),e("div",vl,[s[189]||(s[189]=e("span",{class:"modal-meta-label"},"Popularity",-1)),e("div",gl,b(h.value.popularity||"-"),1)]),e("div",ml,[s[190]||(s[190]=e("span",{class:"modal-meta-label"},"Average Score",-1)),e("div",bl,[e("span",yl,b(h.value.averageScore?h.value.averageScore+"%":"-"),1)])]),e("div",hl,[s[191]||(s[191]=e("span",{class:"modal-meta-label"},"Released",-1)),e("div",fl,b(h.value.startDate?h.value.startDate.year:"-"),1)]),s[192]||(s[192]=M('<div class="modal-meta-row" id="modalHistoryRow"><span class="modal-meta-label">History</span><div class="modal-history-actions"><button class="btn btn-ghost btn-sm" style="padding:2px 8px;font-size:11px;">Show Chapters</button><button class="btn btn-primary btn-sm" style="padding:2px 8px;font-size:11px;" title="Mark all chapters as read up to total">‚úì Mark All Read</button></div><div id="modalReadChaptersList" class="modal-chapters-list" style="display:none;"></div></div>',1))])]),e("div",kl,[e("h2",null,b(h.value.title),1),h.value.synonyms&&h.value.synonyms.length?(p(),u("div",wl," Alternative Titles: "+b(h.value.synonyms.slice(0,3).join(", ")),1)):P("",!0),e("div",xl,[(p(!0),u(ce,null,ve(h.value.genres,t=>(p(),u("span",{key:t,class:"genre-tag"},b(t),1))),128))]),e("div",Sl,[s[193]||(s[193]=e("h3",null,"Synopsis",-1)),e("p",{innerHTML:h.value.description||"No description available."},null,8,Cl)]),e("div",El,[h.value.idMal?(p(),u("a",{key:0,href:"https://myanimelist.net/manga/"+h.value.idMal,target:"_blank",class:"external-link"},"MAL",8,Ml)):P("",!0),h.value.id?(p(),u("a",{key:1,href:"https://anilist.co/manga/"+h.value.id,target:"_blank",class:"external-link"},"AniList",8,Rl)):P("",!0)])])])])):P("",!0)],2)])])}}},Ae=Ge(Dl),Bl=je();Ae.use(Bl);Ae.mount("#app");
