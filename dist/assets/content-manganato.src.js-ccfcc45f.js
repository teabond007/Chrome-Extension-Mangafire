import{C as y,R as b,O as C}from"./reader-enhancements-db3a7f4d.js";const u={id:"manganato",name:"Manganato",unitName:"chapter",PREFIX:"manganato:",selectors:{cardContainer:".panel-content-genres, .daily-update, .truyen-list",card:".content-genres-item, .list-truyen-item-wrap, .sh",cardTitle:"h3 a, a.genres-item-name",cardLink:"h3 a, a.genres-item-name",cardCover:"img"},extractCardData(e){var n;let t="",r="",a="";const o=e.querySelector(this.selectors.cardLink)||(e.tagName==="A"?e:null);return o&&(t=o.getAttribute("title")||((n=o.textContent)==null?void 0:n.trim())||"",r=o.href,a=this.extractSlug(r)),{id:a,title:t,slug:a,url:r}},extractSlug(e){try{return new URL(e).pathname.replace(/^\//,"").split("/")[0]}catch{return""}},applyBorder(e,t,r,a){e.style.setProperty("border",`${r}px ${a} ${t}`,"important"),e.style.setProperty("border-radius","5px","important"),e.style.setProperty("box-sizing","border-box","important"),e.style.setProperty("position","relative","important")},getBadgePosition(){return{bottom:"4px",left:"4px"}},buildChapterUrl(e,t){return null},isReaderPage(){return window.location.pathname.includes("chapter-")},parseUrl(e){const t=e.match(/\/([^/]+)\/chapter-([\d.-]+)/);return t?{slug:t[1],chapterNo:parseFloat(t[2])}:null},goToNextChapter(){const e=document.querySelector(".navi-change-chapter-btn-next");e&&e.click()},goToPrevChapter(){const e=document.querySelector(".navi-change-chapter-btn-prev");e&&e.click()},exitReader(){const e=document.querySelector(".panel-breadcrumb a:last-child")||document.querySelector('a[href*="/manga-"]');e?e.click():window.history.back()}};function E(e){try{const a=new URL(e).pathname.split("/").find(o=>o.startsWith("chapter-"));return a?a.replace("chapter-",""):null}catch{return null}}function p(){var i,l;if(!((i=chrome.runtime)!=null&&i.id))return;const e=window.location.href,t=E(e);if(!t)return;const r=document.querySelector(".panel-chapter-info-top h1, .story-info-right h1"),a=(l=r==null?void 0:r.textContent)==null?void 0:l.trim();if(!a)return;const o=u.extractSlug(e),n=`${u.PREFIX}${o}`;chrome.storage.local.get(["savedReadChapters"],g=>{if(chrome.runtime.lastError)return;let s=g.savedReadChapters||{},h=!1;s[n]||(s[n]=[]),s[n].includes(t)||(s[n].push(t),h=!0);const f=s[n].length;chrome.runtime.sendMessage({type:"autoSyncEntry",title:a,chapter:t,slugWithId:`manganato-${o}`,readChapters:f,source:"manganato"},()=>{chrome.runtime.lastError}),h&&chrome.storage.local.set({savedReadChapters:s},()=>{chrome.runtime.lastError||c(`Saved chapter ${t} for ${a}`)})})}function c(e){var r;if(!((r=chrome.runtime)!=null&&r.id))return;const t=typeof e=="object"?JSON.stringify(e):e;chrome.runtime.sendMessage({type:"log",text:`[Manganato] ${t}`},()=>{chrome.runtime.lastError})}function k(){if(document.getElementById("bmh-manganato-styles"))return;const e=document.createElement("style");e.id="bmh-manganato-styles",e.textContent=`
        @keyframes bmh-pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }
        .bmh-progress-badge {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
    `,document.head.appendChild(e),C.injectStyles()}async function d(){var n;if(!((n=chrome.runtime)!=null&&n.id))return;c("Manganato CardEnhancer v3.8.0 (Bundled) initializing..."),k();const e=await new Promise(i=>{chrome.storage.local.get(["ManganatoHighlightEnabled","ManganatoQuickActionsEnabled","CustomBorderSize","CustomBorderSizefeatureEnabled","CustomBookmarksfeatureEnabled","customBookmarks","ManganatoShowProgress"],l=>{if(chrome.runtime.lastError){i({});return}i(l)})});if(e.ManganatoHighlightEnabled===!1){c("Highlighting disabled");return}const t=new y(u,{highlighting:!0,progressBadges:e.ManganatoShowProgress!==!1,quickActions:e.ManganatoQuickActionsEnabled!==!1,CustomBorderSize:e.CustomBorderSizefeatureEnabled?e.CustomBorderSize:4,CustomBookmarksfeatureEnabled:e.CustomBookmarksfeatureEnabled,customBookmarks:e.customBookmarks}),r=await t.enhanceAll();c(`Enhanced ${r} cards`),window.location.pathname.includes("chapter-")&&(p(),new b(u).init(),c("Reader enhancements initialized"));let a;new MutationObserver(()=>{clearTimeout(a),a=setTimeout(()=>t.enhanceAll(),200)}).observe(document.body,{childList:!0,subtree:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>setTimeout(d,800)):setTimeout(d,500);window.addEventListener("load",()=>setTimeout(d,500));let m=location.href;const S=new MutationObserver(()=>{var e;(e=chrome.runtime)!=null&&e.id&&location.href!==m&&(m=location.href,document.querySelectorAll("[data-bmh-enhanced]").forEach(t=>{delete t.dataset.bmhEnhanced}),setTimeout(d,500),location.pathname.includes("chapter-")&&setTimeout(p,500))});S.observe(document,{subtree:!0,childList:!0});
